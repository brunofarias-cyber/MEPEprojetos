{"file_contents":{"server/storage.backup.ts":{"content":"import { randomUUID } from \"crypto\";\nimport type {\n  Teacher, InsertTeacher,\n  Project, InsertProject,\n  RubricCriteria, InsertRubricCriteria,\n  Student, InsertStudent,\n  Achievement, InsertAchievement,\n  StudentAchievement, InsertStudentAchievement,\n  BnccCompetency, InsertBnccCompetency,\n  ProjectCompetency, InsertProjectCompetency,\n  Submission, InsertSubmission,\n  Class, InsertClass,\n  ProjectWithTeacher,\n  StudentAchievementWithDetails,\n} from \"@shared/schema\";\n\nexport interface IStorage {\n  // Teachers\n  getTeacher(id: string): Promise<Teacher | undefined>;\n  getTeachers(): Promise<Teacher[]>;\n  createTeacher(teacher: InsertTeacher): Promise<Teacher>;\n  updateTeacher(id: string, teacher: Partial<InsertTeacher>): Promise<Teacher | undefined>;\n\n  // Projects\n  getProject(id: string): Promise<Project | undefined>;\n  getProjects(): Promise<Project[]>;\n  getProjectsWithTeacher(): Promise<ProjectWithTeacher[]>;\n  createProject(project: InsertProject): Promise<Project>;\n  updateProject(id: string, project: Partial<InsertProject>): Promise<Project | undefined>;\n  deleteProject(id: string): Promise<boolean>;\n\n  // Rubric Criteria\n  getRubricCriteria(projectId: string): Promise<RubricCriteria[]>;\n  createRubricCriteria(criteria: InsertRubricCriteria): Promise<RubricCriteria>;\n  updateRubricCriteria(id: string, criteria: Partial<InsertRubricCriteria>): Promise<RubricCriteria | undefined>;\n  deleteRubricCriteria(id: string): Promise<boolean>;\n\n  // Students\n  getStudent(id: string): Promise<Student | undefined>;\n  getStudents(): Promise<Student[]>;\n  createStudent(student: InsertStudent): Promise<Student>;\n  updateStudent(id: string, student: Partial<InsertStudent>): Promise<Student | undefined>;\n\n  // Achievements\n  getAchievement(id: string): Promise<Achievement | undefined>;\n  getAchievements(): Promise<Achievement[]>;\n  createAchievement(achievement: InsertAchievement): Promise<Achievement>;\n  updateAchievement(id: string, achievement: Partial<InsertAchievement>): Promise<Achievement | undefined>;\n\n  // Student Achievements\n  getStudentAchievements(studentId: string): Promise<StudentAchievementWithDetails[]>;\n  createStudentAchievement(studentAchievement: InsertStudentAchievement): Promise<StudentAchievement>;\n  updateStudentAchievement(id: string, progress: number, unlocked: boolean): Promise<StudentAchievement | undefined>;\n\n  // BNCC Competencies\n  getCompetency(id: string): Promise<BnccCompetency | undefined>;\n  getCompetencies(): Promise<BnccCompetency[]>;\n  createCompetency(competency: InsertBnccCompetency): Promise<BnccCompetency>;\n  updateCompetency(id: string, competency: Partial<InsertBnccCompetency>): Promise<BnccCompetency | undefined>;\n\n  // Project Competencies\n  getProjectCompetencies(projectId: string): Promise<ProjectCompetency[]>;\n  createProjectCompetency(projectCompetency: InsertProjectCompetency): Promise<ProjectCompetency>;\n\n  // Submissions\n  getSubmissions(projectId: string): Promise<Submission[]>;\n  createSubmission(submission: InsertSubmission): Promise<Submission>;\n\n  // Classes\n  getClass(id: string): Promise<Class | undefined>;\n  getClasses(): Promise<Class[]>;\n  createClass(classData: InsertClass): Promise<Class>;\n}\n\nexport class MemStorage implements IStorage {\n  private teachers: Map<string, Teacher> = new Map();\n  private projects: Map<string, Project> = new Map();\n  private rubricCriteria: Map<string, RubricCriteria> = new Map();\n  private students: Map<string, Student> = new Map();\n  private achievements: Map<string, Achievement> = new Map();\n  private studentAchievements: Map<string, StudentAchievement> = new Map();\n  private bnccCompetencies: Map<string, BnccCompetency> = new Map();\n  private projectCompetencies: Map<string, ProjectCompetency> = new Map();\n  private submissions: Map<string, Submission> = new Map();\n  private classes: Map<string, Class> = new Map();\n\n  constructor() {\n    this.seedData();\n  }\n\n  private seedData() {\n    // Seed Teachers\n    const teachers: InsertTeacher[] = [\n      { name: \"Ana Silva\", subject: \"Biologia\", avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=Ana\", rating: 4 },\n      { name: \"Carlos Souza\", subject: \"História\", avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=Carlos\", rating: 4 },\n      { name: \"Roberto Lima\", subject: \"Física\", avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=Roberto\", rating: 5 },\n      { name: \"Mariana Dias\", subject: \"Inglês\", avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=Mariana\", rating: 4 },\n    ];\n    teachers.forEach(t => {\n      const id = randomUUID();\n      this.teachers.set(id, { ...t, id });\n    });\n\n    // Seed Projects\n    const teacherIds = Array.from(this.teachers.keys());\n    const projects: InsertProject[] = [\n      { title: \"Horta Sustentável\", subject: \"Bio & Mat\", status: \"Em Andamento\", progress: 65, students: 24, nextDeadline: \"2024-11-12\", deadlineLabel: \"Relatório de Crescimento\", theme: \"green\", teacherId: teacherIds[0], delayed: false, description: \"Projeto de agricultura urbana\" },\n      { title: \"Jornal Digital\", subject: \"Port & Hist\", status: \"Planejamento\", progress: 15, students: 18, nextDeadline: \"2024-11-20\", deadlineLabel: \"Definição de Pautas\", theme: \"blue\", teacherId: teacherIds[1], delayed: false, description: \"Criação de jornal estudantil\" },\n      { title: \"Robótica Sucata\", subject: \"Fís & Art\", status: \"Para Avaliação\", progress: 100, students: 30, nextDeadline: \"2024-10-30\", deadlineLabel: \"Apresentação Final\", theme: \"purple\", teacherId: teacherIds[2], delayed: false, description: \"Construção de robôs com materiais recicláveis\" },\n      { title: \"Teatro Shakespeare\", subject: \"Lit & Ing\", status: \"Atrasado\", progress: 40, students: 22, nextDeadline: \"2024-10-15\", deadlineLabel: \"Ensaios Gerais\", theme: \"red\", teacherId: teacherIds[3], delayed: true, description: \"Montagem teatral em inglês\" },\n    ];\n    projects.forEach(p => {\n      const id = randomUUID();\n      this.projects.set(id, { ...p, id });\n    });\n\n    // Seed Classes\n    const classes: InsertClass[] = [\n      { name: \"1º Ano A\", studentCount: 32, engagement: 75 },\n      { name: \"2º Ano B\", studentCount: 28, engagement: 82 },\n      { name: \"3º Ano C\", studentCount: 30, engagement: 68 },\n    ];\n    classes.forEach(c => {\n      const id = randomUUID();\n      this.classes.set(id, { ...c, id });\n    });\n\n    // Seed BNCC Competencies\n    const competencies: InsertBnccCompetency[] = [\n      { name: \"Pensamento Científico, Crítico e Criativo\", category: \"Geral\", description: \"Exercitar a curiosidade intelectual\" },\n      { name: \"Repertório Cultural\", category: \"Geral\", description: \"Valorizar e fruir manifestações artísticas\" },\n      { name: \"Comunicação\", category: \"Geral\", description: \"Utilizar diferentes linguagens\" },\n      { name: \"Cultura Digital\", category: \"Geral\", description: \"Compreender e utilizar tecnologias digitais\" },\n      { name: \"Trabalho e Projeto de Vida\", category: \"Geral\", description: \"Valorizar a diversidade e o trabalho\" },\n    ];\n    competencies.forEach(c => {\n      const id = randomUUID();\n      this.bnccCompetencies.set(id, { ...c, id });\n    });\n\n    // Seed Achievements\n    const achievements: InsertAchievement[] = [\n      { title: \"Pontualidade Britânica\", description: \"Entregar 3 tarefas antes do prazo final.\", xp: 500, icon: \"clock\" },\n      { title: \"Mestre da BNCC\", description: \"Completar todas as competências de um projeto.\", xp: 1000, icon: \"award\" },\n      { title: \"Colaborador\", description: \"Participar de 2 projetos em grupo.\", xp: 300, icon: \"users\" },\n    ];\n    achievements.forEach(a => {\n      const id = randomUUID();\n      this.achievements.set(id, { ...a, id });\n    });\n\n    // Seed Rubric Criteria for all projects\n    const projectIds = Array.from(this.projects.keys());\n    projectIds.forEach((projectId, idx) => {\n      const rubricCriteria: InsertRubricCriteria[] = [\n        { projectId, criteria: \"Investigação e Pesquisa\", weight: 40, level1: \"Não apresentou pesquisa\", level2: \"Pesquisa superficial\", level3: \"Pesquisa consistente\", level4: \"Pesquisa aprofundada e inovadora\" },\n        { projectId, criteria: \"Trabalho Colaborativo\", weight: 30, level1: \"Trabalho individual\", level2: \"Pouca colaboração\", level3: \"Boa colaboração\", level4: \"Excelente sinergia em equipe\" },\n        { projectId, criteria: \"Apresentação e Comunicação\", weight: 30, level1: \"Apresentação deficiente\", level2: \"Comunicação básica\", level3: \"Boa comunicação\", level4: \"Comunicação excelente e criativa\" },\n      ];\n      rubricCriteria.forEach(rc => {\n        const id = randomUUID();\n        this.rubricCriteria.set(id, { ...rc, id });\n      });\n    });\n  }\n\n  // Teachers\n  async getTeacher(id: string): Promise<Teacher | undefined> {\n    return this.teachers.get(id);\n  }\n\n  async getTeachers(): Promise<Teacher[]> {\n    return Array.from(this.teachers.values());\n  }\n\n  async createTeacher(teacher: InsertTeacher): Promise<Teacher> {\n    const id = randomUUID();\n    const newTeacher: Teacher = { ...teacher, id };\n    this.teachers.set(id, newTeacher);\n    return newTeacher;\n  }\n\n  async updateTeacher(id: string, teacher: Partial<InsertTeacher>): Promise<Teacher | undefined> {\n    const existing = this.teachers.get(id);\n    if (!existing) return undefined;\n    const updated = { ...existing, ...teacher };\n    this.teachers.set(id, updated);\n    return updated;\n  }\n\n  // Projects\n  async getProject(id: string): Promise<Project | undefined> {\n    return this.projects.get(id);\n  }\n\n  async getProjects(): Promise<Project[]> {\n    return Array.from(this.projects.values());\n  }\n\n  async getProjectsWithTeacher(): Promise<ProjectWithTeacher[]> {\n    const projects = Array.from(this.projects.values());\n    return projects.map(project => {\n      const teacher = this.teachers.get(project.teacherId);\n      return {\n        ...project,\n        teacherName: teacher?.name || \"Unknown\",\n      };\n    });\n  }\n\n  async createProject(project: InsertProject): Promise<Project> {\n    const id = randomUUID();\n    const newProject: Project = { ...project, id };\n    this.projects.set(id, newProject);\n    return newProject;\n  }\n\n  async updateProject(id: string, project: Partial<InsertProject>): Promise<Project | undefined> {\n    const existing = this.projects.get(id);\n    if (!existing) return undefined;\n    const updated = { ...existing, ...project };\n    this.projects.set(id, updated);\n    return updated;\n  }\n\n  async deleteProject(id: string): Promise<boolean> {\n    return this.projects.delete(id);\n  }\n\n  // Rubric Criteria\n  async getRubricCriteria(projectId: string): Promise<RubricCriteria[]> {\n    return Array.from(this.rubricCriteria.values()).filter(c => c.projectId === projectId);\n  }\n\n  async createRubricCriteria(criteria: InsertRubricCriteria): Promise<RubricCriteria> {\n    const id = randomUUID();\n    const newCriteria: RubricCriteria = { ...criteria, id };\n    this.rubricCriteria.set(id, newCriteria);\n    return newCriteria;\n  }\n\n  async updateRubricCriteria(id: string, criteria: Partial<InsertRubricCriteria>): Promise<RubricCriteria | undefined> {\n    const existing = this.rubricCriteria.get(id);\n    if (!existing) return undefined;\n    const updated = { ...existing, ...criteria };\n    this.rubricCriteria.set(id, updated);\n    return updated;\n  }\n\n  async deleteRubricCriteria(id: string): Promise<boolean> {\n    return this.rubricCriteria.delete(id);\n  }\n\n  // Students\n  async getStudent(id: string): Promise<Student | undefined> {\n    return this.students.get(id);\n  }\n\n  async getStudents(): Promise<Student[]> {\n    return Array.from(this.students.values());\n  }\n\n  async createStudent(student: InsertStudent): Promise<Student> {\n    const id = randomUUID();\n    const newStudent: Student = { ...student, id };\n    this.students.set(id, newStudent);\n    return newStudent;\n  }\n\n  async updateStudent(id: string, student: Partial<InsertStudent>): Promise<Student | undefined> {\n    const existing = this.students.get(id);\n    if (!existing) return undefined;\n    const updated = { ...existing, ...student };\n    this.students.set(id, updated);\n    return updated;\n  }\n\n  // Achievements\n  async getAchievement(id: string): Promise<Achievement | undefined> {\n    return this.achievements.get(id);\n  }\n\n  async getAchievements(): Promise<Achievement[]> {\n    return Array.from(this.achievements.values());\n  }\n\n  async createAchievement(achievement: InsertAchievement): Promise<Achievement> {\n    const id = randomUUID();\n    const newAchievement: Achievement = { ...achievement, id };\n    this.achievements.set(id, newAchievement);\n    return newAchievement;\n  }\n\n  async updateAchievement(id: string, achievement: Partial<InsertAchievement>): Promise<Achievement | undefined> {\n    const existing = this.achievements.get(id);\n    if (!existing) return undefined;\n    const updated = { ...existing, ...achievement };\n    this.achievements.set(id, updated);\n    return updated;\n  }\n\n  // Student Achievements\n  async getStudentAchievements(studentId: string): Promise<StudentAchievementWithDetails[]> {\n    const studentAchievements = Array.from(this.studentAchievements.values())\n      .filter(sa => sa.studentId === studentId);\n    \n    return studentAchievements.map(sa => {\n      const achievement = this.achievements.get(sa.achievementId);\n      return {\n        ...sa,\n        achievementTitle: achievement?.title || \"\",\n        achievementDescription: achievement?.description || \"\",\n        achievementXp: achievement?.xp || 0,\n        achievementIcon: achievement?.icon || \"award\",\n      };\n    });\n  }\n\n  async createStudentAchievement(studentAchievement: InsertStudentAchievement): Promise<StudentAchievement> {\n    const id = randomUUID();\n    const newStudentAchievement: StudentAchievement = { ...studentAchievement, id };\n    this.studentAchievements.set(id, newStudentAchievement);\n    return newStudentAchievement;\n  }\n\n  async updateStudentAchievement(id: string, progress: number, unlocked: boolean): Promise<StudentAchievement | undefined> {\n    const existing = this.studentAchievements.get(id);\n    if (!existing) return undefined;\n    const updated = { ...existing, progress, unlocked };\n    this.studentAchievements.set(id, updated);\n    return updated;\n  }\n\n  // BNCC Competencies\n  async getCompetency(id: string): Promise<BnccCompetency | undefined> {\n    return this.bnccCompetencies.get(id);\n  }\n\n  async getCompetencies(): Promise<BnccCompetency[]> {\n    return Array.from(this.bnccCompetencies.values());\n  }\n\n  async createCompetency(competency: InsertBnccCompetency): Promise<BnccCompetency> {\n    const id = randomUUID();\n    const newCompetency: BnccCompetency = { ...competency, id };\n    this.bnccCompetencies.set(id, newCompetency);\n    return newCompetency;\n  }\n\n  async updateCompetency(id: string, competency: Partial<InsertBnccCompetency>): Promise<BnccCompetency | undefined> {\n    const existing = this.bnccCompetencies.get(id);\n    if (!existing) return undefined;\n    const updated = { ...existing, ...competency };\n    this.bnccCompetencies.set(id, updated);\n    return updated;\n  }\n\n  // Project Competencies\n  async getProjectCompetencies(projectId: string): Promise<ProjectCompetency[]> {\n    return Array.from(this.projectCompetencies.values())\n      .filter(pc => pc.projectId === projectId);\n  }\n\n  async createProjectCompetency(projectCompetency: InsertProjectCompetency): Promise<ProjectCompetency> {\n    const id = randomUUID();\n    const newProjectCompetency: ProjectCompetency = { ...projectCompetency, id };\n    this.projectCompetencies.set(id, newProjectCompetency);\n    return newProjectCompetency;\n  }\n\n  // Submissions\n  async getSubmissions(projectId: string): Promise<Submission[]> {\n    return Array.from(this.submissions.values())\n      .filter(s => s.projectId === projectId);\n  }\n\n  async createSubmission(submission: InsertSubmission): Promise<Submission> {\n    const id = randomUUID();\n    const newSubmission: Submission = { ...submission, id, submittedAt: new Date() };\n    this.submissions.set(id, newSubmission);\n    return newSubmission;\n  }\n\n  // Classes\n  async getClass(id: string): Promise<Class | undefined> {\n    return this.classes.get(id);\n  }\n\n  async getClasses(): Promise<Class[]> {\n    return Array.from(this.classes.values());\n  }\n\n  async createClass(classData: InsertClass): Promise<Class> {\n    const id = randomUUID();\n    const newClass: Class = { ...classData, id };\n    this.classes.set(id, newClass);\n    return newClass;\n  }\n}\n\nexport const storage = new MemStorage();\n","size_bytes":16577},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/pages/coordinator/kanban.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Icon } from \"@/components/Icon\";\nimport type { ProjectWithTeacher } from \"@shared/schema\";\n\nexport default function CoordinatorKanban() {\n  const { data: projects = [], isLoading } = useQuery<ProjectWithTeacher[]>({\n    queryKey: ['/api/projects'],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Carregando...</p>\n        </div>\n      </div>\n    );\n  }\n  const columns = [\n    { id: 'Planejamento', title: 'Planejamento', color: 'bg-blue-100 text-blue-700 border-blue-200' },\n    { id: 'Em Andamento', title: 'Em Andamento', color: 'bg-green-100 text-green-700 border-green-200' },\n    { id: 'Para Avaliação', title: 'Para Avaliação', color: 'bg-purple-100 text-purple-700 border-purple-200' },\n    { id: 'Atrasado', title: 'Atrasado', color: 'bg-red-100 text-red-700 border-red-200' },\n  ];\n\n  const getProjectsByStatus = (status: string) => projects.filter(p => p.status === status);\n\n  return (\n    <div className=\"animate-fade-in space-y-8\">\n      <div>\n        <h2 className=\"text-3xl font-bold text-foreground mb-2\" data-testid=\"heading-kanban\">Kanban de Projetos</h2>\n        <p className=\"text-muted-foreground\">Visualize o status de todos os projetos da escola.</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6\">\n        {columns.map((column) => (\n          <div key={column.id} className=\"flex flex-col\" data-testid={`kanban-column-${column.id.toLowerCase().replace(/\\s+/g, '-')}`}>\n            <div className={`${column.color} px-4 py-3 rounded-t-xl border flex items-center justify-between`}>\n              <h3 className=\"font-bold text-sm uppercase tracking-wide\">{column.title}</h3>\n              <span className=\"font-bold text-sm\" data-testid={`text-count-${column.id.toLowerCase().replace(/\\s+/g, '-')}`}>\n                {getProjectsByStatus(column.id).length}\n              </span>\n            </div>\n            \n            <div className=\"bg-muted/30 border border-t-0 border-border rounded-b-xl p-4 space-y-3 min-h-[400px]\">\n              {getProjectsByStatus(column.id).map((project) => (\n                <div \n                  key={project.id} \n                  className=\"bg-card border border-card-border p-4 rounded-lg shadow-sm hover:shadow-md transition cursor-pointer hover-elevate\"\n                  data-testid={`kanban-card-${project.id}`}\n                >\n                  <h4 className=\"font-bold text-foreground mb-2 text-sm\" data-testid={`text-kanban-title-${project.id}`}>\n                    {project.title}\n                  </h4>\n                  <p className=\"text-xs text-muted-foreground mb-3\">{project.subject}</p>\n                  \n                  <div className=\"flex items-center justify-between text-xs\">\n                    <div className=\"flex items-center gap-1 text-muted-foreground\">\n                      <Icon name=\"users\" size={12} />\n                      <span>{project.students}</span>\n                    </div>\n                    <div className=\"flex items-center gap-1 text-muted-foreground\">\n                      <Icon name=\"book\" size={12} />\n                      <span>{project.teacherName}</span>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","size_bytes":3626},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"server/seed.ts":{"content":"import { randomUUID } from \"crypto\";\nimport bcrypt from \"bcrypt\";\nimport { storage } from \"./storage\";\nimport type {\n  InsertUser,\n  InsertCoordinator,\n  InsertTeacher,\n  InsertProject,\n  InsertRubricCriteria,\n  InsertStudent,\n  InsertAchievement,\n  InsertStudentAchievement,\n  InsertBnccCompetency,\n  InsertClass,\n} from \"@shared/schema\";\n\nexport async function seedDatabase() {\n  console.log(\"🌱 Starting database seed...\");\n\n  // Create demo users with hashed passwords\n  const hashedPassword = await bcrypt.hash(\"demo123\", 10);\n\n  // Seed Coordinator User\n  const coordinatorUser = await storage.createUser({\n    email: \"coordenador@escola.com\",\n    hashedPassword,\n    role: \"coordinator\",\n    name: \"Maria Coordenadora\",\n    avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=Maria\",\n  });\n\n  const coordinator = await storage.createCoordinator({\n    userId: coordinatorUser.id,\n    name: \"Maria Coordenadora\",\n    avatar: \"https://api.dicebear.com/7.x/avataaars/svg?seed=Maria\",\n  });\n  console.log(\"✅ Coordinator created\");\n\n  // Seed Teacher Users\n  const teacherData = [\n    { name: \"Ana Silva\", subject: \"Biologia\", email: \"ana@escola.com\" },\n    { name: \"Carlos Souza\", subject: \"História\", email: \"carlos@escola.com\" },\n    { name: \"Roberto Lima\", subject: \"Física\", email: \"roberto@escola.com\" },\n    { name: \"Mariana Dias\", subject: \"Inglês\", email: \"mariana@escola.com\" },\n  ];\n\n  const teachers = [];\n  for (const t of teacherData) {\n    const user = await storage.createUser({\n      email: t.email,\n      hashedPassword,\n      role: \"teacher\",\n      name: t.name,\n      avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${t.name.split(' ')[0]}`,\n    });\n\n    const teacher = await storage.createTeacher({\n      userId: user.id,\n      name: t.name,\n      subject: t.subject,\n      avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${t.name.split(' ')[0]}`,\n      rating: Math.floor(Math.random() * 2) + 4, // 4 or 5\n    });\n\n    teachers.push(teacher);\n  }\n  console.log(\"✅ Teachers created\");\n\n  // Seed Projects\n  const projectsData: InsertProject[] = [\n    { title: \"Horta Sustentável\", subject: \"Bio & Mat\", status: \"Em Andamento\", progress: 65, students: 24, nextDeadline: \"2024-11-12\", deadlineLabel: \"Relatório de Crescimento\", theme: \"green\", teacherId: teachers[0].id, delayed: false, description: \"Projeto de agricultura urbana\" },\n    { title: \"Jornal Digital\", subject: \"Port & Hist\", status: \"Planejamento\", progress: 15, students: 18, nextDeadline: \"2024-11-20\", deadlineLabel: \"Definição de Pautas\", theme: \"blue\", teacherId: teachers[1].id, delayed: false, description: \"Criação de jornal estudantil\" },\n    { title: \"Robótica Sucata\", subject: \"Fís & Art\", status: \"Para Avaliação\", progress: 100, students: 30, nextDeadline: \"2024-10-30\", deadlineLabel: \"Apresentação Final\", theme: \"purple\", teacherId: teachers[2].id, delayed: false, description: \"Construção de robôs com materiais recicláveis\" },\n    { title: \"Teatro Shakespeare\", subject: \"Lit & Ing\", status: \"Atrasado\", progress: 40, students: 22, nextDeadline: \"2024-10-15\", deadlineLabel: \"Ensaios Gerais\", theme: \"red\", teacherId: teachers[3].id, delayed: true, description: \"Montagem teatral em inglês\" },\n  ];\n\n  const projects = [];\n  for (const p of projectsData) {\n    const project = await storage.createProject(p);\n    projects.push(project);\n  }\n  console.log(\"✅ Projects created\");\n\n  // Seed Rubric Criteria for all projects\n  for (const project of projects) {\n    const rubrics: InsertRubricCriteria[] = [\n      { projectId: project.id, criteria: \"Investigação e Pesquisa\", weight: 40, level1: \"Não apresentou pesquisa\", level2: \"Pesquisa superficial\", level3: \"Pesquisa consistente\", level4: \"Pesquisa aprofundada e inovadora\" },\n      { projectId: project.id, criteria: \"Trabalho Colaborativo\", weight: 30, level1: \"Trabalho individual\", level2: \"Pouca colaboração\", level3: \"Boa colaboração\", level4: \"Excelente sinergia em equipe\" },\n      { projectId: project.id, criteria: \"Apresentação e Comunicação\", weight: 30, level1: \"Apresentação deficiente\", level2: \"Comunicação básica\", level3: \"Boa comunicação\", level4: \"Comunicação excelente e criativa\" },\n    ];\n\n    for (const r of rubrics) {\n      await storage.createRubricCriteria(r);\n    }\n  }\n  console.log(\"✅ Rubric criteria created\");\n\n  // Seed Classes\n  const classesData: InsertClass[] = [\n    { name: \"1º Ano A\", studentCount: 32, engagement: 75 },\n    { name: \"2º Ano B\", studentCount: 28, engagement: 82 },\n    { name: \"3º Ano C\", studentCount: 30, engagement: 68 },\n  ];\n\n  for (const c of classesData) {\n    await storage.createClass(c);\n  }\n  console.log(\"✅ Classes created\");\n\n  // Seed Student Users\n  const studentNames = [\"Lucas Alves\", \"Julia Costa\", \"Pedro Santos\"];\n  const students = [];\n  for (let i = 0; i < studentNames.length; i++) {\n    const name = studentNames[i];\n    const user = await storage.createUser({\n      email: `${name.toLowerCase().replace(' ', '.')}@aluno.com`,\n      hashedPassword,\n      role: \"student\",\n      name: name,\n      avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${name.split(' ')[0]}`,\n    });\n\n    const student = await storage.createStudent({\n      userId: user.id,\n      name: name,\n      email: `${name.toLowerCase().replace(' ', '.')}@aluno.com`,\n      avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${name.split(' ')[0]}`,\n      xp: 1200 + (i * 300),\n      level: 3 + i,\n    });\n\n    students.push(student);\n  }\n  console.log(\"✅ Students created\");\n\n  // Seed Achievements\n  const achievementsData: InsertAchievement[] = [\n    { title: \"Primeira Entrega\", description: \"Complete sua primeira submissão\", xp: 100, icon: \"rocket\" },\n    { title: \"Colaborador Ativo\", description: \"Participe de 10 projetos em equipe\", xp: 250, icon: \"users\" },\n    { title: \"Pesquisador\", description: \"Realize pesquisas em 5 projetos\", xp: 300, icon: \"book-open\" },\n    { title: \"Apresentador Expert\", description: \"Apresente 3 projetos com nota máxima\", xp: 500, icon: \"trophy\" },\n  ];\n\n  const achievements = [];\n  for (const a of achievementsData) {\n    const achievement = await storage.createAchievement(a);\n    achievements.push(achievement);\n  }\n  console.log(\"✅ Achievements created\");\n\n  // Seed Student Achievements\n  for (const student of students) {\n    for (let i = 0; i < achievements.length; i++) {\n      const achievement = achievements[i];\n      const progress = Math.floor(Math.random() * achievement.xp);\n      const unlocked = progress >= achievement.xp;\n\n      await storage.createStudentAchievement({\n        studentId: student.id,\n        achievementId: achievement.id,\n        progress,\n        total: achievement.xp,\n        unlocked,\n      });\n    }\n  }\n  console.log(\"✅ Student achievements created\");\n\n  // Seed BNCC Competencies\n  const competenciesData: InsertBnccCompetency[] = [\n    { name: \"Conhecimento\", category: \"Geral\", description: \"Valorizar e utilizar conhecimentos sobre o mundo\" },\n    { name: \"Pensamento Científico\", category: \"Geral\", description: \"Exercitar a curiosidade intelectual\" },\n    { name: \"Repertório Cultural\", category: \"Geral\", description: \"Valorizar as diversas manifestações artísticas\" },\n    { name: \"Comunicação\", category: \"Geral\", description: \"Utilizar diferentes linguagens\" },\n  ];\n\n  for (const c of competenciesData) {\n    await storage.createCompetency(c);\n  }\n  console.log(\"✅ BNCC competencies created\");\n\n  console.log(\"🎉 Database seeded successfully!\");\n  console.log(\"\\n📝 Demo credentials:\");\n  console.log(\"Coordinator: coordenador@escola.com / demo123\");\n  console.log(\"Teacher: ana@escola.com / demo123\");\n  console.log(\"Student: lucas.alves@aluno.com / demo123\");\n}\n\n// Run seed if called directly\nif (import.meta.url === `file://${process.argv[1]}`) {\n  seedDatabase()\n    .then(() => process.exit(0))\n    .catch((err) => {\n      console.error(\"❌ Seed failed:\", err);\n      process.exit(1);\n    });\n}\n","size_bytes":8015},"shared/schema.ts":{"content":"import { pgTable, text, varchar, integer, boolean, timestamp } from \"drizzle-orm/pg-core\";\nimport { relations } from \"drizzle-orm\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Users table (authentication)\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey(),\n  email: text(\"email\").notNull().unique(),\n  hashedPassword: text(\"hashed_password\").notNull(),\n  role: text(\"role\").notNull(), // teacher, student, coordinator\n  name: text(\"name\").notNull(),\n  avatar: text(\"avatar\"),\n});\n\n// Coordinators table\nexport const coordinators = pgTable(\"coordinators\", {\n  id: varchar(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull().unique().references(() => users.id, { onDelete: 'cascade' }),\n  name: text(\"name\").notNull(),\n  avatar: text(\"avatar\"),\n});\n\n// Teachers table\nexport const teachers = pgTable(\"teachers\", {\n  id: varchar(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull().unique().references(() => users.id, { onDelete: 'cascade' }),\n  name: text(\"name\").notNull(),\n  subject: text(\"subject\").notNull(),\n  avatar: text(\"avatar\"),\n  rating: integer(\"rating\").default(0),\n});\n\n// Projects table\nexport const projects = pgTable(\"projects\", {\n  id: varchar(\"id\").primaryKey(),\n  title: text(\"title\").notNull(),\n  subject: text(\"subject\").notNull(),\n  status: text(\"status\").notNull(), // Planejamento, Em Andamento, Para Avaliação, Atrasado\n  progress: integer(\"progress\").notNull().default(0),\n  students: integer(\"students\").notNull().default(0),\n  nextDeadline: text(\"next_deadline\"),\n  deadlineLabel: text(\"deadline_label\"),\n  theme: text(\"theme\").notNull(), // green, blue, purple, red\n  teacherId: varchar(\"teacher_id\").notNull().references(() => teachers.id, { onDelete: 'cascade' }),\n  delayed: boolean(\"delayed\").notNull().default(false),\n  description: text(\"description\"),\n});\n\n// Project Planning table\nexport const projectPlanning = pgTable(\"project_planning\", {\n  id: varchar(\"id\").primaryKey(),\n  projectId: varchar(\"project_id\").notNull().unique().references(() => projects.id, { onDelete: 'cascade' }),\n  objectives: text(\"objectives\"), // Objetivos do projeto\n  methodology: text(\"methodology\"), // Metodologia/Abordagem\n  resources: text(\"resources\"), // Recursos necessários\n  timeline: text(\"timeline\"), // Cronograma\n  expectedOutcomes: text(\"expected_outcomes\"), // Resultados esperados\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\n// Rubric Criteria table\nexport const rubricCriteria = pgTable(\"rubric_criteria\", {\n  id: varchar(\"id\").primaryKey(),\n  projectId: varchar(\"project_id\").notNull().references(() => projects.id, { onDelete: 'cascade' }),\n  criteria: text(\"criteria\").notNull(),\n  weight: integer(\"weight\").notNull(),\n  level1: text(\"level1\").notNull(),\n  level2: text(\"level2\").notNull(),\n  level3: text(\"level3\").notNull(),\n  level4: text(\"level4\").notNull(),\n});\n\n// Students table\nexport const students = pgTable(\"students\", {\n  id: varchar(\"id\").primaryKey(),\n  userId: varchar(\"user_id\").notNull().unique().references(() => users.id, { onDelete: 'cascade' }),\n  name: text(\"name\").notNull(),\n  email: text(\"email\").notNull().unique(),\n  avatar: text(\"avatar\"),\n  xp: integer(\"xp\").notNull().default(0),\n  level: integer(\"level\").notNull().default(1),\n});\n\n// Achievements table\nexport const achievements = pgTable(\"achievements\", {\n  id: varchar(\"id\").primaryKey(),\n  title: text(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  xp: integer(\"xp\").notNull(),\n  icon: text(\"icon\").notNull(),\n});\n\n// Student Achievements (progress tracking)\nexport const studentAchievements = pgTable(\"student_achievements\", {\n  id: varchar(\"id\").primaryKey(),\n  studentId: varchar(\"student_id\").notNull().references(() => students.id, { onDelete: 'cascade' }),\n  achievementId: varchar(\"achievement_id\").notNull().references(() => achievements.id, { onDelete: 'cascade' }),\n  progress: integer(\"progress\").notNull().default(0),\n  total: integer(\"total\").notNull(),\n  unlocked: boolean(\"unlocked\").notNull().default(false),\n});\n\n// BNCC Documents (uploaded PDF files) - MUST be defined before bnccCompetencies\nexport const bnccDocuments = pgTable(\"bncc_documents\", {\n  id: varchar(\"id\").primaryKey(),\n  filename: text(\"filename\").notNull(),\n  uploadedBy: varchar(\"uploaded_by\").notNull().references(() => coordinators.id, { onDelete: 'cascade' }),\n  uploadedAt: timestamp(\"uploaded_at\").notNull().defaultNow(),\n  textContent: text(\"text_content\"), // Extracted text from PDF\n  processingStatus: text(\"processing_status\").notNull().default(\"processing\"), // processing, completed, failed\n  competenciesExtracted: integer(\"competencies_extracted\").default(0),\n});\n\n// BNCC Competencies\nexport const bnccCompetencies = pgTable(\"bncc_competencies\", {\n  id: varchar(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  category: text(\"category\").notNull(), // Geral, Específica\n  description: text(\"description\"),\n  documentId: varchar(\"document_id\").references(() => bnccDocuments.id, { onDelete: 'cascade' }),\n});\n\n// Project Competencies (mapping)\nexport const projectCompetencies = pgTable(\"project_competencies\", {\n  id: varchar(\"id\").primaryKey(),\n  projectId: varchar(\"project_id\").notNull().references(() => projects.id, { onDelete: 'cascade' }),\n  competencyId: varchar(\"competency_id\").notNull().references(() => bnccCompetencies.id, { onDelete: 'cascade' }),\n  coverage: integer(\"coverage\").notNull().default(0), // 0-100%\n});\n\n// Submissions\nexport const submissions = pgTable(\"submissions\", {\n  id: varchar(\"id\").primaryKey(),\n  projectId: varchar(\"project_id\").notNull().references(() => projects.id, { onDelete: 'cascade' }),\n  studentId: varchar(\"student_id\").notNull().references(() => students.id, { onDelete: 'cascade' }),\n  type: text(\"type\").notNull(), // file or link\n  content: text(\"content\").notNull(), // URL or file path\n  comment: text(\"comment\"),\n  submittedAt: timestamp(\"submitted_at\").notNull().defaultNow(),\n});\n\n// Classes (Turmas)\nexport const classes = pgTable(\"classes\", {\n  id: varchar(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  teacherId: varchar(\"teacher_id\").notNull().references(() => teachers.id, { onDelete: 'cascade' }),\n  studentCount: integer(\"student_count\").notNull().default(0),\n  engagement: integer(\"engagement\").notNull().default(0), // 0-100%\n});\n\n// Feedbacks (general feedback for projects/teams)\nexport const feedbacks = pgTable(\"feedbacks\", {\n  id: varchar(\"id\").primaryKey(),\n  projectId: varchar(\"project_id\").notNull().references(() => projects.id, { onDelete: 'cascade' }),\n  teacherId: varchar(\"teacher_id\").notNull().references(() => teachers.id, { onDelete: 'cascade' }),\n  comment: text(\"comment\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Events (reunions, deadlines for projects)\nexport const events = pgTable(\"events\", {\n  id: varchar(\"id\").primaryKey(),\n  title: text(\"title\").notNull(),\n  description: text(\"description\"),\n  date: text(\"date\").notNull(), // YYYY-MM-DD format\n  time: text(\"time\").notNull(), // HH:MM format\n  location: text(\"location\").notNull(), // Physical location\n  projectId: varchar(\"project_id\").references(() => projects.id, { onDelete: 'cascade' }), // Optional: link to project\n  teacherId: varchar(\"teacher_id\").notNull().references(() => teachers.id, { onDelete: 'cascade' }),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\n// Event Responses (student responses to events)\nexport const eventResponses = pgTable(\"event_responses\", {\n  id: varchar(\"id\").primaryKey(),\n  eventId: varchar(\"event_id\").notNull().references(() => events.id, { onDelete: 'cascade' }),\n  studentId: varchar(\"student_id\").notNull().references(() => students.id, { onDelete: 'cascade' }),\n  status: text(\"status\").notNull(), // 'pending', 'accepted', 'rejected'\n  respondedAt: timestamp(\"responded_at\"),\n});\n\n// Insert schemas\nexport const insertUserSchema = createInsertSchema(users).omit({ id: true });\nexport const insertCoordinatorSchema = createInsertSchema(coordinators).omit({ id: true });\nexport const insertTeacherSchema = createInsertSchema(teachers).omit({ id: true });\nexport const insertProjectSchema = createInsertSchema(projects).omit({ id: true });\nexport const insertProjectPlanningSchema = createInsertSchema(projectPlanning).omit({ id: true, createdAt: true, updatedAt: true });\nexport const insertRubricCriteriaSchema = createInsertSchema(rubricCriteria).omit({ id: true });\nexport const insertStudentSchema = createInsertSchema(students).omit({ id: true });\nexport const insertAchievementSchema = createInsertSchema(achievements).omit({ id: true });\nexport const insertStudentAchievementSchema = createInsertSchema(studentAchievements).omit({ id: true });\nexport const insertBnccCompetencySchema = createInsertSchema(bnccCompetencies).omit({ id: true });\nexport const insertProjectCompetencySchema = createInsertSchema(projectCompetencies).omit({ id: true });\nexport const insertSubmissionSchema = createInsertSchema(submissions).omit({ id: true });\nexport const insertClassSchema = createInsertSchema(classes).omit({ id: true });\nexport const insertBnccDocumentSchema = createInsertSchema(bnccDocuments).omit({ id: true, uploadedAt: true });\nexport const insertFeedbackSchema = createInsertSchema(feedbacks).omit({ id: true, createdAt: true });\nexport const insertEventSchema = createInsertSchema(events).omit({ id: true, createdAt: true });\nexport const insertEventResponseSchema = createInsertSchema(eventResponses).omit({ id: true, respondedAt: true });\n\n// Types\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\n\nexport type Coordinator = typeof coordinators.$inferSelect;\nexport type InsertCoordinator = z.infer<typeof insertCoordinatorSchema>;\n\nexport type Teacher = typeof teachers.$inferSelect;\nexport type InsertTeacher = z.infer<typeof insertTeacherSchema>;\n\nexport type Project = typeof projects.$inferSelect;\nexport type InsertProject = z.infer<typeof insertProjectSchema>;\n\nexport type ProjectPlanning = typeof projectPlanning.$inferSelect;\nexport type InsertProjectPlanning = z.infer<typeof insertProjectPlanningSchema>;\n\nexport type RubricCriteria = typeof rubricCriteria.$inferSelect;\nexport type InsertRubricCriteria = z.infer<typeof insertRubricCriteriaSchema>;\n\nexport type Student = typeof students.$inferSelect;\nexport type InsertStudent = z.infer<typeof insertStudentSchema>;\n\nexport type Achievement = typeof achievements.$inferSelect;\nexport type InsertAchievement = z.infer<typeof insertAchievementSchema>;\n\nexport type StudentAchievement = typeof studentAchievements.$inferSelect;\nexport type InsertStudentAchievement = z.infer<typeof insertStudentAchievementSchema>;\n\nexport type BnccCompetency = typeof bnccCompetencies.$inferSelect;\nexport type InsertBnccCompetency = z.infer<typeof insertBnccCompetencySchema>;\n\nexport type ProjectCompetency = typeof projectCompetencies.$inferSelect;\nexport type InsertProjectCompetency = z.infer<typeof insertProjectCompetencySchema>;\n\nexport type Submission = typeof submissions.$inferSelect;\nexport type InsertSubmission = z.infer<typeof insertSubmissionSchema>;\n\nexport type Class = typeof classes.$inferSelect;\nexport type InsertClass = z.infer<typeof insertClassSchema>;\n\nexport type BnccDocument = typeof bnccDocuments.$inferSelect;\nexport type InsertBnccDocument = z.infer<typeof insertBnccDocumentSchema>;\n\nexport type Feedback = typeof feedbacks.$inferSelect;\nexport type InsertFeedback = z.infer<typeof insertFeedbackSchema>;\n\nexport type Event = typeof events.$inferSelect;\nexport type InsertEvent = z.infer<typeof insertEventSchema>;\n\nexport type EventResponse = typeof eventResponses.$inferSelect;\nexport type InsertEventResponse = z.infer<typeof insertEventResponseSchema>;\n\n// Extended types for UI (with joined data)\nexport type ProjectWithTeacher = Project & { teacherName: string };\nexport type StudentAchievementWithDetails = StudentAchievement & { achievementTitle: string; achievementDescription: string; achievementXp: number; achievementIcon: string };\n\n// Drizzle Relations\nexport const usersRelations = relations(users, ({ one }) => ({\n  teacher: one(teachers, { fields: [users.id], references: [teachers.userId] }),\n  student: one(students, { fields: [users.id], references: [students.userId] }),\n  coordinator: one(coordinators, { fields: [users.id], references: [coordinators.userId] }),\n}));\n\nexport const coordinatorsRelations = relations(coordinators, ({ one }) => ({\n  user: one(users, { fields: [coordinators.userId], references: [users.id] }),\n}));\n\nexport const teachersRelations = relations(teachers, ({ one, many }) => ({\n  user: one(users, { fields: [teachers.userId], references: [users.id] }),\n  projects: many(projects),\n}));\n\nexport const projectsRelations = relations(projects, ({ one, many }) => ({\n  teacher: one(teachers, { fields: [projects.teacherId], references: [teachers.id] }),\n  rubricCriteria: many(rubricCriteria),\n  competencies: many(projectCompetencies),\n  submissions: many(submissions),\n}));\n\nexport const rubricCriteriaRelations = relations(rubricCriteria, ({ one }) => ({\n  project: one(projects, { fields: [rubricCriteria.projectId], references: [projects.id] }),\n}));\n\nexport const studentsRelations = relations(students, ({ one, many }) => ({\n  user: one(users, { fields: [students.userId], references: [users.id] }),\n  achievements: many(studentAchievements),\n  submissions: many(submissions),\n}));\n\nexport const studentAchievementsRelations = relations(studentAchievements, ({ one }) => ({\n  student: one(students, { fields: [studentAchievements.studentId], references: [students.id] }),\n  achievement: one(achievements, { fields: [studentAchievements.achievementId], references: [achievements.id] }),\n}));\n\nexport const achievementsRelations = relations(achievements, ({ many }) => ({\n  studentAchievements: many(studentAchievements),\n}));\n\nexport const projectCompetenciesRelations = relations(projectCompetencies, ({ one }) => ({\n  project: one(projects, { fields: [projectCompetencies.projectId], references: [projects.id] }),\n  competency: one(bnccCompetencies, { fields: [projectCompetencies.competencyId], references: [bnccCompetencies.id] }),\n}));\n\nexport const bnccCompetenciesRelations = relations(bnccCompetencies, ({ many }) => ({\n  projects: many(projectCompetencies),\n}));\n\nexport const submissionsRelations = relations(submissions, ({ one }) => ({\n  project: one(projects, { fields: [submissions.projectId], references: [projects.id] }),\n  student: one(students, { fields: [submissions.studentId], references: [students.id] }),\n}));\n","size_bytes":14695},"client/src/pages/student/achievements.tsx":{"content":"import { Icon } from \"@/components/Icon\";\nimport type { StudentAchievementWithDetails } from \"@shared/schema\";\n\ninterface StudentAchievementsProps {\n  achievements: StudentAchievementWithDetails[];\n}\n\nexport default function StudentAchievements({ achievements }: StudentAchievementsProps) {\n  const mockAchievements = [\n    { id: '1', title: \"Pontualidade Britânica\", desc: \"Entregar 3 tarefas antes do prazo final.\", xp: 500, progress: 2, total: 3, icon: \"clock\", unlocked: false },\n    { id: '2', title: \"Mestre da BNCC\", desc: \"Completar todas as competências de um projeto.\", xp: 1000, progress: 8, total: 10, icon: \"award\", unlocked: false },\n    { id: '3', title: \"Colaborador\", desc: \"Participar de 2 projetos em grupo.\", xp: 300, progress: 2, total: 2, icon: \"users\", unlocked: true },\n  ];\n\n  return (\n    <div className=\"animate-fade-in space-y-8\">\n      <div>\n        <h2 className=\"text-3xl font-bold text-foreground mb-2\" data-testid=\"heading-achievements\">Conquistas</h2>\n        <p className=\"text-muted-foreground\">Desbloqueie conquistas e ganhe XP extra.</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {mockAchievements.map((achievement) => (\n          <div \n            key={achievement.id}\n            className={`bg-card border border-card-border p-6 rounded-2xl shadow-sm relative overflow-hidden ${\n              achievement.unlocked ? '' : 'opacity-75 grayscale'\n            }`}\n            data-testid={`card-achievement-${achievement.id}`}\n          >\n            {achievement.unlocked && (\n              <div className=\"absolute top-4 right-4 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center\">\n                <Icon name=\"check\" size={16} className=\"text-white\" />\n              </div>\n            )}\n\n            <div className=\"flex items-start gap-4 mb-4\">\n              <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center relative\">\n                <Icon name={achievement.icon} size={28} className=\"text-primary\" />\n                {!achievement.unlocked && (\n                  <div className=\"absolute inset-0 bg-muted/50 rounded-full flex items-center justify-center\">\n                    <Icon name=\"x\" size={20} className=\"text-muted-foreground\" />\n                  </div>\n                )}\n              </div>\n\n              <div className=\"flex-1\">\n                <h3 className=\"text-lg font-bold text-foreground mb-1\" data-testid={`text-achievement-title-${achievement.id}`}>\n                  {achievement.title}\n                </h3>\n                <p className=\"text-sm text-muted-foreground\" data-testid={`text-achievement-desc-${achievement.id}`}>\n                  {achievement.desc}\n                </p>\n              </div>\n\n              <div className=\"bg-purple-100 text-purple-700 px-3 py-1 rounded-full text-xs font-bold\" data-testid={`text-achievement-xp-${achievement.id}`}>\n                +{achievement.xp} XP\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Progresso</span>\n                <span className=\"font-bold text-foreground\" data-testid={`text-achievement-progress-${achievement.id}`}>\n                  {achievement.progress}/{achievement.total}\n                </span>\n              </div>\n              <div className=\"h-2 bg-muted rounded-full overflow-hidden\">\n                <div \n                  className=\"h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-1000\" \n                  style={{ width: `${(achievement.progress / achievement.total) * 100}%` }}\n                  data-testid={`progress-achievement-${achievement.id}`}\n                ></div>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","size_bytes":3904},"client/src/components/AppSidebar.tsx":{"content":"import { BrandLogo } from \"./BrandLogo\";\nimport { Icon } from \"./Icon\";\nimport { Link, useLocation } from \"wouter\";\nimport { Avatar, AvatarImage, AvatarFallback } from \"@/components/ui/avatar\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n} from \"@/components/ui/sidebar\";\n\ninterface AppSidebarProps {\n  role: 'teacher' | 'student' | 'coordinator';\n  onLogout: () => void;\n  userName: string;\n  userAvatar?: string | null;\n}\n\nexport function AppSidebar({ role, onLogout, userName, userAvatar }: AppSidebarProps) {\n  const [location] = useLocation();\n\n  const getRoleLabel = () => {\n    if (role === 'teacher') return 'Professor';\n    if (role === 'student') return 'Aluno';\n    if (role === 'coordinator') return 'Coordenador';\n  };\n  \n  return (\n    <Sidebar>\n      <SidebarHeader>\n        <div className=\"flex items-center gap-3 px-4 py-4\">\n          <BrandLogo size={36} />\n          <h1 className=\"text-2xl font-extrabold text-foreground tracking-tight\">BProjetos</h1>\n        </div>\n      </SidebarHeader>\n      \n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Navegação</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              <SidebarMenuItem>\n                <SidebarMenuButton asChild isActive={location === '/'}>\n                  <Link href=\"/\" data-testid=\"nav-visao-geral\">\n                    <Icon name=\"home\" size={20} />\n                    <span>Visão Geral</span>\n                  </Link>\n                </SidebarMenuButton>\n              </SidebarMenuItem>\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n\n        <SidebarGroup>\n          <SidebarGroupLabel>\n            {role === 'teacher' ? 'Gestão' : role === 'student' ? 'Minhas Atividades' : 'Administração'}\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {role === 'teacher' && (\n                <>\n                  <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={location === '/classes'}>\n                      <Link href=\"/classes\" data-testid=\"nav-turmas\">\n                        <Icon name=\"users\" size={20} />\n                        <span>Turmas</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                  <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={location === '/reports'}>\n                      <Link href=\"/reports\" data-testid=\"nav-relatorios\">\n                        <Icon name=\"barChart\" size={20} />\n                        <span>Relatórios</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                  <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={location === '/rubrics'}>\n                      <Link href=\"/rubrics\" data-testid=\"nav-rubricas\">\n                        <Icon name=\"clipboard\" size={20} />\n                        <span>Rubricas</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                  <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={location === '/bncc'}>\n                      <Link href=\"/bncc\" data-testid=\"nav-bncc\">\n                        <Icon name=\"book\" size={20} />\n                        <span>BNCC</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                  <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={location === '/feedbacks'}>\n                      <Link href=\"/feedbacks\" data-testid=\"nav-feedbacks\">\n                        <Icon name=\"messageSquare\" size={20} />\n                        <span>Feedbacks</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                  <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={location === '/calendar'}>\n                      <Link href=\"/calendar\" data-testid=\"nav-calendario\">\n                        <Icon name=\"calendar\" size={20} />\n                        <span>Calendário</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                </>\n              )}\n              {role === 'student' && (\n                <>\n                  <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={location === '/projects'}>\n                      <Link href=\"/projects\" data-testid=\"nav-projetos\">\n                        <Icon name=\"book\" size={20} />\n                        <span>Projetos</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                  <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={location === '/calendar'}>\n                      <Link href=\"/calendar\" data-testid=\"nav-calendario\">\n                        <Icon name=\"calendar\" size={20} />\n                        <span>Calendário</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                  <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={location === '/achievements'}>\n                      <Link href=\"/achievements\" data-testid=\"nav-conquistas\">\n                        <Icon name=\"award\" size={20} />\n                        <span>Conquistas</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                </>\n              )}\n              {role === 'coordinator' && (\n                <>\n                  <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={location === '/teachers'}>\n                      <Link href=\"/teachers\" data-testid=\"nav-professores\">\n                        <Icon name=\"users\" size={20} />\n                        <span>Professores</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                  <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={location === '/students'}>\n                      <Link href=\"/students\" data-testid=\"nav-alunos\">\n                        <Icon name=\"users\" size={20} />\n                        <span>Alunos</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                  <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={location === '/metrics'}>\n                      <Link href=\"/metrics\" data-testid=\"nav-metricas\">\n                        <Icon name=\"pieChart\" size={20} />\n                        <span>Métricas</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                  <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={location === '/calendar'}>\n                      <Link href=\"/calendar\" data-testid=\"nav-calendario\">\n                        <Icon name=\"calendar\" size={20} />\n                        <span>Calendário</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                  <SidebarMenuItem>\n                    <SidebarMenuButton asChild isActive={location === '/bncc'}>\n                      <Link href=\"/bncc\" data-testid=\"nav-bncc\">\n                        <Icon name=\"bookOpen\" size={20} />\n                        <span>BNCC</span>\n                      </Link>\n                    </SidebarMenuButton>\n                  </SidebarMenuItem>\n                </>\n              )}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n\n      <SidebarFooter>\n        <div className=\"px-4 py-4 border-t border-border\">\n          <div className=\"flex items-center gap-3 mb-3\">\n            <Avatar className=\"w-10 h-10\">\n              <AvatarImage src={userAvatar || undefined} alt={userName} />\n              <AvatarFallback className=\"bg-primary text-primary-foreground\">\n                {userName.charAt(0).toUpperCase()}\n              </AvatarFallback>\n            </Avatar>\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"font-semibold text-sm text-foreground truncate\">{userName}</p>\n              <p className=\"text-xs text-muted-foreground\">{getRoleLabel()}</p>\n            </div>\n          </div>\n          <button\n            onClick={onLogout}\n            className=\"w-full bg-background border border-border text-foreground px-4 py-2 rounded-lg font-medium hover-elevate flex items-center justify-center gap-2 transition\"\n            data-testid=\"button-logout\"\n          >\n            <Icon name=\"logOut\" size={16} />\n            <span>Sair</span>\n          </button>\n        </div>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n","size_bytes":9210},"client/src/pages/student/projects.tsx":{"content":"import { ProjectCard } from \"@/components/ProjectCard\";\nimport type { ProjectWithTeacher } from \"@shared/schema\";\n\ninterface StudentProjectsProps {\n  projects: ProjectWithTeacher[];\n}\n\nexport default function StudentProjects({ projects }: StudentProjectsProps) {\n  return (\n    <div className=\"animate-fade-in space-y-8\">\n      <div>\n        <h2 className=\"text-3xl font-bold text-foreground mb-2\" data-testid=\"heading-projects\">Todos os Projetos</h2>\n        <p className=\"text-muted-foreground\">Visualize todos os seus projetos e prazos.</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\">\n        {projects.map((project) => (\n          <ProjectCard key={project.id} project={project} showSubmitButton />\n        ))}\n      </div>\n    </div>\n  );\n}\n","size_bytes":793},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n  --opaque-button-border-intensity: -8;\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n  --background: 240 5% 98%;\n  --foreground: 240 8% 12%;\n  --border: 240 6% 90%;\n  --card: 240 5% 96%;\n  --card-foreground: 240 8% 12%;\n  --card-border: 240 6% 92%;\n  --sidebar: 240 6% 94%;\n  --sidebar-foreground: 240 8% 15%;\n  --sidebar-border: 240 6% 88%;\n  --sidebar-primary: 245 58% 51%;\n  --sidebar-primary-foreground: 240 5% 98%;\n  --sidebar-accent: 240 8% 88%;\n  --sidebar-accent-foreground: 240 8% 18%;\n  --sidebar-ring: 245 58% 51%;\n  --popover: 240 6% 92%;\n  --popover-foreground: 240 8% 15%;\n  --popover-border: 240 6% 86%;\n  --primary: 245 58% 51%;\n  --primary-foreground: 240 5% 98%;\n  --secondary: 240 8% 88%;\n  --secondary-foreground: 240 8% 18%;\n  --muted: 240 8% 90%;\n  --muted-foreground: 240 6% 35%;\n  --accent: 245 25% 92%;\n  --accent-foreground: 245 30% 20%;\n  --destructive: 0 72% 51%;\n  --destructive-foreground: 0 10% 98%;\n  --input: 240 8% 75%;\n  --ring: 245 58% 51%;\n  --chart-1: 245 58% 45%;\n  --chart-2: 280 65% 48%;\n  --chart-3: 160 60% 38%;\n  --chart-4: 30 80% 48%;\n  --chart-5: 340 75% 48%;\n  --font-sans: 'Plus Jakarta Sans', sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --font-display: 'Outfit', sans-serif;\n  --radius: .5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(240 6% 10% / 0.02);\n  --shadow-xs: 0px 2px 0px 0px hsl(240 6% 10% / 0.03);\n  --shadow-sm: 0px 2px 0px 0px hsl(240 6% 10% / 0.04), 0px 1px 2px -1px hsl(240 6% 10% / 0.06);\n  --shadow: 0px 2px 0px 0px hsl(240 6% 10% / 0.05), 0px 1px 2px -1px hsl(240 6% 10% / 0.08);\n  --shadow-md: 0px 2px 0px 0px hsl(240 6% 10% / 0.06), 0px 2px 4px -1px hsl(240 6% 10% / 0.10);\n  --shadow-lg: 0px 2px 0px 0px hsl(240 6% 10% / 0.08), 0px 4px 6px -1px hsl(240 6% 10% / 0.12);\n  --shadow-xl: 0px 2px 0px 0px hsl(240 6% 10% / 0.10), 0px 8px 10px -1px hsl(240 6% 10% / 0.15);\n  --shadow-2xl: 0px 2px 0px 0px hsl(240 6% 10% / 0.12);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 240 8% 8%;\n  --foreground: 240 5% 95%;\n  --border: 240 6% 18%;\n  --card: 240 7% 10%;\n  --card-foreground: 240 5% 95%;\n  --card-border: 240 6% 14%;\n  --sidebar: 240 8% 12%;\n  --sidebar-foreground: 240 5% 88%;\n  --sidebar-border: 240 6% 16%;\n  --sidebar-primary: 245 58% 58%;\n  --sidebar-primary-foreground: 240 8% 8%;\n  --sidebar-accent: 240 8% 16%;\n  --sidebar-accent-foreground: 240 5% 90%;\n  --sidebar-ring: 245 58% 58%;\n  --popover: 240 7% 14%;\n  --popover-foreground: 240 5% 88%;\n  --popover-border: 240 6% 20%;\n  --primary: 245 58% 58%;\n  --primary-foreground: 240 5% 98%;\n  --secondary: 240 8% 18%;\n  --secondary-foreground: 240 5% 88%;\n  --muted: 240 8% 16%;\n  --muted-foreground: 240 5% 65%;\n  --accent: 245 20% 18%;\n  --accent-foreground: 245 15% 85%;\n  --destructive: 0 62% 50%;\n  --destructive-foreground: 0 10% 98%;\n  --input: 240 8% 28%;\n  --ring: 245 58% 58%;\n  --chart-1: 245 58% 65%;\n  --chart-2: 280 65% 70%;\n  --chart-3: 160 60% 65%;\n  --chart-4: 30 80% 68%;\n  --chart-5: 340 75% 68%;\n  --shadow-2xs: 0px 2px 0px 0px hsl(240 6% 0% / 0.15);\n  --shadow-xs: 0px 2px 0px 0px hsl(240 6% 0% / 0.20);\n  --shadow-sm: 0px 2px 0px 0px hsl(240 6% 0% / 0.25), 0px 1px 2px -1px hsl(240 6% 0% / 0.30);\n  --shadow: 0px 2px 0px 0px hsl(240 6% 0% / 0.30), 0px 1px 2px -1px hsl(240 6% 0% / 0.35);\n  --shadow-md: 0px 2px 0px 0px hsl(240 6% 0% / 0.35), 0px 2px 4px -1px hsl(240 6% 0% / 0.40);\n  --shadow-lg: 0px 2px 0px 0px hsl(240 6% 0% / 0.40), 0px 4px 6px -1px hsl(240 6% 0% / 0.45);\n  --shadow-xl: 0px 2px 0px 0px hsl(240 6% 0% / 0.45), 0px 8px 10px -1px hsl(240 6% 0% / 0.50);\n  --shadow-2xl: 0px 2px 0px 0px hsl(240 6% 0% / 0.50);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n\n  h1, h2, h3, h4, h5, h6 {\n    @apply font-display;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n\n  /* Glassmorphism effect for BProjetos */\n  .glass-card {\n    background: rgba(255, 255, 255, 0.7);\n    backdrop-filter: blur(20px);\n    -webkit-backdrop-filter: blur(20px);\n    border: 1px solid rgba(255, 255, 255, 0.5);\n  }\n\n  /* Hero gradient background */\n  .hero-gradient {\n    background: radial-gradient(circle at top left, #e0e7ff 0%, #f3e8ff 40%, #ffffff 100%);\n  }\n\n  /* Hide scrollbar but keep functionality */\n  .hide-scroll::-webkit-scrollbar {\n    display: none;\n  }\n  .hide-scroll {\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n  }\n\n  /* Custom range input styles */\n  input[type=\"range\"] {\n    -webkit-appearance: none;\n    background: transparent;\n  }\n\n  input[type=\"range\"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    height: 20px;\n    width: 20px;\n    border-radius: 50%;\n    background: hsl(var(--primary));\n    cursor: pointer;\n    margin-top: -8px;\n    box-shadow: 0 4px 6px -1px hsl(var(--primary) / 0.4);\n  }\n\n  input[type=\"range\"]::-webkit-slider-runnable-track {\n    width: 100%;\n    height: 6px;\n    cursor: pointer;\n    background: hsl(var(--muted));\n    border-radius: 99px;\n  }\n\n  input[type=\"range\"]::-moz-range-thumb {\n    height: 20px;\n    width: 20px;\n    border-radius: 50%;\n    background: hsl(var(--primary));\n    cursor: pointer;\n    border: none;\n    box-shadow: 0 4px 6px -1px hsl(var(--primary) / 0.4);\n  }\n\n  input[type=\"range\"]::-moz-range-track {\n    width: 100%;\n    height: 6px;\n    cursor: pointer;\n    background: hsl(var(--muted));\n    border-radius: 99px;\n  }\n}\n","size_bytes":12339},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"server/index-prod.ts":{"content":"import fs from \"node:fs\";\nimport path from \"node:path\";\nimport { type Server } from \"node:http\";\n\nimport express, { type Express } from \"express\";\nimport runApp from \"./app\";\n\nexport async function serveStatic(app: Express, _server: Server) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n\n(async () => {\n  await runApp(serveStatic);\n})();\n","size_bytes":712},"client/src/pages/login.tsx":{"content":"import { useState } from \"react\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { Link, useLocation } from \"wouter\";\nimport { Icon } from \"@/components/Icon\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function Login() {\n  const [, setLocation] = useLocation();\n  const { login } = useAuth();\n  const { toast } = useToast();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await login(email, password);\n      toast({\n        title: \"Login realizado!\",\n        description: \"Bem-vindo de volta ao BProjetos\",\n      });\n      setLocation(\"/\");\n    } catch (error: any) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro no login\",\n        description: error.message || \"Credenciais inválidas\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/20 via-background to-secondary/20 p-4\">\n      <div className=\"w-full max-w-md\">\n        <div className=\"bg-card border border-card-border rounded-2xl shadow-2xl p-8 backdrop-blur-sm\">\n          <div className=\"text-center mb-8\">\n            <h1 className=\"text-4xl font-bold text-primary mb-2\" data-testid=\"heading-login\">BProjetos</h1>\n            <p className=\"text-muted-foreground\">Gerencie projetos escolares com eficiência</p>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-semibold text-foreground mb-2\" htmlFor=\"email\">\n                Email\n              </label>\n              <input\n                id=\"email\"\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\n                placeholder=\"seu@email.com\"\n                required\n                data-testid=\"input-email\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-foreground mb-2\" htmlFor=\"password\">\n                Senha\n              </label>\n              <input\n                id=\"password\"\n                type=\"password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\n                placeholder=\"••••••••\"\n                required\n                data-testid=\"input-password\"\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"w-full bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:bg-primary/90 shadow-lg flex items-center justify-center gap-2 transition disabled:opacity-50\"\n              data-testid=\"button-login\"\n            >\n              {isLoading ? (\n                <>\n                  <div className=\"w-5 h-5 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin\"></div>\n                  Entrando...\n                </>\n              ) : (\n                <>\n                  <Icon name=\"log-in\" size={20} />\n                  Entrar\n                </>\n              )}\n            </button>\n          </form>\n\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-sm text-muted-foreground\">\n              Não tem uma conta?{\" \"}\n              <Link href=\"/register\" className=\"text-primary font-semibold hover:underline\" data-testid=\"link-register\">\n                Cadastre-se\n              </Link>\n            </p>\n          </div>\n\n          <div className=\"mt-8 pt-6 border-t border-border\">\n            <p className=\"text-xs text-muted-foreground text-center mb-3\">Credenciais de demonstração:</p>\n            <div className=\"space-y-2 text-xs\">\n              <p className=\"text-muted-foreground\"><strong className=\"text-foreground\">Coordenador:</strong> coordenador@escola.com / demo123</p>\n              <p className=\"text-muted-foreground\"><strong className=\"text-foreground\">Professor:</strong> ana@escola.com / demo123</p>\n              <p className=\"text-muted-foreground\"><strong className=\"text-foreground\">Aluno:</strong> lucas.alves@aluno.com / demo123</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":4775},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/pages/teacher/rubrics.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Icon } from \"@/components/Icon\";\nimport { ImportRubricModal } from \"@/components/ImportRubricModal\";\nimport type { RubricCriteria, ProjectWithTeacher } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function TeacherRubrics() {\n  const { toast } = useToast();\n  \n  // Fetch projects to allow selection\n  const { data: projects = [] } = useQuery<ProjectWithTeacher[]>({\n    queryKey: ['/api/projects'],\n  });\n\n  const [selectedProjectId, setSelectedProjectId] = useState<string | null>(null);\n  const [editingCriteria, setEditingCriteria] = useState<Record<string, Partial<RubricCriteria>>>({});\n\n  // Set selectedProjectId once projects are loaded\n  useEffect(() => {\n    if (projects.length > 0 && !selectedProjectId) {\n      setSelectedProjectId(projects[0].id);\n    }\n  }, [projects, selectedProjectId]);\n\n  // Fetch rubrics for selected project\n  const { data: projectRubrics = [], isLoading } = useQuery<RubricCriteria[]>({\n    queryKey: [`/api/rubrics/${selectedProjectId}`],\n    enabled: !!selectedProjectId,\n  });\n\n  const selectedProject = projects.find(p => p.id === selectedProjectId);\n\n  // Update weight mutation\n  const updateWeightMutation = useMutation({\n    mutationFn: async ({ criteriaId, weight }: { criteriaId: string; weight: number }) => {\n      return apiRequest(`/api/rubrics/${criteriaId}`, {\n        method: 'PATCH',\n        body: JSON.stringify({ weight }),\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/rubrics/${selectedProjectId}`] });\n      toast({\n        title: \"Peso atualizado\",\n        description: \"O peso do critério foi atualizado com sucesso.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro ao atualizar\",\n        description: \"Não foi possível atualizar o peso do critério.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleWeightChange = (criteriaId: string, newWeight: number) => {\n    setEditingCriteria(prev => ({\n      ...prev,\n      [criteriaId]: { ...prev[criteriaId], weight: newWeight }\n    }));\n  };\n\n  const handleWeightBlur = (criteriaId: string) => {\n    const editedCriteria = editingCriteria[criteriaId];\n    if (!editedCriteria || editedCriteria.weight === undefined) return;\n\n    const newWeight = editedCriteria.weight;\n\n    // Calculate total with new weight\n    const newTotal = projectRubrics.reduce((sum, c) => {\n      if (c.id === criteriaId) return sum + newWeight;\n      const editedWeight = editingCriteria[c.id]?.weight;\n      return sum + (editedWeight !== undefined ? editedWeight : c.weight);\n    }, 0);\n\n    // Validate total doesn't exceed 100%\n    if (newTotal > 100) {\n      toast({\n        title: \"Peso inválido\",\n        description: `O total dos pesos seria ${newTotal}%. Não pode ultrapassar 100%.`,\n        variant: \"destructive\",\n      });\n      // Reset to original value\n      setEditingCriteria(prev => {\n        const newState = { ...prev };\n        delete newState[criteriaId];\n        return newState;\n      });\n      return;\n    }\n\n    updateWeightMutation.mutate({ criteriaId, weight: newWeight });\n  };\n\n  const handleWeightKeyDown = (e: React.KeyboardEvent, criteriaId: string) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      (e.target as HTMLInputElement).blur();\n      handleWeightBlur(criteriaId);\n    }\n  };\n\n  const getTotalWeight = () => {\n    return projectRubrics.reduce((sum, c) => {\n      const editedWeight = editingCriteria[c.id]?.weight;\n      return sum + (editedWeight !== undefined ? editedWeight : c.weight);\n    }, 0);\n  };\n\n  return (\n    <div className=\"animate-fade-in space-y-8\">\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h2 className=\"text-3xl font-bold text-foreground\" data-testid=\"heading-rubrics\">Rubricas de Avaliação</h2>\n          <p className=\"text-muted-foreground\">Critérios para os projetos ativos.</p>\n        </div>\n        <ImportRubricModal />\n      </div>\n\n      {/* Project Selection */}\n      {projects.length > 0 && (\n        <div className=\"bg-card border border-card-border rounded-xl p-4\">\n          <label className=\"block text-sm font-semibold text-muted-foreground mb-2\">Selecione um Projeto</label>\n          <select \n            value={selectedProjectId || ''}\n            onChange={(e) => setSelectedProjectId(e.target.value)}\n            className=\"w-full bg-background border border-border rounded-lg px-4 py-2.5 text-foreground font-medium\"\n            data-testid=\"select-project\"\n          >\n            {projects.map(project => (\n              <option key={project.id} value={project.id}>\n                {project.title} - {project.subject}\n              </option>\n            ))}\n          </select>\n        </div>\n      )}\n\n      {isLoading ? (\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\"></div>\n        </div>\n      ) : (\n        <div className=\"bg-card border border-card-border rounded-2xl shadow-sm overflow-hidden\">\n          <div className=\"p-6 border-b border-border bg-muted/50 flex justify-between items-center\">\n            <h3 className=\"font-bold text-lg text-foreground\">\n              {selectedProject ? `Projeto: ${selectedProject.title}` : 'Nenhum projeto selecionado'}\n            </h3>\n            <button className=\"text-sm text-primary font-semibold hover-elevate px-3 py-1.5 rounded-lg flex items-center gap-1\" data-testid=\"button-add-criteria\">\n              <Icon name=\"plus\" size={16} /> Adicionar Critério\n            </button>\n          </div>\n\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-muted/30\">\n                <tr className=\"text-left\">\n                  <th className=\"px-6 py-4 text-sm font-bold text-muted-foreground uppercase tracking-wider\">Critério</th>\n                  <th className=\"px-6 py-4 text-sm font-bold text-muted-foreground uppercase tracking-wider\">Peso (%)</th>\n                  <th className=\"px-6 py-4 text-sm font-bold text-muted-foreground uppercase tracking-wider\">Níveis de Desempenho</th>\n                  <th className=\"px-6 py-4 text-sm font-bold text-muted-foreground uppercase tracking-wider w-20\">Ações</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-border\">\n                {projectRubrics.length > 0 ? (\n                  projectRubrics.map((criteria, idx) => (\n                    <tr key={criteria.id} className=\"hover-elevate\" data-testid={`row-criteria-${criteria.id}`}>\n                      <td className=\"px-6 py-6\">\n                        <input \n                          type=\"text\" \n                          value={criteria.criteria} \n                          className=\"font-semibold text-foreground bg-transparent border-none outline-none w-full\"\n                          data-testid={`input-criteria-name-${criteria.id}`}\n                          readOnly\n                        />\n                      </td>\n                      <td className=\"px-6 py-6\">\n                        <div className=\"flex items-center gap-4\">\n                          <input \n                            type=\"range\" \n                            min=\"0\" \n                            max=\"100\" \n                            value={editingCriteria[criteria.id]?.weight ?? criteria.weight}\n                            onChange={(e) => handleWeightChange(criteria.id, parseInt(e.target.value))}\n                            onMouseUp={() => handleWeightBlur(criteria.id)}\n                            onTouchEnd={() => handleWeightBlur(criteria.id)}\n                            className=\"flex-1 cursor-pointer\"\n                            data-testid={`slider-weight-${criteria.id}`}\n                          />\n                          <input\n                            type=\"number\"\n                            min=\"0\"\n                            max=\"100\"\n                            value={editingCriteria[criteria.id]?.weight ?? criteria.weight}\n                            onChange={(e) => handleWeightChange(criteria.id, parseInt(e.target.value) || 0)}\n                            onBlur={() => handleWeightBlur(criteria.id)}\n                            onKeyDown={(e) => handleWeightKeyDown(e, criteria.id)}\n                            className=\"font-bold text-primary w-16 text-right bg-transparent border border-border rounded px-2 py-1\"\n                            data-testid={`input-weight-${criteria.id}`}\n                          />\n                          <span className=\"text-muted-foreground\">%</span>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-6\">\n                        <div className=\"flex gap-2 overflow-x-auto hide-scroll\">\n                          {[criteria.level1, criteria.level2, criteria.level3, criteria.level4].map((level, levelIdx) => (\n                            <span \n                              key={levelIdx} \n                              className=\"inline-block px-3 py-1 bg-muted text-muted-foreground text-xs rounded-full whitespace-nowrap border border-border\"\n                              data-testid={`badge-level-${criteria.id}-${levelIdx}`}\n                            >\n                              {levelIdx + 1}. {level}\n                            </span>\n                          ))}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-6\">\n                        <button className=\"text-muted-foreground hover:text-destructive transition\" data-testid={`button-delete-${criteria.id}`}>\n                          <Icon name=\"trash\" size={18} />\n                        </button>\n                      </td>\n                    </tr>\n                  ))\n                ) : (\n                  <tr>\n                    <td colSpan={4} className=\"px-6 py-12 text-center text-muted-foreground\">\n                      Nenhum critério de avaliação definido para este projeto.\n                    </td>\n                  </tr>\n                )}\n              </tbody>\n            </table>\n          </div>\n\n          <div className=\"px-6 py-4 bg-muted/30 border-t border-border flex justify-between items-center\">\n            <p className=\"text-sm text-muted-foreground\">\n              Total de Pesos: <strong className={getTotalWeight() === 100 ? \"text-green-600\" : getTotalWeight() > 100 ? \"text-destructive\" : \"text-foreground\"}>{getTotalWeight()}%</strong>\n              {getTotalWeight() !== 100 && (\n                <span className=\"ml-2 text-xs text-muted-foreground\">\n                  (deve somar 100%)\n                </span>\n              )}\n            </p>\n            {getTotalWeight() === 100 && (\n              <div className=\"flex items-center gap-2 text-sm text-green-600\">\n                <Icon name=\"check\" size={16} />\n                <span className=\"font-semibold\">Pesos balanceados</span>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":11343},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/pages/register.tsx":{"content":"import { useState } from \"react\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { Link, useLocation } from \"wouter\";\nimport { Icon } from \"@/components/Icon\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function Register() {\n  const [, setLocation] = useLocation();\n  const { register } = useAuth();\n  const { toast } = useToast();\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    role: \"student\" as \"teacher\" | \"student\" | \"coordinator\",\n    subject: \"\",\n  });\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await register(formData);\n      toast({\n        title: \"Cadastro realizado!\",\n        description: \"Sua conta foi criada com sucesso\",\n      });\n      setLocation(\"/\");\n    } catch (error: any) {\n      toast({\n        variant: \"destructive\",\n        title: \"Erro no cadastro\",\n        description: error.message || \"Não foi possível criar sua conta\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/20 via-background to-secondary/20 p-4\">\n      <div className=\"w-full max-w-md\">\n        <div className=\"bg-card border border-card-border rounded-2xl shadow-2xl p-8 backdrop-blur-sm\">\n          <div className=\"text-center mb-8\">\n            <h1 className=\"text-4xl font-bold text-primary mb-2\" data-testid=\"heading-register\">Criar Conta</h1>\n            <p className=\"text-muted-foreground\">Junte-se ao BProjetos</p>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\n            <div>\n              <label className=\"block text-sm font-semibold text-foreground mb-2\" htmlFor=\"name\">\n                Nome Completo\n              </label>\n              <input\n                id=\"name\"\n                type=\"text\"\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                className=\"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\n                placeholder=\"Seu nome\"\n                required\n                data-testid=\"input-name\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-foreground mb-2\" htmlFor=\"email\">\n                Email\n              </label>\n              <input\n                id=\"email\"\n                type=\"email\"\n                value={formData.email}\n                onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                className=\"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\n                placeholder=\"seu@email.com\"\n                required\n                data-testid=\"input-email\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-foreground mb-2\" htmlFor=\"password\">\n                Senha\n              </label>\n              <input\n                id=\"password\"\n                type=\"password\"\n                value={formData.password}\n                onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n                className=\"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\n                placeholder=\"Mínimo 6 caracteres\"\n                minLength={6}\n                required\n                data-testid=\"input-password\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-foreground mb-2\" htmlFor=\"role\">\n                Tipo de Usuário\n              </label>\n              <select\n                id=\"role\"\n                value={formData.role}\n                onChange={(e) => setFormData({ ...formData, role: e.target.value as any })}\n                className=\"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\n                data-testid=\"select-role\"\n              >\n                <option value=\"student\">Aluno</option>\n                <option value=\"teacher\">Professor</option>\n                <option value=\"coordinator\">Coordenador</option>\n              </select>\n            </div>\n\n            {formData.role === \"teacher\" && (\n              <div>\n                <label className=\"block text-sm font-semibold text-foreground mb-2\" htmlFor=\"subject\">\n                  Disciplina\n                </label>\n                <input\n                  id=\"subject\"\n                  type=\"text\"\n                  value={formData.subject}\n                  onChange={(e) => setFormData({ ...formData, subject: e.target.value })}\n                  className=\"w-full bg-background border border-border rounded-lg px-4 py-3 text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\n                  placeholder=\"Ex: Matemática, História, etc.\"\n                  data-testid=\"input-subject\"\n                />\n              </div>\n            )}\n\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"w-full bg-primary text-primary-foreground px-6 py-3 rounded-lg font-semibold hover:bg-primary/90 shadow-lg flex items-center justify-center gap-2 transition disabled:opacity-50\"\n              data-testid=\"button-register\"\n            >\n              {isLoading ? (\n                <>\n                  <div className=\"w-5 h-5 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin\"></div>\n                  Criando conta...\n                </>\n              ) : (\n                <>\n                  <Icon name=\"user-plus\" size={20} />\n                  Criar Conta\n                </>\n              )}\n            </button>\n          </form>\n\n          <div className=\"mt-6 text-center\">\n            <p className=\"text-sm text-muted-foreground\">\n              Já tem uma conta?{\" \"}\n              <Link href=\"/login\" className=\"text-primary font-semibold hover:underline\" data-testid=\"link-login\">\n                Faça login\n              </Link>\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":6520},"client/src/pages/student/home.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { Icon } from \"@/components/Icon\";\nimport { ProjectCard } from \"@/components/ProjectCard\";\nimport { SubmitEvidenceModal } from \"@/components/SubmitEvidenceModal\";\nimport type { ProjectWithTeacher } from \"@shared/schema\";\n\nexport default function StudentHome() {\n  const { user } = useAuth();\n  const [selectedProject, setSelectedProject] = useState<ProjectWithTeacher | null>(null);\n\n  const { data: projects = [], isLoading: projectsLoading } = useQuery<ProjectWithTeacher[]>({\n    queryKey: ['/api/projects'],\n  });\n\n  // Get student data from user's roleData\n  const studentXp = user?.roleData?.xp || 0;\n  const studentLevel = user?.roleData?.level || 1;\n\n  const xpForNextLevel = studentLevel * 1000;\n  const xpProgress = (studentXp % 1000) / 10;\n\n  if (projectsLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Carregando...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const handleSubmit = (data: { type: 'file' | 'link'; link?: string; comment: string }) => {\n    console.log('Submission data:', data);\n    setSelectedProject(null);\n  };\n\n  return (\n    <div className=\"animate-fade-in space-y-8\">\n      {/* Header with XP */}\n      <div className=\"bg-card border border-card-border p-8 rounded-2xl shadow-sm\">\n        <div className=\"flex flex-col md:flex-row gap-6 items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"w-20 h-20 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white shadow-lg\">\n              <Icon name=\"rocket\" size={32} />\n            </div>\n            <div>\n              <h2 className=\"text-2xl font-bold text-foreground\" data-testid=\"heading-student-home\">Bem-vindo de volta!</h2>\n              <p className=\"text-muted-foreground\">Continue suas missões e acumule XP.</p>\n            </div>\n          </div>\n          \n          <div className=\"flex flex-col items-end gap-2\">\n            <div className=\"flex items-baseline gap-2\">\n              <span className=\"text-4xl font-extrabold text-primary\" data-testid=\"text-student-level\">Nível {studentLevel}</span>\n            </div>\n            <div className=\"w-64\">\n              <div className=\"flex justify-between text-xs text-muted-foreground mb-1\">\n                <span data-testid=\"text-current-xp\">{studentXp} XP</span>\n                <span data-testid=\"text-next-level-xp\">{xpForNextLevel} XP</span>\n              </div>\n              <div className=\"h-3 bg-muted rounded-full overflow-hidden\">\n                <div \n                  className=\"h-full bg-gradient-to-r from-purple-500 to-pink-500 transition-all duration-1000\" \n                  style={{ width: `${xpProgress}%` }}\n                  data-testid=\"progress-xp\"\n                ></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Projects Grid */}\n      <div>\n        <h3 className=\"text-2xl font-bold text-foreground mb-6\">Meus Projetos Ativos</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\">\n          {projects.map((project) => (\n            <ProjectCard \n              key={project.id} \n              project={project} \n              showSubmitButton \n              onSubmit={() => setSelectedProject(project)}\n            />\n          ))}\n        </div>\n      </div>\n\n      {/* Submit Modal */}\n      {selectedProject && (\n        <SubmitEvidenceModal \n          project={selectedProject}\n          onClose={() => setSelectedProject(null)}\n          onSubmit={handleSubmit}\n        />\n      )}\n    </div>\n  );\n}\n","size_bytes":3965},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ProjectCard.tsx":{"content":"import { Link } from \"wouter\";\nimport { Icon } from \"./Icon\";\nimport { Button } from \"./ui/button\";\nimport type { ProjectWithTeacher } from \"@shared/schema\";\n\ninterface ProjectCardProps {\n  project: ProjectWithTeacher;\n  onSubmit?: () => void;\n  showSubmitButton?: boolean;\n  showDetailsButton?: boolean;\n}\n\nexport function ProjectCard({ project, onSubmit, showSubmitButton = false, showDetailsButton = true }: ProjectCardProps) {\n  const getThemeColors = (theme: string) => {\n    const themes = {\n      green: 'from-green-500 to-emerald-500',\n      blue: 'from-blue-500 to-cyan-500',\n      purple: 'from-purple-500 to-pink-500',\n      red: 'from-red-500 to-orange-500',\n    };\n    return themes[theme as keyof typeof themes] || themes.blue;\n  };\n\n  const getStatusColor = (status: string) => {\n    const colors = {\n      'Planejamento': 'bg-blue-100 text-blue-700',\n      'Em Andamento': 'bg-green-100 text-green-700',\n      'Para Avaliação': 'bg-purple-100 text-purple-700',\n      'Atrasado': 'bg-red-100 text-red-700',\n    };\n    return colors[status as keyof typeof colors] || colors['Planejamento'];\n  };\n\n  return (\n    <div className=\"bg-card border border-card-border p-8 rounded-2xl shadow-sm hover:shadow-md transition-all hover-elevate\" data-testid={`card-project-${project.id}`}>\n      <div className=\"flex justify-between items-start mb-4\">\n        <div className=\"flex-1\">\n          <h3 className=\"text-xl font-bold text-card-foreground mb-2\" data-testid={`text-project-title-${project.id}`}>{project.title}</h3>\n          <p className=\"text-sm text-muted-foreground\" data-testid={`text-project-subject-${project.id}`}>{project.subject}</p>\n        </div>\n        <span className={`px-4 py-1 rounded-full text-xs font-bold ${getStatusColor(project.status)}`} data-testid={`badge-project-status-${project.id}`}>\n          {project.status}\n        </span>\n      </div>\n\n      <div className={`h-2 bg-muted rounded-full overflow-hidden mb-4`}>\n        <div \n          className={`h-full bg-gradient-to-r ${getThemeColors(project.theme)} rounded-full transition-all duration-1000`}\n          style={{ width: `${project.progress}%` }}\n          data-testid={`progress-bar-${project.id}`}\n        ></div>\n      </div>\n\n      <div className=\"grid grid-cols-2 gap-4 mb-4 text-sm\">\n        <div className=\"flex items-center gap-2\">\n          <Icon name=\"users\" size={16} className=\"text-muted-foreground\" />\n          <span className=\"text-muted-foreground\" data-testid={`text-student-count-${project.id}`}>{project.students} Alunos</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Icon name=\"calendar\" size={16} className=\"text-muted-foreground\" />\n          <span className=\"text-muted-foreground\" data-testid={`text-deadline-${project.id}`}>{new Date(project.nextDeadline || '').toLocaleDateString('pt-BR')}</span>\n        </div>\n      </div>\n\n      {project.deadlineLabel && (\n        <div className=\"bg-muted/50 p-4 rounded-lg mb-4\">\n          <p className=\"text-xs text-muted-foreground mb-1\">Próxima Entrega</p>\n          <p className=\"text-sm font-semibold text-foreground\" data-testid={`text-deadline-label-${project.id}`}>{project.deadlineLabel}</p>\n        </div>\n      )}\n\n      {showDetailsButton && !showSubmitButton && (\n        <Link href={`/project/${project.id}`}>\n          <a className=\"w-full\">\n            <Button\n              variant=\"outline\"\n              className=\"w-full flex items-center justify-center gap-2\"\n              data-testid={`button-details-${project.id}`}\n            >\n              <Icon name=\"eye\" size={18} />\n              Ver Detalhes\n            </Button>\n          </a>\n        </Link>\n      )}\n\n      {showSubmitButton && onSubmit && (\n        <button \n          onClick={onSubmit}\n          data-testid={`button-submit-${project.id}`}\n          className=\"w-full bg-primary text-primary-foreground px-4 py-3 rounded-lg font-semibold hover:bg-primary/90 transition flex items-center justify-center gap-2 shadow-md\"\n        >\n          <Icon name=\"upload\" size={18} />\n          Enviar Trabalho\n        </button>\n      )}\n\n      {!showSubmitButton && !showDetailsButton && project.teacherName && (\n        <div className=\"flex items-center gap-2 pt-4 border-t border-border\">\n          <div className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center\">\n            <Icon name=\"book\" size={16} className=\"text-primary\" />\n          </div>\n          <span className=\"text-sm text-muted-foreground\" data-testid={`text-teacher-${project.id}`}>Prof. {project.teacherName}</span>\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":4628},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport bcrypt from \"bcrypt\";\nimport jwt from \"jsonwebtoken\";\nimport multer from \"multer\";\nimport { PDFParse } from \"pdf-parse\";\nimport * as XLSX from \"xlsx\";\nimport { storage } from \"./storage\";\nimport { extractCompetenciesFromText, analyzeProjectAlignment, analyzeProjectPlanning } from \"./services/bnccAiService\";\n\nconst JWT_SECRET = process.env.SESSION_SECRET || 'fallback-secret-change-in-production';\nimport { \n  insertUserSchema,\n  insertProjectSchema,\n  insertProjectPlanningSchema,\n  insertTeacherSchema, \n  insertRubricCriteriaSchema,\n  insertStudentSchema,\n  insertAchievementSchema,\n  insertStudentAchievementSchema,\n  insertBnccCompetencySchema,\n  insertProjectCompetencySchema,\n  insertSubmissionSchema,\n  insertClassSchema,\n  insertFeedbackSchema,\n  insertEventSchema,\n} from \"@shared/schema\";\nimport { z } from \"zod\";\n\n// Configure multer for file uploads (memory storage for PDF processing)\nconst upload = multer({\n  storage: multer.memoryStorage(),\n  limits: {\n    fileSize: 20 * 1024 * 1024, // 20MB max file size\n  },\n  fileFilter: (req, file, cb) => {\n    if (file.mimetype === 'application/pdf') {\n      cb(null, true);\n    } else {\n      cb(new Error('Only PDF files are allowed'));\n    }\n  },\n});\n\n// Configure multer for spreadsheet uploads (Excel/CSV)\nconst uploadSpreadsheet = multer({\n  storage: multer.memoryStorage(),\n  limits: {\n    fileSize: 10 * 1024 * 1024, // 10MB max file size\n  },\n  fileFilter: (req, file, cb) => {\n    const allowedMimeTypes = [\n      'application/vnd.ms-excel', // .xls\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', // .xlsx\n      'text/csv', // .csv\n    ];\n    if (allowedMimeTypes.includes(file.mimetype) || file.originalname.endsWith('.csv')) {\n      cb(null, true);\n    } else {\n      cb(new Error('Apenas arquivos Excel (.xls, .xlsx) ou CSV são permitidos'));\n    }\n  },\n});\n\n// Extend Express Request to include user\ndeclare global {\n  namespace Express {\n    interface Request {\n      user?: {\n        id: string;\n        email: string;\n        role: string;\n        name: string;\n      };\n    }\n  }\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Authentication Routes\n  app.post(\"/api/auth/register\", async (req, res) => {\n    try {\n      const registerSchema = z.object({\n        email: z.string().email(),\n        password: z.string().min(6),\n        name: z.string().min(1),\n        role: z.enum([\"teacher\", \"student\", \"coordinator\"]),\n        subject: z.string().optional(), // for teachers\n      });\n\n      const data = registerSchema.parse(req.body);\n      \n      // Check if user already exists\n      const existingUser = await storage.getUserByEmail(data.email);\n      if (existingUser) {\n        return res.status(400).json({ error: \"Email já está em uso\" });\n      }\n\n      // Hash password\n      const hashedPassword = await bcrypt.hash(data.password, 10);\n\n      // Create user\n      const user = await storage.createUser({\n        email: data.email,\n        hashedPassword,\n        role: data.role,\n        name: data.name,\n        avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${data.name}`,\n      });\n\n      // Create role-specific record\n      if (data.role === \"teacher\") {\n        await storage.createTeacher({\n          userId: user.id,\n          name: data.name,\n          subject: data.subject || \"Não especificado\",\n          avatar: user.avatar,\n          rating: 0,\n        });\n      } else if (data.role === \"student\") {\n        await storage.createStudent({\n          userId: user.id,\n          name: data.name,\n          email: data.email,\n          avatar: user.avatar,\n          xp: 0,\n          level: 1,\n        });\n      } else if (data.role === \"coordinator\") {\n        await storage.createCoordinator({\n          userId: user.id,\n          name: data.name,\n          avatar: user.avatar,\n        });\n      }\n\n      res.status(201).json({\n        id: user.id,\n        email: user.email,\n        role: user.role,\n        name: user.name,\n      });\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      console.log(\"[LOGIN] Request received:\", {\n        headers: req.headers,\n        body: req.body,\n        rawBody: JSON.stringify(req.body)\n      });\n\n      const loginSchema = z.object({\n        email: z.string().email(),\n        password: z.string(),\n      });\n\n      const data = loginSchema.parse(req.body);\n      console.log(\"[LOGIN] Parsed data:\", data);\n\n      // Find user\n      const user = await storage.getUserByEmail(data.email);\n      console.log(\"[LOGIN] User found:\", user ? { id: user.id, email: user.email, hasHash: !!user.hashedPassword } : \"null\");\n      if (!user) {\n        return res.status(401).json({ error: \"Credenciais inválidas\" });\n      }\n\n      // Verify password\n      const validPassword = await bcrypt.compare(data.password, user.hashedPassword);\n      if (!validPassword) {\n        return res.status(401).json({ error: \"Credenciais inválidas\" });\n      }\n\n      // Get role-specific data\n      let roleData = null;\n      if (user.role === \"teacher\") {\n        roleData = await storage.getTeacherByUserId(user.id);\n      } else if (user.role === \"student\") {\n        roleData = await storage.getStudentByUserId(user.id);\n      } else if (user.role === \"coordinator\") {\n        roleData = await storage.getCoordinatorByUserId(user.id);\n      }\n\n      // Store user in session\n      req.session.userId = user.id;\n      console.log(\"[LOGIN] Session after save:\", {\n        sessionID: req.sessionID,\n        userId: req.session.userId,\n        cookie: req.session.cookie\n      });\n\n      // Generate JWT token\n      const token = jwt.sign(\n        { userId: user.id, email: user.email, role: user.role },\n        JWT_SECRET,\n        { expiresIn: '7d' }\n      );\n\n      // Force save session before sending response\n      req.session.save((err) => {\n        if (err) {\n          console.error(\"[LOGIN] Session save error:\", err);\n          return res.status(500).json({ error: \"Erro ao salvar sessão\" });\n        }\n        console.log(\"[LOGIN] Session saved successfully, sending response with token\");\n        res.json({\n          id: user.id,\n          email: user.email,\n          role: user.role,\n          name: user.name,\n          avatar: user.avatar,\n          roleData,\n          token, // Include token in response\n        });\n      });\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/auth/logout\", (req, res) => {\n    req.session.destroy((err) => {\n      if (err) {\n        return res.status(500).json({ error: \"Erro ao fazer logout\" });\n      }\n      res.clearCookie('connect.sid'); // Clear session cookie\n      res.status(204).send();\n    });\n  });\n\n  app.get(\"/api/auth/me\", async (req, res) => {\n    console.log(\"[/api/auth/me] Request received:\", {\n      sessionID: req.sessionID,\n      userId: req.session.userId,\n      cookie: req.session.cookie,\n      headers: req.headers.cookie\n    });\n    const userId = req.session.userId;\n    if (!userId) {\n      console.log(\"[/api/auth/me] No userId in session, returning 401\");\n      return res.status(401).json({ error: \"Não autenticado\" });\n    }\n\n    const user = await storage.getUser(userId);\n    if (!user) {\n      return res.status(404).json({ error: \"Usuário não encontrado\" });\n    }\n\n    // Get role-specific data\n    let roleData = null;\n    if (user.role === \"teacher\") {\n      roleData = await storage.getTeacherByUserId(user.id);\n    } else if (user.role === \"student\") {\n      roleData = await storage.getStudentByUserId(user.id);\n    } else if (user.role === \"coordinator\") {\n      roleData = await storage.getCoordinatorByUserId(user.id);\n    }\n\n    res.json({\n      id: user.id,\n      email: user.email,\n      role: user.role,\n      name: user.name,\n      avatar: user.avatar,\n      roleData,\n    });\n  });\n\n  // Get current teacher data\n  app.get(\"/api/me/teacher\", async (req, res) => {\n    const userId = req.session.userId;\n    if (!userId) {\n      return res.status(401).json({ error: \"Não autenticado\" });\n    }\n\n    const user = await storage.getUser(userId);\n    if (!user) {\n      return res.status(404).json({ error: \"Usuário não encontrado\" });\n    }\n\n    if (user.role !== \"teacher\") {\n      return res.status(403).json({ error: \"Acesso permitido apenas para professores\" });\n    }\n\n    const teacher = await storage.getTeacherByUserId(user.id);\n    if (!teacher) {\n      return res.status(404).json({ error: \"Dados do professor não encontrados\" });\n    }\n\n    res.json(teacher);\n  });\n\n  // Existing routes below...\n  // Teachers\n  app.get(\"/api/teachers\", async (req, res) => {\n    const teachers = await storage.getTeachers();\n    res.json(teachers);\n  });\n\n  app.get(\"/api/teachers/:id\", async (req, res) => {\n    const teacher = await storage.getTeacher(req.params.id);\n    if (!teacher) return res.status(404).json({ error: \"Teacher not found\" });\n    res.json(teacher);\n  });\n\n  app.post(\"/api/teachers\", async (req, res) => {\n    try {\n      const data = insertTeacherSchema.parse(req.body);\n      const teacher = await storage.createTeacher(data);\n      res.status(201).json(teacher);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/teachers/:id\", async (req, res) => {\n    try {\n      const data = insertTeacherSchema.partial().parse(req.body);\n      const teacher = await storage.updateTeacher(req.params.id, data);\n      if (!teacher) return res.status(404).json({ error: \"Teacher not found\" });\n      res.json(teacher);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  // Projects\n  app.get(\"/api/projects\", async (req, res) => {\n    const projects = await storage.getProjectsWithTeacher();\n    res.json(projects);\n  });\n\n  app.get(\"/api/projects/:id\", async (req, res) => {\n    const project = await storage.getProject(req.params.id);\n    if (!project) return res.status(404).json({ error: \"Project not found\" });\n    \n    const teacher = await storage.getTeacher(project.teacherId);\n    res.json({\n      ...project,\n      teacherName: teacher?.name || \"Unknown\",\n    });\n  });\n\n  app.post(\"/api/projects\", async (req, res) => {\n    try {\n      const data = insertProjectSchema.parse(req.body);\n      const project = await storage.createProject(data);\n      res.status(201).json(project);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/projects/:id\", async (req, res) => {\n    try {\n      const data = insertProjectSchema.partial().parse(req.body);\n      const project = await storage.updateProject(req.params.id, data);\n      if (!project) return res.status(404).json({ error: \"Project not found\" });\n      res.json(project);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/projects/:id\", async (req, res) => {\n    const deleted = await storage.deleteProject(req.params.id);\n    if (!deleted) return res.status(404).json({ error: \"Project not found\" });\n    res.status(204).send();\n  });\n\n  // Project Planning\n  app.get(\"/api/projects/:id/planning\", async (req, res) => {\n    try {\n      const planning = await storage.getProjectPlanning(req.params.id);\n      if (!planning) {\n        // Return empty planning object if not found\n        return res.json({\n          projectId: req.params.id,\n          objectives: null,\n          methodology: null,\n          resources: null,\n          timeline: null,\n          expectedOutcomes: null,\n        });\n      }\n      res.json(planning);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/projects/:id/planning\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Não autenticado\" });\n      }\n\n      if (req.user.role !== 'teacher') {\n        return res.status(403).json({ error: \"Apenas professores podem criar planejamento\" });\n      }\n\n      const data = insertProjectPlanningSchema.parse({\n        ...req.body,\n        projectId: req.params.id,\n      });\n\n      // Check if planning already exists\n      const existing = await storage.getProjectPlanning(req.params.id);\n      if (existing) {\n        return res.status(400).json({ error: \"Planejamento já existe para este projeto\" });\n      }\n\n      const planning = await storage.createProjectPlanning(data);\n      res.status(201).json(planning);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/projects/:id/planning\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Não autenticado\" });\n      }\n\n      if (req.user.role !== 'teacher') {\n        return res.status(403).json({ error: \"Apenas professores podem atualizar planejamento\" });\n      }\n\n      const data = insertProjectPlanningSchema.partial().parse(req.body);\n      const planning = await storage.updateProjectPlanning(req.params.id, data);\n      \n      if (!planning) {\n        return res.status(404).json({ error: \"Planejamento não encontrado\" });\n      }\n\n      res.json(planning);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  // AI Analysis for Project Planning\n  app.post(\"/api/projects/:id/planning/analyze\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Não autenticado\" });\n      }\n\n      if (req.user.role !== 'teacher') {\n        return res.status(403).json({ error: \"Apenas professores podem analisar projetos\" });\n      }\n\n      // Get project and planning\n      const project = await storage.getProject(req.params.id);\n      if (!project) {\n        return res.status(404).json({ error: \"Projeto não encontrado\" });\n      }\n\n      const planning = await storage.getProjectPlanning(req.params.id);\n      if (!planning) {\n        return res.status(404).json({ error: \"Planejamento não encontrado. Salve o planejamento antes de analisar.\" });\n      }\n\n      // Get available BNCC competencies\n      const competencies = await storage.getCompetencies();\n      if (competencies.length === 0) {\n        return res.status(400).json({ error: \"Nenhuma competência BNCC cadastrada. Faça o upload de um documento BNCC primeiro.\" });\n      }\n\n      // Run AI analysis\n      const suggestions = await analyzeProjectPlanning(\n        project.title,\n        project.subject,\n        {\n          objectives: planning.objectives || undefined,\n          methodology: planning.methodology || undefined,\n          resources: planning.resources || undefined,\n          timeline: planning.timeline || undefined,\n          expectedOutcomes: planning.expectedOutcomes || undefined,\n        },\n        competencies\n      );\n\n      res.json({ suggestions });\n    } catch (error: any) {\n      console.error(\"[AI Analysis Error]:\", error);\n      res.status(500).json({ error: error.message || \"Erro ao analisar projeto\" });\n    }\n  });\n\n  // Rubric Criteria\n  app.get(\"/api/rubrics/:projectId\", async (req, res) => {\n    const criteria = await storage.getRubricCriteria(req.params.projectId);\n    res.json(criteria);\n  });\n\n  app.post(\"/api/rubrics\", async (req, res) => {\n    try {\n      const data = insertRubricCriteriaSchema.parse(req.body);\n      const criteria = await storage.createRubricCriteria(data);\n      res.status(201).json(criteria);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/rubrics/:id\", async (req, res) => {\n    try {\n      const data = insertRubricCriteriaSchema.partial().parse(req.body);\n      const criteria = await storage.updateRubricCriteria(req.params.id, data);\n      if (!criteria) return res.status(404).json({ error: \"Rubric criteria not found\" });\n      res.json(criteria);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/rubrics/:id\", async (req, res) => {\n    const deleted = await storage.deleteRubricCriteria(req.params.id);\n    if (!deleted) return res.status(404).json({ error: \"Rubric criteria not found\" });\n    res.status(204).send();\n  });\n\n  // Students\n  app.get(\"/api/students\", async (req, res) => {\n    const students = await storage.getStudents();\n    res.json(students);\n  });\n\n  app.get(\"/api/students/:id\", async (req, res) => {\n    const student = await storage.getStudent(req.params.id);\n    if (!student) return res.status(404).json({ error: \"Student not found\" });\n    res.json(student);\n  });\n\n  app.post(\"/api/students\", async (req, res) => {\n    try {\n      const data = insertStudentSchema.parse(req.body);\n      const student = await storage.createStudent(data);\n      res.status(201).json(student);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/students/:id\", async (req, res) => {\n    try {\n      const data = insertStudentSchema.partial().parse(req.body);\n      const student = await storage.updateStudent(req.params.id, data);\n      if (!student) return res.status(404).json({ error: \"Student not found\" });\n      res.json(student);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  // Achievements\n  app.get(\"/api/achievements\", async (req, res) => {\n    const achievements = await storage.getAchievements();\n    res.json(achievements);\n  });\n\n  app.get(\"/api/achievements/:id\", async (req, res) => {\n    const achievement = await storage.getAchievement(req.params.id);\n    if (!achievement) return res.status(404).json({ error: \"Achievement not found\" });\n    res.json(achievement);\n  });\n\n  app.post(\"/api/achievements\", async (req, res) => {\n    try {\n      const data = insertAchievementSchema.parse(req.body);\n      const achievement = await storage.createAchievement(data);\n      res.status(201).json(achievement);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/achievements/:id\", async (req, res) => {\n    try {\n      const data = insertAchievementSchema.partial().parse(req.body);\n      const achievement = await storage.updateAchievement(req.params.id, data);\n      if (!achievement) return res.status(404).json({ error: \"Achievement not found\" });\n      res.json(achievement);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  // Student Achievements\n  app.get(\"/api/students/:studentId/achievements\", async (req, res) => {\n    const achievements = await storage.getStudentAchievements(req.params.studentId);\n    res.json(achievements);\n  });\n\n  app.post(\"/api/student-achievements\", async (req, res) => {\n    try {\n      const data = insertStudentAchievementSchema.parse(req.body);\n      const studentAchievement = await storage.createStudentAchievement(data);\n      res.status(201).json(studentAchievement);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/student-achievements/:id\", async (req, res) => {\n    try {\n      const data = insertStudentAchievementSchema.partial().parse(req.body);\n      const progress = data.progress ?? 0;\n      const unlocked = data.unlocked ?? false;\n      const achievement = await storage.updateStudentAchievement(req.params.id, progress, unlocked);\n      if (!achievement) return res.status(404).json({ error: \"Student achievement not found\" });\n      res.json(achievement);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  // BNCC Competencies\n  app.get(\"/api/competencies\", async (req, res) => {\n    const competencies = await storage.getCompetencies();\n    res.json(competencies);\n  });\n\n  app.get(\"/api/competencies/:id\", async (req, res) => {\n    const competency = await storage.getCompetency(req.params.id);\n    if (!competency) return res.status(404).json({ error: \"Competency not found\" });\n    res.json(competency);\n  });\n\n  app.post(\"/api/competencies\", async (req, res) => {\n    try {\n      const data = insertBnccCompetencySchema.parse(req.body);\n      const competency = await storage.createCompetency(data);\n      res.status(201).json(competency);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/competencies/:id\", async (req, res) => {\n    try {\n      const data = insertBnccCompetencySchema.partial().parse(req.body);\n      const competency = await storage.updateCompetency(req.params.id, data);\n      if (!competency) return res.status(404).json({ error: \"Competency not found\" });\n      res.json(competency);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  // Project Competencies\n  app.get(\"/api/projects/:projectId/competencies\", async (req, res) => {\n    const competencies = await storage.getProjectCompetenciesWithDetails(req.params.projectId);\n    res.json(competencies);\n  });\n\n  app.post(\"/api/projects/:projectId/competencies\", async (req, res) => {\n    try {\n      // Validate authentication\n      if (!req.user) {\n        return res.status(401).json({ error: \"Não autenticado\" });\n      }\n\n      // Validate teacher role\n      if (req.user.role !== 'teacher') {\n        return res.status(403).json({ error: \"Apenas professores podem vincular competências\" });\n      }\n\n      const { projectId } = req.params;\n      const { competencies } = req.body;\n\n      if (!Array.isArray(competencies)) {\n        return res.status(400).json({ error: \"competencies deve ser um array\" });\n      }\n\n      // Validate project exists and belongs to teacher\n      const project = await storage.getProject(projectId);\n      if (!project) {\n        return res.status(404).json({ error: \"Projeto não encontrado\" });\n      }\n\n      const teacher = await storage.getTeacherByUserId(req.user.id);\n      if (!teacher) {\n        return res.status(404).json({ error: \"Professor não encontrado\" });\n      }\n\n      if (project.teacherId !== teacher.id) {\n        return res.status(403).json({ error: \"Você não tem permissão para modificar este projeto\" });\n      }\n\n      // Replace existing competencies with new ones (transactional)\n      const competenciesToInsert = competencies.map((comp: any) => ({\n        projectId,\n        competencyId: comp.competencyId,\n        coverage: comp.coverage,\n      }));\n\n      const results = await storage.replaceProjectCompetencies(projectId, competenciesToInsert);\n\n      res.status(201).json(results);\n    } catch (error: any) {\n      console.error(\"[Project Competencies] Error:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  app.post(\"/api/project-competencies\", async (req, res) => {\n    try {\n      const data = insertProjectCompetencySchema.parse(req.body);\n      const projectCompetency = await storage.createProjectCompetency(data);\n      res.status(201).json(projectCompetency);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  // Submissions\n  app.get(\"/api/projects/:projectId/submissions\", async (req, res) => {\n    const submissions = await storage.getSubmissions(req.params.projectId);\n    res.json(submissions);\n  });\n\n  app.post(\"/api/submissions\", async (req, res) => {\n    try {\n      const data = insertSubmissionSchema.parse(req.body);\n      const submission = await storage.createSubmission(data);\n      res.status(201).json(submission);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  // Classes\n  app.get(\"/api/classes\", async (req, res) => {\n    const classes = await storage.getClasses();\n    res.json(classes);\n  });\n\n  app.get(\"/api/classes/:id\", async (req, res) => {\n    const classData = await storage.getClass(req.params.id);\n    if (!classData) return res.status(404).json({ error: \"Class not found\" });\n    res.json(classData);\n  });\n\n  app.post(\"/api/classes\", async (req, res) => {\n    try {\n      const data = insertClassSchema.parse(req.body);\n      const classData = await storage.createClass(data);\n      res.status(201).json(classData);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.get(\"/api/teachers/:id/classes\", async (req, res) => {\n    const classes = await storage.getClassesByTeacher(req.params.id);\n    res.json(classes);\n  });\n\n  // Spreadsheet import endpoint for students\n  app.post(\"/api/students/import-spreadsheet\", uploadSpreadsheet.single('file'), async (req, res) => {\n    try {\n      // Validate authentication - check both req.user (JWT) and session\n      let userId = req.user?.id || req.session.userId;\n      if (!userId) {\n        return res.status(401).json({ error: \"Não autenticado\" });\n      }\n\n      // Get user to check role\n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(401).json({ error: \"Usuário não encontrado\" });\n      }\n\n      // Only teachers and coordinators can import students\n      if (user.role !== 'teacher' && user.role !== 'coordinator') {\n        return res.status(403).json({ error: \"Apenas professores e coordenadores podem importar alunos\" });\n      }\n\n      // Validate file upload\n      if (!req.file) {\n        return res.status(400).json({ error: \"Nenhum arquivo foi enviado\" });\n      }\n\n      console.log(\"[Spreadsheet Import] Processing file:\", req.file.originalname);\n\n      // Parse spreadsheet\n      let workbook: XLSX.WorkBook;\n      try {\n        workbook = XLSX.read(req.file.buffer, { type: 'buffer' });\n      } catch (error: any) {\n        return res.status(400).json({ error: \"Erro ao ler planilha: \" + error.message });\n      }\n\n      // Get first sheet\n      const firstSheetName = workbook.SheetNames[0];\n      const worksheet = workbook.Sheets[firstSheetName];\n      \n      // Convert to JSON\n      const rawData: any[] = XLSX.utils.sheet_to_json(worksheet, { defval: '' });\n      \n      if (rawData.length === 0) {\n        return res.status(400).json({ error: \"A planilha está vazia\" });\n      }\n\n      console.log(\"[Spreadsheet Import] Found\", rawData.length, \"rows\");\n      console.log(\"[Spreadsheet Import] First row keys:\", Object.keys(rawData[0]));\n\n      // Auto-detect columns (case-insensitive, flexible matching with normalization)\n      const firstRow = rawData[0];\n      const originalKeys = Object.keys(firstRow);\n      \n      // Normalize column names: lowercase, remove accents, trim\n      const normalizeString = (str: string) => {\n        return str.toLowerCase()\n          .normalize('NFD').replace(/[\\u0300-\\u036f]/g, '') // Remove diacritics\n          .trim();\n      };\n      \n      const normalizedKeys = originalKeys.map(normalizeString);\n      \n      // Find column mappings with normalized comparisons\n      const nameIndex = normalizedKeys.findIndex(k => \n        k.includes('nome') || k.includes('name') || k.includes('aluno') || k.includes('student')\n      );\n      const emailIndex = normalizedKeys.findIndex(k => \n        k.includes('email') || k.includes('e-mail') || k === 'email'\n      );\n      const classIndex = normalizedKeys.findIndex(k => \n        k.includes('turma') || k.includes('class') || k.includes('sala')\n      );\n\n      if (nameIndex === -1 || emailIndex === -1) {\n        return res.status(400).json({ \n          error: \"Planilha deve conter colunas 'Nome' e 'Email' (colunas detectadas: \" + originalKeys.join(', ') + \")\" \n        });\n      }\n\n      // Get original column names using indices\n      const nameKey = originalKeys[nameIndex];\n      const emailKey = originalKeys[emailIndex];\n      const classKey = classIndex !== -1 ? originalKeys[classIndex] : null;\n\n      console.log(\"[Spreadsheet Import] Column mapping:\", { nameKey, emailKey, classKey });\n\n      // Process students\n      const results = {\n        total: 0,\n        created: 0,\n        updated: 0,\n        skipped: 0,\n        errors: [] as string[],\n      };\n\n      for (let i = 0; i < rawData.length; i++) {\n        const row = rawData[i];\n        const name = row[nameKey]?.toString().trim();\n        const email = row[emailKey]?.toString().trim().toLowerCase();\n        const className = classKey ? row[classKey]?.toString().trim() : null;\n\n        results.total++;\n\n        // Validate required fields\n        if (!name || !email) {\n          results.skipped++;\n          results.errors.push(`Linha ${i + 2}: Nome ou email vazio`);\n          continue;\n        }\n\n        // Validate email format\n        if (!email.includes('@')) {\n          results.skipped++;\n          results.errors.push(`Linha ${i + 2}: Email inválido (${email})`);\n          continue;\n        }\n\n        try {\n          // Check if user already exists\n          const existingUser = await storage.getUserByEmail(email);\n          \n          if (existingUser) {\n            // User exists - update student if needed\n            if (existingUser.role === 'student') {\n              results.updated++;\n              console.log(`[Import] Existing student: ${email}`);\n            } else {\n              results.skipped++;\n              results.errors.push(`Linha ${i + 2}: Email ${email} já está em uso por um ${existingUser.role}`);\n            }\n          } else {\n            // Create new user and student\n            const hashedPassword = await bcrypt.hash('123456', 10); // Default password\n            \n            const user = await storage.createUser({\n              email,\n              hashedPassword,\n              name,\n              role: 'student',\n              avatar: `https://api.dicebear.com/7.x/avataaars/svg?seed=${name}`,\n            });\n\n            await storage.createStudent({\n              userId: user.id,\n              name,\n              email,\n              avatar: user.avatar,\n              xp: 0,\n              level: 1,\n            });\n\n            results.created++;\n            console.log(`[Import] Created student: ${email}`);\n          }\n        } catch (error: any) {\n          results.skipped++;\n          results.errors.push(`Linha ${i + 2}: ${error.message}`);\n        }\n      }\n\n      console.log(\"[Spreadsheet Import] Complete:\", results);\n\n      res.json({\n        success: true,\n        message: `Importação concluída: ${results.created} criados, ${results.updated} atualizados, ${results.skipped} ignorados`,\n        results,\n      });\n    } catch (error: any) {\n      console.error(\"[Spreadsheet Import] Error:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // BNCC Competencies Routes (All authenticated users can view)\n  app.get(\"/api/bncc-competencies\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Não autenticado\" });\n    }\n\n    const competencies = await storage.getCompetencies();\n    res.json(competencies);\n  });\n\n  // BNCC Document Routes (Coordinator-only)\n  app.get(\"/api/bncc-documents\", async (req, res) => {\n    // Validate authentication\n    if (!req.user) {\n      return res.status(401).json({ error: \"Não autenticado\" });\n    }\n\n    // Validate coordinator role\n    if (req.user.role !== 'coordinator') {\n      return res.status(403).json({ error: \"Apenas coordenadores podem acessar documentos BNCC\" });\n    }\n\n    const documents = await storage.getBnccDocuments();\n    res.json(documents);\n  });\n\n  app.post(\"/api/bncc-documents/upload\", upload.single('pdf'), async (req, res) => {\n    try {\n      // Validate authentication\n      if (!req.user) {\n        return res.status(401).json({ error: \"Não autenticado\" });\n      }\n\n      // Validate coordinator role\n      if (req.user.role !== 'coordinator') {\n        return res.status(403).json({ error: \"Apenas coordenadores podem fazer upload de documentos BNCC\" });\n      }\n\n      // Validate file upload\n      if (!req.file) {\n        return res.status(400).json({ error: \"Nenhum arquivo foi enviado\" });\n      }\n\n      // Get coordinator ID from user\n      const coordinator = await storage.getCoordinatorByUserId(req.user.id);\n      if (!coordinator) {\n        return res.status(404).json({ error: \"Coordenador não encontrado\" });\n      }\n\n      console.log(\"[BNCC Upload] Processing PDF:\", req.file.originalname);\n\n      // Extract text from PDF using pdf-parse v2 API\n      let textContent: string;\n      try {\n        const parser = new PDFParse({ data: req.file.buffer });\n        const result = await parser.getText();\n        await parser.destroy();\n        textContent = result.text;\n        console.log(\"[BNCC Upload] PDF text extracted, length:\", textContent.length);\n      } catch (pdfError: any) {\n        console.error(\"[BNCC Upload] PDF parsing failed:\", pdfError);\n        return res.status(400).json({ error: \"Erro ao processar PDF: \" + pdfError.message });\n      }\n\n      // Create document record with processing status\n      const document = await storage.createBnccDocument({\n        filename: req.file.originalname,\n        uploadedBy: coordinator.id,\n        textContent,\n        processingStatus: \"processing\",\n        competenciesExtracted: 0,\n      });\n\n      console.log(\"[BNCC Upload] Document record created:\", document.id, \"- starting AI extraction...\");\n\n      // Start async AI processing (don't block the response)\n      (async () => {\n        try {\n          const extractedCompetencies = await extractCompetenciesFromText(textContent);\n          console.log(\"[BNCC Upload] Extracted\", extractedCompetencies.length, \"competencies for document:\", document.id);\n\n          // Save extracted competencies to database with document linkage\n          for (const comp of extractedCompetencies) {\n            await storage.createCompetency({\n              name: comp.name,\n              category: comp.category,\n              description: comp.description,\n              documentId: document.id, // Link competency to source document\n            });\n          }\n\n          // Update document status\n          await storage.updateBnccDocument(document.id, {\n            processingStatus: \"completed\",\n            competenciesExtracted: extractedCompetencies.length,\n          });\n\n          console.log(\"[BNCC Upload] Processing completed successfully for document:\", document.id);\n        } catch (aiError) {\n          console.error(\"[BNCC Upload] AI processing failed for document\", document.id, \":\", aiError);\n          await storage.updateBnccDocument(document.id, {\n            processingStatus: \"failed\",\n          });\n        }\n      })();\n\n      res.status(201).json(document);\n    } catch (error: any) {\n      console.error(\"[BNCC Upload] Unexpected error:\", error);\n      res.status(500).json({ error: \"Erro interno do servidor: \" + error.message });\n    }\n  });\n\n  // Feedbacks\n  app.get(\"/api/feedbacks/project/:projectId\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Não autenticado\" });\n    }\n\n    const feedbacks = await storage.getFeedbacksByProject(req.params.projectId);\n    res.json(feedbacks);\n  });\n\n  app.post(\"/api/feedbacks\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Não autenticado\" });\n      }\n\n      // Only teachers can create feedbacks\n      if (req.user.role !== 'teacher') {\n        return res.status(403).json({ error: \"Apenas professores podem criar feedbacks\" });\n      }\n\n      const data = insertFeedbackSchema.parse(req.body);\n      const feedback = await storage.createFeedback(data);\n      res.status(201).json(feedback);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/feedbacks/:id\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Não autenticado\" });\n      }\n\n      if (req.user.role !== 'teacher') {\n        return res.status(403).json({ error: \"Apenas professores podem editar feedbacks\" });\n      }\n\n      const { comment } = req.body;\n      if (!comment) {\n        return res.status(400).json({ error: \"Comentário é obrigatório\" });\n      }\n\n      const feedback = await storage.updateFeedback(req.params.id, comment);\n      if (!feedback) return res.status(404).json({ error: \"Feedback não encontrado\" });\n      res.json(feedback);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/feedbacks/:id\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Não autenticado\" });\n    }\n\n    if (req.user.role !== 'teacher') {\n      return res.status(403).json({ error: \"Apenas professores podem deletar feedbacks\" });\n    }\n\n    const deleted = await storage.deleteFeedback(req.params.id);\n    if (!deleted) return res.status(404).json({ error: \"Feedback não encontrado\" });\n    res.status(204).send();\n  });\n\n  // Events\n  app.get(\"/api/events\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Não autenticado\" });\n    }\n\n    const events = await storage.getEvents();\n    res.json(events);\n  });\n\n  app.get(\"/api/events/teacher/:teacherId\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Não autenticado\" });\n    }\n\n    const events = await storage.getEventsByTeacher(req.params.teacherId);\n    res.json(events);\n  });\n\n  app.post(\"/api/events\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Não autenticado\" });\n      }\n\n      // Only teachers can create events\n      if (req.user.role !== 'teacher') {\n        return res.status(403).json({ error: \"Apenas professores podem criar eventos\" });\n      }\n\n      const data = insertEventSchema.parse(req.body);\n      const event = await storage.createEvent(data);\n      res.status(201).json(event);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.patch(\"/api/events/:id\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Não autenticado\" });\n      }\n\n      if (req.user.role !== 'teacher') {\n        return res.status(403).json({ error: \"Apenas professores podem editar eventos\" });\n      }\n\n      const data = insertEventSchema.partial().parse(req.body);\n      const event = await storage.updateEvent(req.params.id, data);\n      if (!event) return res.status(404).json({ error: \"Evento não encontrado\" });\n      res.json(event);\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  app.delete(\"/api/events/:id\", async (req, res) => {\n    if (!req.user) {\n      return res.status(401).json({ error: \"Não autenticado\" });\n    }\n\n    if (req.user.role !== 'teacher') {\n      return res.status(403).json({ error: \"Apenas professores podem deletar eventos\" });\n    }\n\n    const deleted = await storage.deleteEvent(req.params.id);\n    if (!deleted) return res.status(404).json({ error: \"Evento não encontrado\" });\n    res.status(204).send();\n  });\n\n  // Events for students (with responses)\n  app.get(\"/api/events/student/:studentId\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Não autenticado\" });\n      }\n\n      const studentId = req.params.studentId;\n      \n      // Get all projects the student has submitted to\n      const allProjects = await storage.getProjects();\n      \n      // For now, get all events and let frontend filter by project\n      // This is simpler than querying submissions\n      const allEvents = await storage.getEvents();\n      \n      const eventsWithResponses = [];\n      \n      for (const event of allEvents) {\n        const response = await storage.getEventResponse(event.id, studentId);\n        eventsWithResponses.push({\n          ...event,\n          responseStatus: response?.status || 'pending',\n          respondedAt: response?.respondedAt || null,\n        });\n      }\n      \n      res.json(eventsWithResponses);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // Event response (accept/reject by student)\n  app.post(\"/api/events/:eventId/response\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Não autenticado\" });\n      }\n\n      if (req.user.role !== 'student') {\n        return res.status(403).json({ error: \"Apenas alunos podem responder a eventos\" });\n      }\n\n      const { eventId } = req.params;\n      const { studentId, status } = req.body;\n\n      if (!['accepted', 'rejected'].includes(status)) {\n        return res.status(400).json({ error: \"Status deve ser 'accepted' ou 'rejected'\" });\n      }\n\n      // Check if response already exists\n      const existing = await storage.getEventResponse(eventId, studentId);\n      \n      if (existing) {\n        // Update existing response\n        const updated = await storage.updateEventResponse(eventId, studentId, status);\n        return res.json(updated);\n      } else {\n        // Create new response\n        const response = await storage.createEventResponse({\n          eventId,\n          studentId,\n          status,\n        });\n        return res.status(201).json(response);\n      }\n    } catch (error: any) {\n      res.status(400).json({ error: error.message });\n    }\n  });\n\n  // Events for coordinators (all events with statistics)\n  app.get(\"/api/events/coordinator/all\", async (req, res) => {\n    try {\n      if (!req.user) {\n        return res.status(401).json({ error: \"Não autenticado\" });\n      }\n\n      if (req.user.role !== 'coordinator') {\n        return res.status(403).json({ error: \"Apenas coordenadores podem acessar esta rota\" });\n      }\n\n      const events = await storage.getEvents();\n      \n      // Add response statistics to each event\n      const eventsWithStats = await Promise.all(events.map(async (event) => {\n        const responses = await storage.getEventResponsesByEvent(event.id);\n        const accepted = responses.filter(r => r.status === 'accepted').length;\n        const rejected = responses.filter(r => r.status === 'rejected').length;\n        const pending = responses.filter(r => r.status === 'pending').length;\n        \n        // Get teacher name\n        const teacher = await storage.getTeacher(event.teacherId);\n        \n        return {\n          ...event,\n          teacherName: teacher?.name || 'Desconhecido',\n          statistics: {\n            accepted,\n            rejected,\n            pending,\n            total: responses.length,\n          },\n        };\n      }));\n      \n      res.json(eventsWithStats);\n    } catch (error: any) {\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  // AI-powered project alignment analysis\n  app.post(\"/api/projects/:id/analyze-alignment\", async (req, res) => {\n    try {\n      const project = await storage.getProject(req.params.id);\n      if (!project) {\n        return res.status(404).json({ error: \"Project not found\" });\n      }\n\n      const competencies = await storage.getCompetencies();\n      if (competencies.length === 0) {\n        return res.status(400).json({ error: \"No BNCC competencies available. Please upload the BNCC document first.\" });\n      }\n\n      console.log(\"[Project Alignment] Analyzing project:\", project.title);\n\n      const alignments = await analyzeProjectAlignment(\n        project.title,\n        project.subject,\n        project.description,\n        competencies\n      );\n\n      console.log(\"[Project Alignment] Found\", alignments.length, \"alignments\");\n\n      // Save alignments to database\n      for (const alignment of alignments) {\n        await storage.createProjectCompetency({\n          projectId: project.id,\n          competencyId: alignment.competencyId,\n          coverage: alignment.coverage,\n        });\n      }\n\n      res.json({ alignments });\n    } catch (error: any) {\n      console.error(\"[Project Alignment] Error:\", error);\n      res.status(500).json({ error: error.message });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":44175},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":483},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/BrandLogo.tsx":{"content":"interface BrandLogoProps {\n  size?: number;\n  className?: string;\n}\n\nexport function BrandLogo({ size = 40, className = \"\" }: BrandLogoProps) {\n  return (\n    <svg \n      width={size} \n      height={size} \n      viewBox=\"0 0 100 100\" \n      fill=\"none\" \n      xmlns=\"http://www.w3.org/2000/svg\" \n      className={className}\n      data-testid=\"logo-brand\"\n    >\n      <defs>\n        <linearGradient id=\"bookGradient\" x1=\"0\" y1=\"100\" x2=\"100\" y2=\"0\" gradientUnits=\"userSpaceOnUse\">\n          <stop stopColor=\"#4338ca\" />\n          <stop offset=\"1\" stopColor=\"#6366f1\" />\n        </linearGradient>\n        <linearGradient id=\"plantGradient\" x1=\"50\" y1=\"100\" x2=\"50\" y2=\"0\" gradientUnits=\"userSpaceOnUse\">\n          <stop stopColor=\"#15803d\" />\n          <stop offset=\"1\" stopColor=\"#4ade80\" />\n        </linearGradient>\n      </defs>\n      <path d=\"M10 75 C10 75 30 85 50 75 C70 65 90 75 90 75 V 85 C90 85 70 75 50 85 C30 95 10 85 10 85 V 75 Z\" fill=\"url(#bookGradient)\" opacity=\"0.8\"/>\n      <path d=\"M10 70 C10 70 30 80 50 70 C70 60 90 70 90 70 V 80 C90 80 70 70 50 80 C30 90 10 80 10 80 V 70 Z\" fill=\"white\" opacity=\"0.3\"/>\n      <path d=\"M50 75 V 85\" stroke=\"white\" strokeWidth=\"2\" strokeLinecap=\"round\"/>\n      <path d=\"M50 75 Q 50 50 50 30\" stroke=\"url(#plantGradient)\" strokeWidth=\"4\" strokeLinecap=\"round\"/>\n      <path d=\"M50 50 Q 70 40 80 20 Q 60 20 50 50\" fill=\"url(#plantGradient)\"/>\n      <path d=\"M50 40 Q 30 30 20 10 Q 40 10 50 40\" fill=\"url(#plantGradient)\" opacity=\"0.9\"/>\n      <circle cx=\"20\" cy=\"10\" r=\"4\" fill=\"#8b5cf6\"/>\n      <circle cx=\"80\" cy=\"20\" r=\"4\" fill=\"#8b5cf6\"/>\n      <circle cx=\"35\" cy=\"25\" r=\"3\" fill=\"#8b5cf6\"/>\n      <circle cx=\"65\" cy=\"30\" r=\"3\" fill=\"#8b5cf6\"/>\n      <line x1=\"50\" y1=\"40\" x2=\"20\" y2=\"10\" stroke=\"#8b5cf6\" strokeWidth=\"1.5\" opacity=\"0.5\"/>\n      <line x1=\"50\" y1=\"50\" x2=\"80\" y2=\"20\" stroke=\"#8b5cf6\" strokeWidth=\"1.5\" opacity=\"0.5\"/>\n      <line x1=\"50\" y1=\"35\" x2=\"35\" y2=\"25\" stroke=\"#8b5cf6\" strokeWidth=\"1.5\" opacity=\"0.5\"/>\n    </svg>\n  );\n}\n","size_bytes":2002},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/pages/student/calendar.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Calendar, Clock, MapPin, Check, X } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\n\ninterface EventWithResponse {\n  id: string;\n  title: string;\n  description: string | null;\n  date: string;\n  time: string;\n  location: string;\n  projectId: string | null;\n  teacherId: string;\n  responseStatus: 'pending' | 'accepted' | 'rejected';\n  respondedAt: string | null;\n  createdAt: string;\n}\n\nexport default function StudentCalendar() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n\n  const studentId = user?.roleData?.id;\n\n  const { data: events, isLoading } = useQuery<EventWithResponse[]>({\n    queryKey: ['/api/events/student', studentId],\n    enabled: !!studentId,\n  });\n\n  const respondMutation = useMutation({\n    mutationFn: async ({ eventId, status }: { eventId: string; status: 'accepted' | 'rejected' }) => {\n      return await apiRequest(`/api/events/${eventId}/response`, {\n        method: 'POST',\n        body: JSON.stringify({\n          studentId,\n          status,\n        }),\n      });\n    },\n    onSuccess: (_, variables) => {\n      queryClient.invalidateQueries({ queryKey: ['/api/events/student', studentId] });\n      toast({\n        title: variables.status === 'accepted' ? 'Evento aceito!' : 'Evento rejeitado',\n        description: variables.status === 'accepted' \n          ? 'Você confirmou sua participação no evento.'\n          : 'Você declinou o convite para este evento.',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Erro',\n        description: 'Não foi possível responder ao evento. Tente novamente.',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const sortedEvents = events?.sort((a, b) => {\n    const dateA = new Date(`${a.date}T${a.time}`);\n    const dateB = new Date(`${b.date}T${b.time}`);\n    return dateA.getTime() - dateB.getTime();\n  }) || [];\n\n  const handleResponse = (eventId: string, status: 'accepted' | 'rejected') => {\n    respondMutation.mutate({ eventId, status });\n  };\n\n  return (\n    <div className=\"animate-fade-in space-y-8\" data-testid=\"page-student-calendar\">\n      <div>\n        <h2 className=\"text-3xl font-bold text-foreground mb-2\">Calendário de Reuniões</h2>\n        <p className=\"text-muted-foreground\">\n          Visualize e responda aos convites de reuniões presenciais dos seus projetos\n        </p>\n      </div>\n\n      {isLoading ? (\n        <div className=\"space-y-4\">\n          {[1, 2, 3].map((i) => (\n            <Card key={i}>\n              <CardHeader>\n                <Skeleton className=\"h-6 w-3/4\" />\n                <Skeleton className=\"h-4 w-1/2 mt-2\" />\n              </CardHeader>\n              <CardContent>\n                <Skeleton className=\"h-4 w-full\" />\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      ) : sortedEvents.length === 0 ? (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <Calendar className=\"h-16 w-16 text-muted-foreground mb-4\" />\n            <h3 className=\"text-xl font-semibold text-foreground mb-2\">\n              Nenhum evento agendado\n            </h3>\n            <p className=\"text-muted-foreground text-center\">\n              Quando seus professores agendarem reuniões, elas aparecerão aqui.\n            </p>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"space-y-4\">\n          {sortedEvents.map((event) => {\n            const eventDate = new Date(`${event.date}T${event.time}`);\n            const isPast = eventDate < new Date();\n            \n            return (\n              <Card \n                key={event.id} \n                className=\"hover-elevate\" \n                data-testid={`card-event-${event.id}`}\n              >\n                <CardHeader>\n                  <div className=\"flex items-start justify-between gap-4\">\n                    <div className=\"flex-1\">\n                      <CardTitle className=\"text-xl mb-2\" data-testid={`text-event-title-${event.id}`}>\n                        {event.title}\n                      </CardTitle>\n                      <CardDescription>\n                        {event.description || 'Sem descrição'}\n                      </CardDescription>\n                    </div>\n                    <Badge\n                      variant={\n                        event.responseStatus === 'accepted' ? 'default' :\n                        event.responseStatus === 'rejected' ? 'destructive' :\n                        'secondary'\n                      }\n                      data-testid={`badge-status-${event.id}`}\n                    >\n                      {event.responseStatus === 'accepted' && 'Aceito'}\n                      {event.responseStatus === 'rejected' && 'Rejeitado'}\n                      {event.responseStatus === 'pending' && 'Pendente'}\n                    </Badge>\n                  </div>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <Calendar className=\"h-4 w-4\" />\n                      <span data-testid={`text-event-date-${event.id}`}>\n                        {format(new Date(event.date), \"dd 'de' MMMM 'de' yyyy\", { locale: ptBR })}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <Clock className=\"h-4 w-4\" />\n                      <span data-testid={`text-event-time-${event.id}`}>{event.time}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <MapPin className=\"h-4 w-4\" />\n                      <span data-testid={`text-event-location-${event.id}`}>{event.location}</span>\n                    </div>\n                  </div>\n\n                  {!isPast && event.responseStatus === 'pending' && (\n                    <div className=\"flex gap-2 pt-2\">\n                      <Button\n                        onClick={() => handleResponse(event.id, 'accepted')}\n                        disabled={respondMutation.isPending}\n                        className=\"flex-1\"\n                        data-testid={`button-accept-event-${event.id}`}\n                      >\n                        <Check className=\"h-4 w-4 mr-2\" />\n                        Aceitar\n                      </Button>\n                      <Button\n                        onClick={() => handleResponse(event.id, 'rejected')}\n                        disabled={respondMutation.isPending}\n                        variant=\"outline\"\n                        className=\"flex-1\"\n                        data-testid={`button-reject-event-${event.id}`}\n                      >\n                        <X className=\"h-4 w-4 mr-2\" />\n                        Rejeitar\n                      </Button>\n                    </div>\n                  )}\n\n                  {!isPast && event.responseStatus !== 'pending' && (\n                    <div className=\"flex gap-2 pt-2\">\n                      <Button\n                        onClick={() => handleResponse(event.id, event.responseStatus === 'accepted' ? 'rejected' : 'accepted')}\n                        disabled={respondMutation.isPending}\n                        variant=\"outline\"\n                        className=\"flex-1\"\n                        data-testid={`button-change-response-${event.id}`}\n                      >\n                        {event.responseStatus === 'accepted' ? 'Alterar para Rejeitado' : 'Alterar para Aceito'}\n                      </Button>\n                    </div>\n                  )}\n\n                  {isPast && (\n                    <p className=\"text-sm text-muted-foreground italic pt-2\">\n                      Este evento já ocorreu\n                    </p>\n                  )}\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":8574},"server/storage.ts":{"content":"import { randomUUID } from \"crypto\";\nimport { eq, and } from \"drizzle-orm\";\nimport { db } from \"./db\";\nimport * as schema from \"@shared/schema\";\nimport type {\n  User, InsertUser,\n  Coordinator, InsertCoordinator,\n  Teacher, InsertTeacher,\n  Project, InsertProject,\n  ProjectPlanning, InsertProjectPlanning,\n  RubricCriteria, InsertRubricCriteria,\n  Student, InsertStudent,\n  Achievement, InsertAchievement,\n  StudentAchievement, InsertStudentAchievement,\n  BnccCompetency, InsertBnccCompetency,\n  ProjectCompetency, InsertProjectCompetency,\n  Submission, InsertSubmission,\n  Class, InsertClass,\n  BnccDocument, InsertBnccDocument,\n  Feedback, InsertFeedback,\n  Event, InsertEvent,\n  EventResponse, InsertEventResponse,\n  ProjectWithTeacher,\n  StudentAchievementWithDetails,\n} from \"@shared/schema\";\n\nexport interface IStorage {\n  // Users (Authentication)\n  getUser(id: string): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  \n  // Coordinators\n  getCoordinator(id: string): Promise<Coordinator | undefined>;\n  getCoordinatorByUserId(userId: string): Promise<Coordinator | undefined>;\n  getCoordinators(): Promise<Coordinator[]>;\n  createCoordinator(coordinator: InsertCoordinator): Promise<Coordinator>;\n  \n  // Teachers\n  getTeacher(id: string): Promise<Teacher | undefined>;\n  getTeacherByUserId(userId: string): Promise<Teacher | undefined>;\n  getTeachers(): Promise<Teacher[]>;\n  createTeacher(teacher: InsertTeacher): Promise<Teacher>;\n  updateTeacher(id: string, teacher: Partial<InsertTeacher>): Promise<Teacher | undefined>;\n\n  // Projects\n  getProject(id: string): Promise<Project | undefined>;\n  getProjects(): Promise<Project[]>;\n  getProjectsWithTeacher(): Promise<ProjectWithTeacher[]>;\n  createProject(project: InsertProject): Promise<Project>;\n  updateProject(id: string, project: Partial<InsertProject>): Promise<Project | undefined>;\n  deleteProject(id: string): Promise<boolean>;\n\n  // Project Planning\n  getProjectPlanning(projectId: string): Promise<ProjectPlanning | undefined>;\n  createProjectPlanning(planning: InsertProjectPlanning): Promise<ProjectPlanning>;\n  updateProjectPlanning(projectId: string, planning: Partial<InsertProjectPlanning>): Promise<ProjectPlanning | undefined>;\n\n  // Rubric Criteria\n  getRubricCriteria(projectId: string): Promise<RubricCriteria[]>;\n  createRubricCriteria(criteria: InsertRubricCriteria): Promise<RubricCriteria>;\n  updateRubricCriteria(id: string, criteria: Partial<InsertRubricCriteria>): Promise<RubricCriteria | undefined>;\n  deleteRubricCriteria(id: string): Promise<boolean>;\n\n  // Students\n  getStudent(id: string): Promise<Student | undefined>;\n  getStudentByUserId(userId: string): Promise<Student | undefined>;\n  getStudents(): Promise<Student[]>;\n  createStudent(student: InsertStudent): Promise<Student>;\n  updateStudent(id: string, student: Partial<InsertStudent>): Promise<Student | undefined>;\n\n  // Achievements\n  getAchievement(id: string): Promise<Achievement | undefined>;\n  getAchievements(): Promise<Achievement[]>;\n  createAchievement(achievement: InsertAchievement): Promise<Achievement>;\n  updateAchievement(id: string, achievement: Partial<InsertAchievement>): Promise<Achievement | undefined>;\n\n  // Student Achievements\n  getStudentAchievements(studentId: string): Promise<StudentAchievementWithDetails[]>;\n  createStudentAchievement(studentAchievement: InsertStudentAchievement): Promise<StudentAchievement>;\n  updateStudentAchievement(id: string, progress: number, unlocked: boolean): Promise<StudentAchievement | undefined>;\n\n  // BNCC Competencies\n  getCompetency(id: string): Promise<BnccCompetency | undefined>;\n  getCompetencies(): Promise<BnccCompetency[]>;\n  createCompetency(competency: InsertBnccCompetency): Promise<BnccCompetency>;\n  updateCompetency(id: string, competency: Partial<InsertBnccCompetency>): Promise<BnccCompetency | undefined>;\n\n  // Project Competencies\n  getProjectCompetencies(projectId: string): Promise<ProjectCompetency[]>;\n  getProjectCompetenciesWithDetails(projectId: string): Promise<any[]>;\n  createProjectCompetency(projectCompetency: InsertProjectCompetency): Promise<ProjectCompetency>;\n  deleteProjectCompetencies(projectId: string): Promise<void>;\n  replaceProjectCompetencies(projectId: string, competencies: InsertProjectCompetency[]): Promise<ProjectCompetency[]>;\n\n  // Submissions\n  getSubmissions(projectId: string): Promise<Submission[]>;\n  createSubmission(submission: InsertSubmission): Promise<Submission>;\n\n  // Classes\n  getClass(id: string): Promise<Class | undefined>;\n  getClasses(): Promise<Class[]>;\n  getClassesByTeacher(teacherId: string): Promise<Class[]>;\n  createClass(classData: InsertClass): Promise<Class>;\n\n  // BNCC Documents\n  getBnccDocument(id: string): Promise<BnccDocument | undefined>;\n  getBnccDocuments(): Promise<BnccDocument[]>;\n  createBnccDocument(document: InsertBnccDocument): Promise<BnccDocument>;\n  updateBnccDocument(id: string, document: Partial<InsertBnccDocument>): Promise<BnccDocument | undefined>;\n\n  // Feedbacks\n  getFeedback(id: string): Promise<Feedback | undefined>;\n  getFeedbacksByProject(projectId: string): Promise<Feedback[]>;\n  createFeedback(feedback: InsertFeedback): Promise<Feedback>;\n  updateFeedback(id: string, comment: string): Promise<Feedback | undefined>;\n  deleteFeedback(id: string): Promise<boolean>;\n\n  // Events\n  getEvent(id: string): Promise<Event | undefined>;\n  getEvents(): Promise<Event[]>;\n  getEventsByTeacher(teacherId: string): Promise<Event[]>;\n  getEventsByProject(projectId: string): Promise<Event[]>;\n  createEvent(event: InsertEvent): Promise<Event>;\n  updateEvent(id: string, event: Partial<InsertEvent>): Promise<Event | undefined>;\n  deleteEvent(id: string): Promise<boolean>;\n\n  // Event Responses\n  getEventResponse(eventId: string, studentId: string): Promise<EventResponse | undefined>;\n  getEventResponsesByStudent(studentId: string): Promise<EventResponse[]>;\n  getEventResponsesByEvent(eventId: string): Promise<EventResponse[]>;\n  createEventResponse(response: InsertEventResponse): Promise<EventResponse>;\n  updateEventResponse(eventId: string, studentId: string, status: string): Promise<EventResponse | undefined>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // Users (Authentication)\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(schema.users).where(eq(schema.users.id, id));\n    return user || undefined;\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const [user] = await db.select().from(schema.users).where(eq(schema.users.email, email));\n    return user || undefined;\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const id = randomUUID();\n    const [user] = await db.insert(schema.users).values({ ...insertUser, id }).returning();\n    return user;\n  }\n\n  // Coordinators\n  async getCoordinator(id: string): Promise<Coordinator | undefined> {\n    const [coordinator] = await db.select().from(schema.coordinators).where(eq(schema.coordinators.id, id));\n    return coordinator || undefined;\n  }\n\n  async getCoordinatorByUserId(userId: string): Promise<Coordinator | undefined> {\n    const [coordinator] = await db.select().from(schema.coordinators).where(eq(schema.coordinators.userId, userId));\n    return coordinator || undefined;\n  }\n\n  async getCoordinators(): Promise<Coordinator[]> {\n    return await db.select().from(schema.coordinators);\n  }\n\n  async createCoordinator(insertCoordinator: InsertCoordinator): Promise<Coordinator> {\n    const id = randomUUID();\n    const [coordinator] = await db.insert(schema.coordinators).values({ ...insertCoordinator, id }).returning();\n    return coordinator;\n  }\n\n  // Teachers\n  async getTeacher(id: string): Promise<Teacher | undefined> {\n    const [teacher] = await db.select().from(schema.teachers).where(eq(schema.teachers.id, id));\n    return teacher || undefined;\n  }\n\n  async getTeacherByUserId(userId: string): Promise<Teacher | undefined> {\n    const [teacher] = await db.select().from(schema.teachers).where(eq(schema.teachers.userId, userId));\n    return teacher || undefined;\n  }\n\n  async getTeachers(): Promise<Teacher[]> {\n    return await db.select().from(schema.teachers);\n  }\n\n  async createTeacher(insertTeacher: InsertTeacher): Promise<Teacher> {\n    const id = randomUUID();\n    const [teacher] = await db.insert(schema.teachers).values({ ...insertTeacher, id }).returning();\n    return teacher;\n  }\n\n  async updateTeacher(id: string, teacherUpdate: Partial<InsertTeacher>): Promise<Teacher | undefined> {\n    const [updated] = await db.update(schema.teachers)\n      .set(teacherUpdate)\n      .where(eq(schema.teachers.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  // Projects\n  async getProject(id: string): Promise<Project | undefined> {\n    const [project] = await db.select().from(schema.projects).where(eq(schema.projects.id, id));\n    return project || undefined;\n  }\n\n  async getProjects(): Promise<Project[]> {\n    return await db.select().from(schema.projects);\n  }\n\n  async getProjectsWithTeacher(): Promise<ProjectWithTeacher[]> {\n    const projects = await db.select({\n      id: schema.projects.id,\n      title: schema.projects.title,\n      subject: schema.projects.subject,\n      status: schema.projects.status,\n      progress: schema.projects.progress,\n      students: schema.projects.students,\n      nextDeadline: schema.projects.nextDeadline,\n      deadlineLabel: schema.projects.deadlineLabel,\n      theme: schema.projects.theme,\n      teacherId: schema.projects.teacherId,\n      delayed: schema.projects.delayed,\n      description: schema.projects.description,\n      teacherName: schema.teachers.name,\n    })\n    .from(schema.projects)\n    .leftJoin(schema.teachers, eq(schema.projects.teacherId, schema.teachers.id));\n\n    return projects.map(p => ({\n      ...p,\n      teacherName: p.teacherName || 'Unknown',\n    }));\n  }\n\n  async createProject(insertProject: InsertProject): Promise<Project> {\n    const id = randomUUID();\n    const [project] = await db.insert(schema.projects).values({ ...insertProject, id }).returning();\n    return project;\n  }\n\n  async updateProject(id: string, projectUpdate: Partial<InsertProject>): Promise<Project | undefined> {\n    const [updated] = await db.update(schema.projects)\n      .set(projectUpdate)\n      .where(eq(schema.projects.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  async deleteProject(id: string): Promise<boolean> {\n    const result = await db.delete(schema.projects).where(eq(schema.projects.id, id));\n    return result.rowCount !== null && result.rowCount > 0;\n  }\n\n  // Project Planning\n  async getProjectPlanning(projectId: string): Promise<ProjectPlanning | undefined> {\n    const [planning] = await db.select().from(schema.projectPlanning).where(eq(schema.projectPlanning.projectId, projectId));\n    return planning || undefined;\n  }\n\n  async createProjectPlanning(insertPlanning: InsertProjectPlanning): Promise<ProjectPlanning> {\n    const id = randomUUID();\n    const [planning] = await db.insert(schema.projectPlanning).values({ ...insertPlanning, id }).returning();\n    return planning;\n  }\n\n  async updateProjectPlanning(projectId: string, planningUpdate: Partial<InsertProjectPlanning>): Promise<ProjectPlanning | undefined> {\n    const now = new Date();\n    const [updated] = await db.update(schema.projectPlanning)\n      .set({ ...planningUpdate, updatedAt: now })\n      .where(eq(schema.projectPlanning.projectId, projectId))\n      .returning();\n    return updated || undefined;\n  }\n\n  // Rubric Criteria\n  async getRubricCriteria(projectId: string): Promise<RubricCriteria[]> {\n    return await db.select().from(schema.rubricCriteria).where(eq(schema.rubricCriteria.projectId, projectId));\n  }\n\n  async createRubricCriteria(insertCriteria: InsertRubricCriteria): Promise<RubricCriteria> {\n    const id = randomUUID();\n    const [criteria] = await db.insert(schema.rubricCriteria).values({ ...insertCriteria, id }).returning();\n    return criteria;\n  }\n\n  async updateRubricCriteria(id: string, criteriaUpdate: Partial<InsertRubricCriteria>): Promise<RubricCriteria | undefined> {\n    const [updated] = await db.update(schema.rubricCriteria)\n      .set(criteriaUpdate)\n      .where(eq(schema.rubricCriteria.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  async deleteRubricCriteria(id: string): Promise<boolean> {\n    const result = await db.delete(schema.rubricCriteria).where(eq(schema.rubricCriteria.id, id));\n    return result.rowCount !== null && result.rowCount > 0;\n  }\n\n  // Students\n  async getStudent(id: string): Promise<Student | undefined> {\n    const [student] = await db.select().from(schema.students).where(eq(schema.students.id, id));\n    return student || undefined;\n  }\n\n  async getStudentByUserId(userId: string): Promise<Student | undefined> {\n    const [student] = await db.select().from(schema.students).where(eq(schema.students.userId, userId));\n    return student || undefined;\n  }\n\n  async getStudents(): Promise<Student[]> {\n    return await db.select().from(schema.students);\n  }\n\n  async createStudent(insertStudent: InsertStudent): Promise<Student> {\n    const id = randomUUID();\n    const [student] = await db.insert(schema.students).values({ ...insertStudent, id }).returning();\n    return student;\n  }\n\n  async updateStudent(id: string, studentUpdate: Partial<InsertStudent>): Promise<Student | undefined> {\n    const [updated] = await db.update(schema.students)\n      .set(studentUpdate)\n      .where(eq(schema.students.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  // Achievements\n  async getAchievement(id: string): Promise<Achievement | undefined> {\n    const [achievement] = await db.select().from(schema.achievements).where(eq(schema.achievements.id, id));\n    return achievement || undefined;\n  }\n\n  async getAchievements(): Promise<Achievement[]> {\n    return await db.select().from(schema.achievements);\n  }\n\n  async createAchievement(insertAchievement: InsertAchievement): Promise<Achievement> {\n    const id = randomUUID();\n    const [achievement] = await db.insert(schema.achievements).values({ ...insertAchievement, id }).returning();\n    return achievement;\n  }\n\n  async updateAchievement(id: string, achievementUpdate: Partial<InsertAchievement>): Promise<Achievement | undefined> {\n    const [updated] = await db.update(schema.achievements)\n      .set(achievementUpdate)\n      .where(eq(schema.achievements.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  // Student Achievements\n  async getStudentAchievements(studentId: string): Promise<StudentAchievementWithDetails[]> {\n    const results = await db.select({\n      id: schema.studentAchievements.id,\n      studentId: schema.studentAchievements.studentId,\n      achievementId: schema.studentAchievements.achievementId,\n      progress: schema.studentAchievements.progress,\n      total: schema.studentAchievements.total,\n      unlocked: schema.studentAchievements.unlocked,\n      achievementTitle: schema.achievements.title,\n      achievementDescription: schema.achievements.description,\n      achievementXp: schema.achievements.xp,\n      achievementIcon: schema.achievements.icon,\n    })\n    .from(schema.studentAchievements)\n    .leftJoin(schema.achievements, eq(schema.studentAchievements.achievementId, schema.achievements.id))\n    .where(eq(schema.studentAchievements.studentId, studentId));\n\n    return results.map(r => ({\n      ...r,\n      achievementTitle: r.achievementTitle || '',\n      achievementDescription: r.achievementDescription || '',\n      achievementXp: r.achievementXp || 0,\n      achievementIcon: r.achievementIcon || '',\n    }));\n  }\n\n  async createStudentAchievement(insertStudentAchievement: InsertStudentAchievement): Promise<StudentAchievement> {\n    const id = randomUUID();\n    const [studentAchievement] = await db.insert(schema.studentAchievements).values({ ...insertStudentAchievement, id }).returning();\n    return studentAchievement;\n  }\n\n  async updateStudentAchievement(id: string, progress: number, unlocked: boolean): Promise<StudentAchievement | undefined> {\n    const [updated] = await db.update(schema.studentAchievements)\n      .set({ progress, unlocked })\n      .where(eq(schema.studentAchievements.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  // BNCC Competencies\n  async getCompetency(id: string): Promise<BnccCompetency | undefined> {\n    const [competency] = await db.select().from(schema.bnccCompetencies).where(eq(schema.bnccCompetencies.id, id));\n    return competency || undefined;\n  }\n\n  async getCompetencies(): Promise<BnccCompetency[]> {\n    return await db.select().from(schema.bnccCompetencies);\n  }\n\n  async createCompetency(insertCompetency: InsertBnccCompetency): Promise<BnccCompetency> {\n    const id = randomUUID();\n    const [competency] = await db.insert(schema.bnccCompetencies).values({ ...insertCompetency, id }).returning();\n    return competency;\n  }\n\n  async updateCompetency(id: string, competencyUpdate: Partial<InsertBnccCompetency>): Promise<BnccCompetency | undefined> {\n    const [updated] = await db.update(schema.bnccCompetencies)\n      .set(competencyUpdate)\n      .where(eq(schema.bnccCompetencies.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  // Project Competencies\n  async getProjectCompetencies(projectId: string): Promise<ProjectCompetency[]> {\n    return await db.select().from(schema.projectCompetencies).where(eq(schema.projectCompetencies.projectId, projectId));\n  }\n\n  async getProjectCompetenciesWithDetails(projectId: string): Promise<any[]> {\n    return await db\n      .select({\n        id: schema.projectCompetencies.id,\n        projectId: schema.projectCompetencies.projectId,\n        competencyId: schema.projectCompetencies.competencyId,\n        coverage: schema.projectCompetencies.coverage,\n        competency: schema.bnccCompetencies,\n      })\n      .from(schema.projectCompetencies)\n      .leftJoin(schema.bnccCompetencies, eq(schema.projectCompetencies.competencyId, schema.bnccCompetencies.id))\n      .where(eq(schema.projectCompetencies.projectId, projectId));\n  }\n\n  async createProjectCompetency(insertProjectCompetency: InsertProjectCompetency): Promise<ProjectCompetency> {\n    const id = randomUUID();\n    const [projectCompetency] = await db.insert(schema.projectCompetencies).values({ ...insertProjectCompetency, id }).returning();\n    return projectCompetency;\n  }\n\n  async deleteProjectCompetencies(projectId: string): Promise<void> {\n    await db.delete(schema.projectCompetencies).where(eq(schema.projectCompetencies.projectId, projectId));\n  }\n\n  async replaceProjectCompetencies(projectId: string, competencies: InsertProjectCompetency[]): Promise<ProjectCompetency[]> {\n    // Delete existing and insert new ones in a transaction-like operation\n    // First, collect all new competencies\n    const newCompetencies: ProjectCompetency[] = [];\n    \n    // Delete old competencies\n    await db.delete(schema.projectCompetencies).where(eq(schema.projectCompetencies.projectId, projectId));\n    \n    // Insert new competencies\n    for (const comp of competencies) {\n      const id = randomUUID();\n      const [projectCompetency] = await db.insert(schema.projectCompetencies)\n        .values({ ...comp, id })\n        .returning();\n      newCompetencies.push(projectCompetency);\n    }\n    \n    return newCompetencies;\n  }\n\n  // Submissions\n  async getSubmissions(projectId: string): Promise<Submission[]> {\n    return await db.select().from(schema.submissions).where(eq(schema.submissions.projectId, projectId));\n  }\n\n  async createSubmission(insertSubmission: InsertSubmission): Promise<Submission> {\n    const id = randomUUID();\n    const [submission] = await db.insert(schema.submissions).values({ ...insertSubmission, id }).returning();\n    return submission;\n  }\n\n  // Classes\n  async getClass(id: string): Promise<Class | undefined> {\n    const [classData] = await db.select().from(schema.classes).where(eq(schema.classes.id, id));\n    return classData || undefined;\n  }\n\n  async getClasses(): Promise<Class[]> {\n    return await db.select().from(schema.classes);\n  }\n\n  async getClassesByTeacher(teacherId: string): Promise<Class[]> {\n    return await db.select().from(schema.classes).where(eq(schema.classes.teacherId, teacherId));\n  }\n\n  async createClass(insertClass: InsertClass): Promise<Class> {\n    const id = randomUUID();\n    const [classData] = await db.insert(schema.classes).values({ ...insertClass, id }).returning();\n    return classData;\n  }\n\n  // BNCC Documents\n  async getBnccDocument(id: string): Promise<BnccDocument | undefined> {\n    const [document] = await db.select().from(schema.bnccDocuments).where(eq(schema.bnccDocuments.id, id));\n    return document || undefined;\n  }\n\n  async getBnccDocuments(): Promise<BnccDocument[]> {\n    return await db.select().from(schema.bnccDocuments);\n  }\n\n  async createBnccDocument(insertDocument: InsertBnccDocument): Promise<BnccDocument> {\n    const id = randomUUID();\n    const [document] = await db.insert(schema.bnccDocuments).values({ ...insertDocument, id }).returning();\n    return document;\n  }\n\n  async updateBnccDocument(id: string, documentUpdate: Partial<InsertBnccDocument>): Promise<BnccDocument | undefined> {\n    const [updated] = await db.update(schema.bnccDocuments)\n      .set(documentUpdate)\n      .where(eq(schema.bnccDocuments.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  // Feedbacks\n  async getFeedback(id: string): Promise<Feedback | undefined> {\n    const [feedback] = await db.select().from(schema.feedbacks).where(eq(schema.feedbacks.id, id));\n    return feedback || undefined;\n  }\n\n  async getFeedbacksByProject(projectId: string): Promise<Feedback[]> {\n    return await db.select().from(schema.feedbacks).where(eq(schema.feedbacks.projectId, projectId));\n  }\n\n  async createFeedback(insertFeedback: InsertFeedback): Promise<Feedback> {\n    const id = randomUUID();\n    const [feedback] = await db.insert(schema.feedbacks).values({ ...insertFeedback, id }).returning();\n    return feedback;\n  }\n\n  async updateFeedback(id: string, comment: string): Promise<Feedback | undefined> {\n    const [updated] = await db.update(schema.feedbacks)\n      .set({ comment })\n      .where(eq(schema.feedbacks.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  async deleteFeedback(id: string): Promise<boolean> {\n    const result = await db.delete(schema.feedbacks).where(eq(schema.feedbacks.id, id));\n    return result.rowCount ? result.rowCount > 0 : false;\n  }\n\n  // Events\n  async getEvent(id: string): Promise<Event | undefined> {\n    const [event] = await db.select().from(schema.events).where(eq(schema.events.id, id));\n    return event || undefined;\n  }\n\n  async getEvents(): Promise<Event[]> {\n    return await db.select().from(schema.events);\n  }\n\n  async getEventsByTeacher(teacherId: string): Promise<Event[]> {\n    return await db.select().from(schema.events).where(eq(schema.events.teacherId, teacherId));\n  }\n\n  async getEventsByProject(projectId: string): Promise<Event[]> {\n    return await db.select().from(schema.events).where(eq(schema.events.projectId, projectId));\n  }\n\n  async createEvent(insertEvent: InsertEvent): Promise<Event> {\n    const id = randomUUID();\n    const [event] = await db.insert(schema.events).values({ ...insertEvent, id }).returning();\n    return event;\n  }\n\n  async updateEvent(id: string, eventUpdate: Partial<InsertEvent>): Promise<Event | undefined> {\n    const [updated] = await db.update(schema.events)\n      .set(eventUpdate)\n      .where(eq(schema.events.id, id))\n      .returning();\n    return updated || undefined;\n  }\n\n  async deleteEvent(id: string): Promise<boolean> {\n    const result = await db.delete(schema.events).where(eq(schema.events.id, id));\n    return result.rowCount ? result.rowCount > 0 : false;\n  }\n\n  // Event Responses\n  async getEventResponse(eventId: string, studentId: string): Promise<EventResponse | undefined> {\n    const [response] = await db.select().from(schema.eventResponses)\n      .where(and(\n        eq(schema.eventResponses.eventId, eventId),\n        eq(schema.eventResponses.studentId, studentId)\n      ));\n    return response || undefined;\n  }\n\n  async getEventResponsesByStudent(studentId: string): Promise<EventResponse[]> {\n    return await db.select().from(schema.eventResponses)\n      .where(eq(schema.eventResponses.studentId, studentId));\n  }\n\n  async getEventResponsesByEvent(eventId: string): Promise<EventResponse[]> {\n    return await db.select().from(schema.eventResponses)\n      .where(eq(schema.eventResponses.eventId, eventId));\n  }\n\n  async createEventResponse(insertResponse: InsertEventResponse): Promise<EventResponse> {\n    const id = randomUUID();\n    const [response] = await db.insert(schema.eventResponses)\n      .values({ ...insertResponse, id })\n      .returning();\n    return response;\n  }\n\n  async updateEventResponse(eventId: string, studentId: string, status: string): Promise<EventResponse | undefined> {\n    const [updated] = await db.update(schema.eventResponses)\n      .set({ status, respondedAt: new Date() })\n      .where(and(\n        eq(schema.eventResponses.eventId, eventId),\n        eq(schema.eventResponses.studentId, studentId)\n      ))\n      .returning();\n    return updated || undefined;\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":25472},"client/src/components/Icon.tsx":{"content":"interface IconProps {\n  name: string;\n  size?: number;\n  className?: string;\n}\n\nexport function Icon({ name, size = 20, className = \"\" }: IconProps) {\n  const icons: Record<string, JSX.Element> = {\n    home: <path d=\"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"/>,\n    book: <path d=\"M4 19.5A2.5 2.5 0 0 1 6.5 17H20\"/>,\n    users: <path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"/>,\n    plus: <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"/>,\n    check: <polyline points=\"20 6 9 17 4 12\"/>,\n    clock: <circle cx=\"12\" cy=\"12\" r=\"10\"/>,\n    award: <circle cx=\"12\" cy=\"8\" r=\"7\"/>,\n    calendar: <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"/>,\n    barChart: <line x1=\"18\" y1=\"20\" x2=\"18\" y2=\"10\"/>,\n    settings: <circle cx=\"12\" cy=\"12\" r=\"3\"/>,\n    leaf: <path d=\"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.77 10-10 10Z\"/>,\n    edit: <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"/>,\n    x: <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"/>,\n    alert: <circle cx=\"12\" cy=\"12\" r=\"10\"/>,\n    grid: <rect x=\"3\" y=\"3\" width=\"7\" height=\"7\"/>,\n    rocket: <path d=\"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z\"/>,\n    logout: <path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9\"/>,\n    upload: <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12\"/>,\n    download: <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3\"/>,\n    link: <path d=\"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71\"/>,\n    arrowRight: <><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"/><polyline points=\"12 5 19 12 12 19\"/></>,\n    clipboard: <><path d=\"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\"/><rect x=\"8\" y=\"2\" width=\"8\" height=\"4\" rx=\"1\" ry=\"1\"/></>,\n    trash: <path d=\"M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"/>,\n  };\n\n  const extras: Record<string, JSX.Element> = {\n    book: <path d=\"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z\"/>,\n    users: <circle cx=\"9\" cy=\"7\" r=\"4\"/>,\n    plus: <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"/>,\n    calendar: <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"/>,\n    alert: <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"/>,\n    grid: <rect x=\"14\" y=\"3\" width=\"7\" height=\"7\"/>,\n    barChart: <line x1=\"12\" y1=\"20\" x2=\"12\" y2=\"4\"/>,\n    link: <path d=\"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71\"/>,\n    trash: <><polyline points=\"3 6 5 6 21 6\"/><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"/></>,\n    x: <line x1=\"6\" y1=\"18\" x2=\"18\" y2=\"6\"/>,\n  };\n\n  const extras2: Record<string, JSX.Element> = {\n    calendar: <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"/>,\n    alert: <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"/>,\n    grid: <rect x=\"14\" y=\"14\" width=\"7\" height=\"7\"/>,\n    barChart: <line x1=\"6\" y1=\"20\" x2=\"6\" y2=\"14\"/>,\n  };\n\n  const extras3: Record<string, JSX.Element> = {\n    calendar: <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"/>,\n    grid: <rect x=\"3\" y=\"14\" width=\"7\" height=\"7\"/>,\n  };\n\n  return (\n    <svg \n      xmlns=\"http://www.w3.org/2000/svg\" \n      width={size} \n      height={size} \n      viewBox=\"0 0 24 24\" \n      fill=\"none\" \n      stroke=\"currentColor\" \n      strokeWidth=\"2\" \n      strokeLinecap=\"round\" \n      strokeLinejoin=\"round\" \n      className={className}\n    >\n      {icons[name]}\n      {extras[name]}\n      {extras2[name]}\n      {extras3[name]}\n    </svg>\n  );\n}\n","size_bytes":3418},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/pages/teacher/reports.tsx":{"content":"import { useState } from \"react\";\nimport { Icon } from \"@/components/Icon\";\nimport type { BnccCompetency } from \"@shared/schema\";\nimport jsPDF from \"jspdf\";\nimport html2canvas from \"html2canvas\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface TeacherReportsProps {\n  competencies: BnccCompetency[];\n}\n\nexport default function TeacherReports({ competencies }: TeacherReportsProps) {\n  const { toast } = useToast();\n  const [isExporting, setIsExporting] = useState(false);\n\n  const mockCompetencies = [\n    { name: \"Pensamento Científico, Crítico e Criativo\", progress: 90 },\n    { name: \"Repertório Cultural\", progress: 65 },\n    { name: \"Comunicação\", progress: 80 },\n    { name: \"Cultura Digital\", progress: 100 },\n    { name: \"Trabalho e Projeto de Vida\", progress: 45 },\n  ];\n\n  const handleExportPDF = async () => {\n    setIsExporting(true);\n    try {\n      const element = document.getElementById('report-content');\n      if (!element) {\n        throw new Error('Conteúdo do relatório não encontrado');\n      }\n\n      const canvas = await html2canvas(element, {\n        scale: 2,\n        useCORS: true,\n        logging: false,\n      });\n\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'mm', 'a4');\n      const imgWidth = 210;\n      const pageHeight = 297;\n      const imgHeight = (canvas.height * imgWidth) / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pageHeight;\n\n      while (heightLeft >= 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pageHeight;\n      }\n\n      pdf.save(`relatorio-bncc-${new Date().toISOString().split('T')[0]}.pdf`);\n      \n      toast({\n        title: \"PDF exportado com sucesso!\",\n        description: \"O relatório foi baixado para seu dispositivo.\",\n      });\n    } catch (error) {\n      console.error('Erro ao exportar PDF:', error);\n      toast({\n        title: \"Erro ao exportar PDF\",\n        description: \"Ocorreu um erro ao gerar o relatório. Tente novamente.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  return (\n    <div className=\"animate-fade-in space-y-8\">\n      <div className=\"flex justify-between items-end\">\n        <div>\n          <h2 className=\"text-3xl font-bold text-foreground\" data-testid=\"heading-reports\">Relatórios BNCC</h2>\n          <p className=\"text-muted-foreground\">Acompanhamento das competências desenvolvidas.</p>\n        </div>\n        <button \n          onClick={handleExportPDF}\n          disabled={isExporting}\n          className=\"bg-primary text-primary-foreground px-5 py-2.5 rounded-xl font-semibold hover:bg-primary/90 shadow-md flex items-center gap-2 transition disabled:opacity-50 disabled:cursor-not-allowed\" \n          data-testid=\"button-export-pdf\"\n        >\n          {isExporting ? (\n            <>\n              <div className=\"w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin\"></div>\n              Exportando...\n            </>\n          ) : (\n            <>\n              <Icon name=\"download\" size={18} /> Exportar PDF\n            </>\n          )}\n        </button>\n      </div>\n      \n      <div id=\"report-content\" className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"bg-card border border-card-border p-6 rounded-2xl shadow-sm\">\n          <p className=\"text-muted-foreground text-xs font-bold uppercase tracking-wider\">Cobertura Total</p>\n          <p className=\"text-4xl font-extrabold text-primary mt-2\" data-testid=\"text-coverage-total\">85%</p>\n          <p className=\"text-xs text-muted-foreground mt-1\">das competências gerais trabalhadas.</p>\n        </div>\n        <div className=\"bg-card border border-card-border p-6 rounded-2xl shadow-sm\">\n          <p className=\"text-muted-foreground text-xs font-bold uppercase tracking-wider\">Turma Destaque</p>\n          <p className=\"text-xl font-bold text-foreground mt-3\" data-testid=\"text-top-class\">1º Ano A</p>\n          <p className=\"text-xs text-green-600 font-bold mt-1\">92% de aderência</p>\n        </div>\n        <div className=\"bg-card border border-card-border p-6 rounded-2xl shadow-sm\">\n          <p className=\"text-muted-foreground text-xs font-bold uppercase tracking-wider\">Área de Foco</p>\n          <p className=\"text-xl font-bold text-foreground mt-3\" data-testid=\"text-focus-area\">Ciências da Natureza</p>\n          <p className=\"text-xs text-muted-foreground mt-1\">3 Projetos ativos</p>\n        </div>\n      </div>\n\n      <div className=\"bg-card border border-card-border rounded-2xl shadow-sm overflow-hidden\">\n        <div className=\"p-6 border-b border-border\">\n          <h3 className=\"font-bold text-lg text-foreground\">Matriz de Competências (Gerais)</h3>\n        </div>\n        <div className=\"divide-y divide-border\">\n          {mockCompetencies.map((comp, idx) => (\n            <div key={idx} className=\"p-6 hover-elevate transition\" data-testid={`competency-${idx}`}>\n              <div className=\"flex justify-between mb-2\">\n                <span className=\"font-medium text-foreground text-sm\" data-testid={`text-competency-name-${idx}`}>{comp.name}</span>\n                <span className=\"font-bold text-primary text-sm\" data-testid={`text-competency-progress-${idx}`}>{comp.progress}%</span>\n              </div>\n              <div className=\"w-full bg-muted h-2 rounded-full overflow-hidden\">\n                <div \n                  className=\"bg-primary h-full rounded-full transition-all duration-1000\" \n                  style={{ width: `${comp.progress}%` }}\n                ></div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":5887},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/pages/teacher/dashboard.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Icon } from \"@/components/Icon\";\nimport { ProjectCard } from \"@/components/ProjectCard\";\nimport { CreateProjectModal } from \"@/components/CreateProjectModal\";\nimport type { ProjectWithTeacher } from \"@shared/schema\";\n\nexport default function TeacherDashboard() {\n  const { data: projects = [], isLoading } = useQuery<ProjectWithTeacher[]>({\n    queryKey: ['/api/projects'],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Carregando...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const stats = [\n    { label: \"Projetos Ativos\", value: projects.filter(p => p.status === \"Em Andamento\").length, icon: \"book\", color: \"text-blue-600 bg-blue-50\" },\n    { label: \"Alunos Engajados\", value: projects.reduce((sum, p) => sum + p.students, 0), icon: \"users\", color: \"text-green-600 bg-green-50\" },\n    { label: \"Entregas Pendentes\", value: projects.filter(p => p.status === \"Para Avaliação\").length, icon: \"clock\", color: \"text-purple-600 bg-purple-50\" },\n    { label: \"Taxa de Conclusão\", value: \"85%\", icon: \"award\", color: \"text-orange-600 bg-orange-50\" },\n  ];\n\n  return (\n    <div className=\"animate-fade-in space-y-8\">\n      <div>\n        <h2 className=\"text-3xl font-bold text-foreground mb-2\" data-testid=\"heading-dashboard\">Visão Geral</h2>\n        <p className=\"text-muted-foreground\">Acompanhe o progresso dos seus projetos em tempo real.</p>\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {stats.map((stat, idx) => (\n          <div key={idx} className=\"bg-card border border-card-border p-6 rounded-xl shadow-sm\" data-testid={`stat-${stat.label.toLowerCase().replace(/\\s+/g, '-')}`}>\n            <div className=\"flex justify-between items-start mb-3\">\n              <div className=\"flex-1\">\n                <p className=\"text-sm text-muted-foreground mb-1\">{stat.label}</p>\n                <p className=\"text-3xl font-bold text-foreground\" data-testid={`text-stat-value-${idx}`}>{stat.value}</p>\n              </div>\n              <div className={`w-12 h-12 rounded-lg ${stat.color} flex items-center justify-center`}>\n                <Icon name={stat.icon} size={24} />\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Projects Grid */}\n      <div>\n        <div className=\"flex justify-between items-center mb-6\">\n          <h3 className=\"text-2xl font-bold text-foreground\">Projetos em Andamento</h3>\n          <CreateProjectModal />\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\">\n          {projects.map((project) => (\n            <ProjectCard key={project.id} project={project} />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":3051},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n        display: [\"var(--font-display)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n        \"fade-in\": {\n          from: { opacity: \"0\" },\n          to: { opacity: \"1\" },\n        },\n        \"slide-up\": {\n          from: { opacity: \"0\", transform: \"translateY(40px)\" },\n          to: { opacity: \"1\", transform: \"translateY(0)\" },\n        },\n        \"float\": {\n          \"0%, 100%\": { transform: \"translateY(0px)\" },\n          \"50%\": { transform: \"translateY(-20px)\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n        \"fade-in\": \"fade-in 0.6s cubic-bezier(0.16, 1, 0.3, 1)\",\n        \"slide-up\": \"slide-up 0.8s cubic-bezier(0.16, 1, 0.3, 1)\",\n        \"float\": \"float 6s ease-in-out infinite\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4669},"design_guidelines.md":{"content":"# BProjetos Design Guidelines\n\n## Design Approach\n**Reference-Based**: Drawing inspiration from modern education platforms like Notion (for organization), Linear (for clean UI), and Asana (for project tracking), combined with gamification elements from Duolingo. The design emphasizes clarity, visual hierarchy, and delightful micro-interactions that make educational project management engaging.\n\n## Core Design Principles\n1. **Clarity First**: Educational tools must be immediately understandable - no learning curve\n2. **Gamification Joy**: Progress indicators, achievements, and visual rewards motivate continued use\n3. **Professional Polish**: Teachers need to feel this is a serious, trustworthy tool\n4. **Visual Breathing Room**: Generous whitespace prevents cognitive overload in data-heavy interfaces\n\n---\n\n## Typography\n\n**Font Families:**\n- **Display/Headers**: 'Outfit' (Google Fonts) - Modern, geometric, friendly\n  - H1: 48px / font-bold / tracking-tight\n  - H2: 36px / font-semibold\n  - H3: 24px / font-semibold\n  - H4: 18px / font-semibold\n\n- **Body/Interface**: 'Plus Jakarta Sans' (Google Fonts) - Highly legible, professional\n  - Body: 16px / font-normal / leading-relaxed\n  - Small text: 14px / font-medium\n  - Captions: 12px / font-medium / uppercase / tracking-wide\n\n---\n\n## Layout System\n\n**Spacing Primitives**: Use Tailwind units of **2, 4, 8, 12, 16** consistently\n- Component padding: p-4, p-8\n- Section spacing: py-12, py-16\n- Card gaps: gap-4, gap-8\n- Element margins: m-2, m-4, m-8\n\n**Grid Structure:**\n- Main dashboard: Sidebar (280px fixed) + Content area (flex-1)\n- Project cards: grid-cols-1 md:grid-cols-2 xl:grid-cols-3\n- Statistics: grid-cols-2 md:grid-cols-4\n- Max container width: max-w-7xl\n\n---\n\n## Visual Treatment\n\n**Glassmorphism Effect** (primary design signature):\n```\nBackground: rgba(255, 255, 255, 0.7)\nBackdrop-filter: blur(20px)\nBorder: 1px solid rgba(255, 255, 255, 0.5)\nShadow: 0 8px 32px rgba(31, 38, 135, 0.15)\n```\n\n**Gradient Backgrounds:**\n- Hero sections: Radial gradient from indigo-100 → purple-100 → white\n- Accent elements: Linear gradient indigo-600 → purple-600\n- Status indicators: Project-specific theme gradients\n\n**Card Elevations:**\n- Default cards: shadow-lg with glass effect\n- Hover state: shadow-xl with subtle lift (transform: translateY(-2px))\n- Active projects: Add subtle glow with matching theme accent\n\n---\n\n## Component Library\n\n### Navigation\n- **Sidebar**: Fixed 280px, glass-card background, subtle shadow\n  - Logo + brand (56px height, centered)\n  - Nav items: Full-width, p-4, rounded-lg, hover bg-white/50\n  - Active state: bg-indigo-50, border-l-4 border-indigo-600\n  - Icons: 20px, inline with 12px gap to labels\n\n### Project Cards\n- **Structure**: Glass card, p-8, rounded-2xl\n- **Header**: Project title (H3) + subject tags (pill badges)\n- **Status badge**: Top-right, rounded-full, px-4 py-1, matching theme\n- **Progress bar**: Full-width, h-2, rounded-full, bg-gray-200, fill with theme gradient\n- **Metadata grid**: 2-column grid showing students, deadline, teacher avatar\n- **Theme variants**: green (sustainable), blue (communication), purple (creative), red (urgent)\n\n### Statistics Dashboard\n- **Stat cards**: 4-column grid, glass-card, p-8, rounded-xl\n- **Big number**: 36px font-bold, theme-colored\n- **Label**: 14px text-gray-600 below number\n- **Icon**: 40px, top-right, theme-colored with light background circle\n\n### Forms & Inputs\n- **Text inputs**: h-12, px-4, rounded-lg, border-2 border-gray-200, focus:border-indigo-500\n- **Textareas**: min-h-32, same border treatment\n- **Buttons Primary**: px-8 py-3, rounded-lg, indigo-600 background, white text, font-semibold, shadow-lg\n- **Buttons Secondary**: Same dimensions, white background, gray-700 text, border-2 border-gray-300\n\n### Rubric Builder\n- **Table layout**: Clean rows with alternating subtle bg (bg-gray-50)\n- **Criteria column**: font-semibold, w-1/3\n- **Weight slider**: Custom styled range input with indigo accent\n- **Level pills**: Horizontal scroll, rounded-full badges, gap-2\n\n### Achievement Cards\n- **Layout**: Glass card, flex horizontal, p-6, gap-4\n- **Icon area**: 64px circle, gradient background matching achievement\n- **Progress ring**: Circular SVG progress indicator around icon\n- **Text area**: flex-col, title (font-semibold), description (text-sm text-gray-600)\n- **XP badge**: Absolute top-right, rounded-full, purple gradient, white text\n\n---\n\n## Images\n\n**Hero Section Image**: \n- Full-width decorative illustration showing diverse students collaborating around a table with digital devices, plants, and project materials\n- Style: Modern, friendly illustration with purple/indigo accent colors\n- Placement: Right side of hero (60% width on desktop), below text on mobile\n- Alternative: Abstract geometric pattern with educational iconography\n\n**Teacher Avatars**:\n- Circular, 40px default size (64px in profile views)\n- API: DiceBear Avataaars (already implemented)\n- Border: 2px solid white with subtle shadow\n\n**Empty States**:\n- Friendly illustrations for \"No projects yet\", \"No students assigned\"\n- Style: Minimal line art with single accent color\n\n---\n\n## Animations (Minimal Use)\n\n- **Page transitions**: 600ms fade-in only\n- **Card hover**: 200ms translateY(-2px) with shadow change\n- **Progress bars**: 1s ease-out fill animation on page load\n- **Achievement unlock**: Scale + fade celebration (one-time only)\n- **NO scroll animations, NO parallax, NO continuous motion**\n\n---\n\n## Accessibility\n- All interactive elements: min-height 44px for touch targets\n- Form inputs: Visible labels above inputs (not placeholders)\n- Focus states: 2px solid indigo-600 ring with 2px offset\n- Contrast ratios: Minimum 4.5:1 for all text\n- Keyboard navigation: Clear focus indicators throughout\n\n---\n\n## Special Features\n\n**Gamification Elements:**\n- XP progress bars with level indicators\n- Badge showcase using grid-cols-3 with locked/unlocked states (grayscale filter for locked)\n- Achievement popups: Toast-style, bottom-right, glass-card, auto-dismiss 5s\n\n**BNCC Competency Tags:**\n- Pill badges, small (text-xs), multiple colors for different competency categories\n- Wrap in flex-wrap container, gap-2\n\n**Status Workflow Colors:**\n- Planning: blue-500\n- In Progress: green-500\n- For Evaluation: purple-500\n- Delayed: red-500\n\nThis design creates a professional yet approachable educational platform that motivates through visual delight while maintaining serious functionality for teachers and students.","size_bytes":6496},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/pages/landing.tsx":{"content":"import { BrandLogo } from \"@/components/BrandLogo\";\nimport { Icon } from \"@/components/Icon\";\n\ninterface LandingPageProps {\n  onEnter: (role: 'teacher' | 'student' | 'coordinator') => void;\n}\n\nexport default function LandingPage({ onEnter }: LandingPageProps) {\n  return (\n    <div className=\"min-h-screen hero-gradient flex flex-col relative overflow-hidden\">\n      {/* Decorative Blobs */}\n      <div className=\"absolute top-0 right-0 w-[600px] h-[600px] bg-purple-300/30 rounded-full blur-3xl mix-blend-multiply filter animate-float -z-10\"></div>\n      <div className=\"absolute bottom-0 left-0 w-[600px] h-[600px] bg-indigo-300/30 rounded-full blur-3xl mix-blend-multiply filter animate-float -z-10\" style={{animationDelay: \"2s\"}}></div>\n\n      {/* Navbar */}\n      <nav className=\"px-8 py-6 flex justify-between items-center max-w-7xl mx-auto w-full\">\n        <div className=\"flex items-center gap-3\">\n          <BrandLogo size={40} />\n          <span className=\"text-2xl font-bold text-slate-800 tracking-tight\">BProjetos</span>\n        </div>\n        <div className=\"hidden md:flex gap-6 text-sm font-semibold text-slate-600\">\n          <a href=\"#\" className=\"hover:text-primary transition\" data-testid=\"link-about\">Sobre</a>\n          <a href=\"#\" className=\"hover:text-primary transition\" data-testid=\"link-features\">Recursos</a>\n          <a href=\"#\" className=\"hover:text-primary transition\" data-testid=\"link-pricing\">Preços</a>\n        </div>\n        <button className=\"px-6 py-2.5 rounded-full bg-primary text-primary-foreground font-semibold hover:bg-primary/90 transition shadow-lg shadow-primary/20 text-sm\" data-testid=\"button-schedule-demo\">\n          Agendar Demo\n        </button>\n      </nav>\n\n      {/* Hero Content */}\n      <div className=\"flex-1 flex flex-col md:flex-row items-center justify-center max-w-7xl mx-auto w-full px-6 md:px-12 gap-12 py-12\">\n        \n        {/* Left Text */}\n        <div className=\"md:w-1/2 animate-slide-up space-y-8\">\n          <div className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 border border-primary/20 text-primary text-sm font-bold\">\n            <span className=\"relative flex h-3 w-3\">\n              <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75\"></span>\n              <span className=\"relative inline-flex rounded-full h-3 w-3 bg-primary\"></span>\n            </span>\n            Plataforma #1 para Escolas Inovadoras\n          </div>\n          \n          <h1 className=\"text-5xl md:text-7xl font-extrabold text-slate-900 leading-tight\">\n            Projetos que <br/>\n            <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600\">Engajam Alunos</span>\n          </h1>\n          \n          <p className=\"text-xl text-slate-600 leading-relaxed max-w-lg\">\n            Centralize a gestão pedagógica, automatize o acompanhamento da BNCC e transforme atividades escolares em experiências gamificadas.\n          </p>\n\n          <div className=\"flex flex-col sm:flex-row gap-4 pt-4\">\n            <div className=\"flex items-center gap-2\">\n              <div className=\"flex -space-x-4\">\n                <img className=\"w-10 h-10 rounded-full border-2 border-white\" src=\"https://api.dicebear.com/7.x/avataaars/svg?seed=Felix\" alt=\"\" data-testid=\"img-avatar-1\"/>\n                <img className=\"w-10 h-10 rounded-full border-2 border-white\" src=\"https://api.dicebear.com/7.x/avataaars/svg?seed=Ane\" alt=\"\" data-testid=\"img-avatar-2\"/>\n                <img className=\"w-10 h-10 rounded-full border-2 border-white\" src=\"https://api.dicebear.com/7.x/avataaars/svg?seed=Bob\" alt=\"\" data-testid=\"img-avatar-3\"/>\n              </div>\n              <span className=\"ml-6 text-sm font-bold text-slate-600\" data-testid=\"text-school-count\">+500 Escolas usam</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Right Login Cards */}\n        <div className=\"md:w-1/2 w-full grid gap-4 animate-slide-up\" style={{animationDelay: \"0.2s\"}}>\n          <p className=\"text-slate-400 text-sm font-bold uppercase tracking-widest mb-2\">Acesso Rápido (Ambiente Demo)</p>\n          \n          <button \n            onClick={() => onEnter('teacher')} \n            data-testid=\"button-enter-teacher\"\n            className=\"glass-card p-6 rounded-2xl flex items-center gap-6 hover:scale-[1.02] transition-all shadow-sm hover:shadow-xl group cursor-pointer text-left\"\n          >\n            <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white shadow-lg group-hover:rotate-6 transition-transform\">\n              <Icon name=\"book\" size={28} />\n            </div>\n            <div className=\"flex-1\">\n              <h3 className=\"text-lg font-bold text-slate-800\">Sou Professor</h3>\n              <p className=\"text-sm text-slate-500\">Gerenciar projetos, turmas e rubricas.</p>\n            </div>\n            <div className=\"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 group-hover:bg-blue-500 group-hover:text-white transition-colors\">\n              <Icon name=\"arrowRight\" size={16} />\n            </div>\n          </button>\n\n          <button \n            onClick={() => onEnter('student')} \n            data-testid=\"button-enter-student\"\n            className=\"glass-card p-6 rounded-2xl flex items-center gap-6 hover:scale-[1.02] transition-all shadow-sm hover:shadow-xl group cursor-pointer text-left\"\n          >\n            <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white shadow-lg group-hover:rotate-6 transition-transform\">\n              <Icon name=\"rocket\" size={28} />\n            </div>\n            <div className=\"flex-1\">\n              <h3 className=\"text-lg font-bold text-slate-800\">Sou Aluno</h3>\n              <p className=\"text-sm text-slate-500\">Ver missões, XP e enviar atividades.</p>\n            </div>\n            <div className=\"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 group-hover:bg-purple-500 group-hover:text-white transition-colors\">\n              <Icon name=\"arrowRight\" size={16} />\n            </div>\n          </button>\n\n          <button \n            onClick={() => onEnter('coordinator')} \n            data-testid=\"button-enter-coordinator\"\n            className=\"glass-card p-6 rounded-2xl flex items-center gap-6 hover:scale-[1.02] transition-all shadow-sm hover:shadow-xl group cursor-pointer text-left\"\n          >\n            <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center text-white shadow-lg group-hover:rotate-6 transition-transform\">\n              <Icon name=\"grid\" size={28} />\n            </div>\n            <div className=\"flex-1\">\n              <h3 className=\"text-lg font-bold text-slate-800\">Coordenação</h3>\n              <p className=\"text-sm text-slate-500\">Monitorar Kanban e desempenho docente.</p>\n            </div>\n            <div className=\"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 group-hover:bg-orange-500 group-hover:text-white transition-colors\">\n              <Icon name=\"arrowRight\" size={16} />\n            </div>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":7368},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/pages/teacher/classes.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Icon } from \"@/components/Icon\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { CreateClassModal } from \"@/components/CreateClassModal\";\nimport { SpreadsheetImport } from \"@/components/SpreadsheetImport\";\nimport type { Class } from \"@shared/schema\";\n\nexport default function TeacherClasses() {\n  const { user } = useAuth();\n  const teacherId = user?.roleData?.id;\n\n  const { data: classes = [], isLoading } = useQuery<Class[]>({\n    queryKey: [\"/api/teachers\", teacherId, \"classes\"],\n    enabled: !!teacherId,\n  });\n\n  if (!teacherId) {\n    return (\n      <div className=\"animate-fade-in\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <h2 className=\"text-3xl font-bold text-foreground\" data-testid=\"heading-classes\">Minhas Turmas</h2>\n        </div>\n        <div className=\"bg-card border border-card-border p-12 rounded-2xl text-center\">\n          <p className=\"text-lg text-muted-foreground\">Dados do professor não encontrados</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"animate-fade-in\">\n        <div className=\"flex justify-between items-center mb-8\">\n          <h2 className=\"text-3xl font-bold text-foreground\" data-testid=\"heading-classes\">Minhas Turmas</h2>\n          <div className=\"flex gap-2\">\n            <SpreadsheetImport />\n            <CreateClassModal />\n          </div>\n        </div>\n        <div className=\"flex justify-center items-center h-64\">\n          <div className=\"text-muted-foreground\">Carregando turmas...</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"animate-fade-in\">\n      <div className=\"flex justify-between items-center mb-8\">\n        <h2 className=\"text-3xl font-bold text-foreground\" data-testid=\"heading-classes\">Minhas Turmas</h2>\n        <div className=\"flex gap-2\">\n          <SpreadsheetImport />\n          <CreateClassModal />\n        </div>\n      </div>\n      \n      {classes.length === 0 ? (\n        <div className=\"bg-card border border-card-border p-12 rounded-2xl text-center\">\n          <Icon name=\"users\" className=\"w-16 h-16 text-muted-foreground mx-auto mb-4\" />\n          <p className=\"text-lg text-muted-foreground\">Nenhuma turma encontrada</p>\n          <p className=\"text-sm text-muted-foreground mt-2\">Suas turmas aparecerão aqui</p>\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {classes.map((classItem) => (\n            <div key={classItem.id} className=\"bg-card border border-card-border p-8 rounded-2xl shadow-sm hover:shadow-md transition hover-elevate\" data-testid={`card-class-${classItem.id}`}>\n              <div className=\"flex justify-between mb-4\">\n                <h3 className=\"text-xl font-bold text-foreground\" data-testid={`text-class-name-${classItem.id}`}>{classItem.name}</h3>\n                <span className=\"bg-primary/10 text-primary px-3 py-1 rounded-full text-xs font-bold\" data-testid={`text-student-count-${classItem.id}`}>\n                  {classItem.studentCount} Alunos\n                </span>\n              </div>\n              \n              <div className=\"h-2 bg-muted rounded-full overflow-hidden mb-2\">\n                <div \n                  className=\"h-full bg-primary transition-all duration-1000\" \n                  style={{ width: `${classItem.engagement}%` }}\n                  data-testid={`progress-engagement-${classItem.id}`}\n                ></div>\n              </div>\n              <p className=\"text-xs text-muted-foreground\" data-testid={`text-engagement-${classItem.id}`}>{classItem.engagement}% de Engajamento</p>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":3747},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/contexts/AuthContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface User {\n  id: string;\n  email: string;\n  role: \"teacher\" | \"student\" | \"coordinator\";\n  name: string;\n  avatar?: string | null;\n  roleData?: any;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  isLoading: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  register: (data: RegisterData) => Promise<void>;\n  logout: () => Promise<void>;\n}\n\ninterface RegisterData {\n  email: string;\n  password: string;\n  name: string;\n  role: \"teacher\" | \"student\" | \"coordinator\";\n  subject?: string;\n}\n\nconst AuthContext = createContext<AuthContextType | null>(null);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const queryClient = useQueryClient();\n  const [user, setUser] = useState<User | null>(null);\n  const [isRestoring, setIsRestoring] = useState(true);\n\n  // Try to restore user from localStorage first\n  useEffect(() => {\n    const storedUser = localStorage.getItem('bprojetos_user');\n    if (storedUser) {\n      try {\n        const parsedUser = JSON.parse(storedUser);\n        setUser(parsedUser);\n      } catch (e) {\n        console.error(\"[AuthContext] Failed to parse stored user:\", e);\n        localStorage.removeItem('bprojetos_user');\n      }\n    }\n    setIsRestoring(false);\n  }, []);\n\n  // Fetch current user on mount\n  const { data: currentUser, error } = useQuery<User>({\n    queryKey: ['/api/auth/me'],\n    retry: false,\n    refetchOnWindowFocus: false,\n    enabled: false, // Disable auto-fetch since we're using localStorage\n  });\n\n  useEffect(() => {\n    if (currentUser) {\n      setUser(currentUser);\n    } else if (error) {\n      setUser(null);\n    }\n  }, [currentUser, error]);\n\n  const loginMutation = useMutation({\n    mutationFn: async (credentials: { email: string; password: string }) => {\n      console.log(\"[loginMutation] Starting login request with:\", credentials);\n      const result = await apiRequest('/api/auth/login', {\n        method: 'POST',\n        body: JSON.stringify(credentials),\n        headers: { 'Content-Type': 'application/json' },\n      });\n      console.log(\"[loginMutation] Login request successful:\", result);\n      return result;\n    },\n    onSuccess: async (data) => {\n      console.log(\"[loginMutation] onSuccess called with:\", data);\n      // Store token in localStorage (more secure than just userId)\n      if (data.token) {\n        localStorage.setItem('bprojetos_token', data.token);\n      }\n      // Also store user for display purposes\n      localStorage.setItem('bprojetos_user', JSON.stringify(data));\n      setUser(data);\n      await queryClient.invalidateQueries({ queryKey: ['/api/auth/me'] });\n    },\n    onError: (error) => {\n      console.error(\"[loginMutation] onError called with:\", error);\n    },\n  });\n\n  const registerMutation = useMutation({\n    mutationFn: async (data: RegisterData) => {\n      return await apiRequest('/api/auth/register', {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers: { 'Content-Type': 'application/json' },\n      });\n    },\n    onSuccess: async (data) => {\n      // After registration, automatically log in\n      await loginMutation.mutateAsync({\n        email: data.email,\n        password: (registerMutation.variables as RegisterData).password,\n      });\n    },\n  });\n\n  const logoutMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest('/api/auth/logout', {\n        method: 'POST',\n      });\n    },\n    onSuccess: () => {\n      localStorage.removeItem('bprojetos_user');\n      localStorage.removeItem('bprojetos_token');\n      setUser(null);\n      queryClient.clear();\n      window.location.href = '/login';\n    },\n  });\n\n  const login = async (email: string, password: string) => {\n    console.log(\"[AuthContext] Login attempt:\", { email, password });\n    try {\n      const result = await loginMutation.mutateAsync({ email, password });\n      console.log(\"[AuthContext] Login successful:\", result);\n      return result;\n    } catch (error) {\n      console.error(\"[AuthContext] Login failed:\", error);\n      throw error;\n    }\n  };\n\n  const register = async (data: RegisterData) => {\n    await registerMutation.mutateAsync(data);\n  };\n\n  const logout = async () => {\n    await logoutMutation.mutateAsync();\n  };\n\n  const isLoading = isRestoring || loginMutation.isPending || registerMutation.isPending;\n\n  return (\n    <AuthContext.Provider value={{ user, isLoading, login, register, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within AuthProvider\");\n  }\n  return context;\n}\n","size_bytes":4847},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"server/app.ts":{"content":"import { type Server } from \"node:http\";\n\nimport express, {\n  type Express,\n  type Request,\n  Response,\n  NextFunction,\n} from \"express\";\nimport session from \"express-session\";\nimport MemoryStore from \"memorystore\";\nimport jwt from 'jsonwebtoken';\n\nimport { registerRoutes } from \"./routes\";\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport const app = express();\n\n// Trust proxy for Replit HTTPS environment\napp.set('trust proxy', 1);\n\n// Configure session middleware\nconst MemStore = MemoryStore(session);\napp.use(session({\n  secret: process.env.SESSION_SECRET || 'bprojetos-secret-key-change-in-production',\n  resave: false,\n  saveUninitialized: false,\n  store: new MemStore({\n    checkPeriod: 86400000 // prune expired entries every 24h\n  }),\n  cookie: {\n    maxAge: 7 * 24 * 60 * 60 * 1000, // 7 days\n    httpOnly: true,\n    secure: true, // Required for HTTPS (Replit preview)\n    sameSite: 'none', // Required for cross-origin cookies in Replit\n  },\n}));\n\ndeclare module 'express-session' {\n  interface SessionData {\n    userId?: string;\n  }\n}\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\n\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\n// JWT Token authentication middleware\nconst JWT_SECRET = process.env.SESSION_SECRET || 'fallback-secret-change-in-production';\n\napp.use((req, _res, next) => {\n  // Check for Bearer token in Authorization header\n  const authHeader = req.headers.authorization;\n  if (authHeader && authHeader.startsWith('Bearer ')) {\n    const token = authHeader.substring(7);\n    try {\n      const decoded = jwt.verify(token, JWT_SECRET) as { userId: string; email: string; role: string; name: string };\n      req.session.userId = decoded.userId;\n      \n      // Populate req.user for route handlers\n      req.user = {\n        id: decoded.userId,\n        email: decoded.email,\n        role: decoded.role,\n        name: decoded.name || '',\n      };\n      \n      console.log('[JWT Auth] User authenticated via token:', decoded.userId);\n    } catch (error) {\n      console.error('[JWT Auth] Invalid token:', error);\n    }\n  }\n  next();\n});\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\nexport default async function runApp(\n  setup: (app: Express, server: Server) => Promise<void>,\n) {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly run the final setup after setting up all the other routes so\n  // the catch-all route doesn't interfere with the other routes\n  await setup(app, server);\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n}\n","size_bytes":4201},"client/src/pages/coordinator/metrics.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Icon } from \"@/components/Icon\";\nimport type { ProjectWithTeacher, Teacher } from \"@shared/schema\";\n\nexport default function CoordinatorMetrics() {\n  const { data: projects = [], isLoading: projectsLoading } = useQuery<ProjectWithTeacher[]>({\n    queryKey: ['/api/projects'],\n  });\n\n  const { data: teachers = [], isLoading: teachersLoading } = useQuery<Teacher[]>({\n    queryKey: ['/api/teachers'],\n  });\n\n  if (projectsLoading || teachersLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Carregando...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Calculate real stats from backend data\n  const completedProjects = projects.filter(p => p.status === \"Para Avaliação\").length;\n  const activeProjects = projects.filter(p => p.status === \"Em Andamento\").length;\n  const totalProjects = projects.length;\n  const completionRate = totalProjects > 0 ? Math.round((completedProjects / totalProjects) * 100) : 0;\n  \n  // Calculate average BNCC (mock calculation based on project progress)\n  const avgBncc = totalProjects > 0 \n    ? Math.round(projects.reduce((sum, p) => sum + p.progress, 0) / totalProjects)\n    : 0;\n\n  const stats = [\n    { label: \"Taxa de Conclusão\", value: `${completionRate}%`, icon: \"check\", color: \"text-green-600 bg-green-50\", change: `${completedProjects} concluídos` },\n    { label: \"Projetos Ativos\", value: `${activeProjects}`, icon: \"book\", color: \"text-blue-600 bg-blue-50\", change: `${totalProjects} total` },\n    { label: \"Professores Engajados\", value: `${teachers.length}`, icon: \"users\", color: \"text-purple-600 bg-purple-50\", change: \"ativos\" },\n    { label: \"Média de Progresso\", value: `${avgBncc}%`, icon: \"award\", color: \"text-orange-600 bg-orange-50\", change: \"média geral\" },\n  ];\n\n  // Get recent projects (sorted by status and date)\n  const recentActivity = projects\n    .slice(0, 3)\n    .map(project => ({\n      teacher: project.teacherName,\n      action: project.status === \"Para Avaliação\" ? \"finalizou o projeto\" : \n              project.status === \"Em Andamento\" ? \"está trabalhando em\" : \"criou o projeto\",\n      project: project.title,\n      time: \"recente\"\n    }));\n\n  return (\n    <div className=\"animate-fade-in space-y-8\">\n      <div>\n        <h2 className=\"text-3xl font-bold text-foreground mb-2\" data-testid=\"heading-metrics\">Indicadores</h2>\n        <p className=\"text-muted-foreground\">Métricas gerais de desempenho da escola.</p>\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {stats.map((stat, idx) => (\n          <div key={idx} className=\"bg-card border border-card-border p-6 rounded-xl shadow-sm\" data-testid={`stat-${stat.label.toLowerCase().replace(/\\s+/g, '-')}`}>\n            <div className=\"flex justify-between items-start mb-3\">\n              <div className=\"flex-1\">\n                <p className=\"text-sm text-muted-foreground mb-1\">{stat.label}</p>\n                <p className=\"text-3xl font-bold text-foreground\" data-testid={`text-stat-value-${idx}`}>{stat.value}</p>\n                <p className=\"text-sm text-muted-foreground font-semibold mt-1\" data-testid={`text-stat-change-${idx}`}>{stat.change}</p>\n              </div>\n              <div className={`w-12 h-12 rounded-lg ${stat.color} flex items-center justify-center`}>\n                <Icon name={stat.icon} size={24} />\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Recent Activity */}\n      <div className=\"bg-card border border-card-border rounded-2xl shadow-sm overflow-hidden\">\n        <div className=\"p-6 border-b border-border\">\n          <h3 className=\"font-bold text-lg text-foreground\">Atividades Recentes</h3>\n        </div>\n        {recentActivity.length > 0 ? (\n          <div className=\"divide-y divide-border\">\n            {recentActivity.map((activity, idx) => (\n              <div key={idx} className=\"p-6 hover-elevate transition\" data-testid={`activity-${idx}`}>\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                    <Icon name=\"clock\" size={18} className=\"text-primary\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    <p className=\"text-foreground\">\n                      <strong className=\"font-semibold\" data-testid={`text-activity-teacher-${idx}`}>{activity.teacher}</strong>{' '}\n                      {activity.action}{' '}\n                      <strong className=\"font-semibold\" data-testid={`text-activity-project-${idx}`}>{activity.project}</strong>\n                    </p>\n                    <p className=\"text-sm text-muted-foreground mt-1\" data-testid={`text-activity-time-${idx}`}>{activity.time}</p>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"p-12 text-center\">\n            <p className=\"text-muted-foreground\">Nenhuma atividade recente</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":5399},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"server/index-dev.ts":{"content":"import fs from \"node:fs\";\nimport path from \"node:path\";\nimport { type Server } from \"node:http\";\n\nimport { nanoid } from \"nanoid\";\nimport { type Express } from \"express\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\n\nimport viteConfig from \"../vite.config\";\nimport runApp from \"./app\";\n\nexport async function setupVite(app: Express, server: Server) {\n  const viteLogger = createLogger();\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\n(async () => {\n  await runApp(setupVite);\n})();\n","size_bytes":1609},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/SubmitEvidenceModal.tsx":{"content":"import { useState } from \"react\";\nimport { Icon } from \"./Icon\";\nimport type { ProjectWithTeacher } from \"@shared/schema\";\n\ninterface SubmitEvidenceModalProps {\n  project: ProjectWithTeacher;\n  onClose: () => void;\n  onSubmit: (data: { type: 'file' | 'link'; link?: string; comment: string }) => void;\n}\n\nexport function SubmitEvidenceModal({ project, onClose, onSubmit }: SubmitEvidenceModalProps) {\n  const [type, setType] = useState<'file' | 'link'>('file');\n  const [link, setLink] = useState('');\n  const [comment, setComment] = useState('');\n  \n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSubmit({ type, link, comment });\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in\" data-testid=\"modal-submit-evidence\">\n      <div className=\"bg-background rounded-2xl shadow-2xl w-full max-w-md overflow-hidden scale-100 transition-transform\">\n        <div className=\"px-6 py-4 border-b border-border flex justify-between items-center bg-muted/50\">\n          <h3 className=\"font-bold text-foreground\">Enviar Entrega</h3>\n          <button \n            onClick={onClose} \n            data-testid=\"button-close-modal\"\n            className=\"hover-elevate active-elevate-2 p-1 rounded-full transition\"\n          >\n            <Icon name=\"x\" size={20} className=\"text-muted-foreground\" />\n          </button>\n        </div>\n        \n        <form onSubmit={handleSubmit} className=\"p-6\">\n          <p className=\"text-sm text-muted-foreground mb-4\">\n            Atividade: <strong className=\"text-foreground\">{project.deadlineLabel}</strong>\n          </p>\n          \n          <div className=\"flex gap-3 mb-6\">\n            <button \n              type=\"button\"\n              onClick={() => setType('file')}\n              data-testid=\"button-type-file\"\n              className={`flex-1 py-3 rounded-xl border flex flex-col items-center justify-center gap-2 transition-all ${\n                type === 'file' \n                ? 'border-primary bg-primary/10 text-primary shadow-inner' \n                : 'border-border hover-elevate text-muted-foreground'\n              }`}\n            >\n              <Icon name=\"upload\" size={24} />\n              <span className=\"text-xs font-bold uppercase tracking-wide\">Arquivo</span>\n            </button>\n            <button \n              type=\"button\"\n              onClick={() => setType('link')}\n              data-testid=\"button-type-link\"\n              className={`flex-1 py-3 rounded-xl border flex flex-col items-center justify-center gap-2 transition-all ${\n                type === 'link' \n                ? 'border-primary bg-primary/10 text-primary shadow-inner' \n                : 'border-border hover-elevate text-muted-foreground'\n              }`}\n            >\n              <Icon name=\"link\" size={24} />\n              <span className=\"text-xs font-bold uppercase tracking-wide\">Link</span>\n            </button>\n          </div>\n\n          {type === 'file' ? (\n            <div className=\"border-2 border-dashed border-border rounded-xl p-8 text-center hover-elevate transition cursor-pointer group\" data-testid=\"upload-file-area\">\n              <div className=\"w-12 h-12 bg-primary/10 text-primary rounded-full flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform\">\n                <Icon name=\"upload\" size={24} />\n              </div>\n              <p className=\"text-sm text-foreground font-semibold\">Clique para selecionar</p>\n              <p className=\"text-xs text-muted-foreground mt-1\">PDF, DOCX, JPG (Max 10MB)</p>\n            </div>\n          ) : (\n            <div>\n              <label className=\"block text-sm font-semibold text-foreground mb-2\">URL do Trabalho</label>\n              <input \n                type=\"url\" \n                placeholder=\"https://docs.google.com/...\" \n                className=\"w-full p-3 border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none transition bg-background text-foreground\"\n                value={link}\n                onChange={e => setLink(e.target.value)}\n                data-testid=\"input-link-url\"\n              />\n              <p className=\"text-xs text-muted-foreground mt-2 flex items-center gap-1\">\n                <Icon name=\"check\" size={12}/> Drive, YouTube, Canva suportados.\n              </p>\n            </div>\n          )}\n\n          <div className=\"mt-6\">\n            <label className=\"block text-sm font-semibold text-foreground mb-2\">Comentário</label>\n            <textarea \n              className=\"w-full p-3 border border-border rounded-lg h-24 text-sm focus:ring-2 focus:ring-primary outline-none resize-none bg-background text-foreground\" \n              placeholder=\"Adicione uma observação para o professor...\"\n              value={comment}\n              onChange={e => setComment(e.target.value)}\n              data-testid=\"input-comment\"\n            ></textarea>\n          </div>\n\n          <div className=\"mt-6 flex justify-end gap-3\">\n            <button \n              type=\"button\"\n              onClick={onClose} \n              data-testid=\"button-cancel\"\n              className=\"px-4 py-2 text-sm font-semibold text-muted-foreground hover-elevate rounded-lg transition\"\n            >\n              Cancelar\n            </button>\n            <button \n              type=\"submit\"\n              data-testid=\"button-submit-now\"\n              className=\"px-6 py-2 text-sm font-semibold text-primary-foreground bg-primary hover:bg-primary/90 rounded-lg shadow-md shadow-primary/20 flex items-center gap-2 transition hover:-translate-y-0.5\"\n            >\n              Enviar Agora\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n","size_bytes":5785},"client/src/pages/coordinator/teachers.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport type { Teacher } from \"@shared/schema\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Search, Plus, Pencil, UserCheck } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\n\nexport default function TeachersPage() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [editingTeacher, setEditingTeacher] = useState<Teacher | null>(null);\n  const { toast } = useToast();\n\n  const { data: teachers = [], isLoading } = useQuery<Teacher[]>({\n    queryKey: [\"/api/teachers\"],\n  });\n\n  const filteredTeachers = teachers.filter(\n    (teacher) =>\n      teacher.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      teacher.subject.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const handleEdit = (teacher: Teacher) => {\n    setEditingTeacher(teacher);\n    setIsDialogOpen(true);\n  };\n\n  const handleAdd = () => {\n    setEditingTeacher(null);\n    setIsDialogOpen(true);\n  };\n\n  const handleCloseDialog = () => {\n    setIsDialogOpen(false);\n    setEditingTeacher(null);\n  };\n\n  return (\n    <div className=\"flex flex-col h-full p-6 space-y-6\">\n      <div className=\"flex flex-row items-center justify-between gap-4 flex-wrap\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"heading-teachers\">\n            Gestão de Professores\n          </h1>\n          <p className=\"text-muted-foreground\">\n            Gerencie o cadastro de professores da escola\n          </p>\n        </div>\n        <Button onClick={handleAdd} data-testid=\"button-add-teacher\">\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Adicionar Professor\n        </Button>\n      </div>\n\n      <div className=\"relative\">\n        <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4\" />\n        <Input\n          placeholder=\"Buscar por nome ou matéria...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className=\"pl-10\"\n          data-testid=\"input-search\"\n        />\n      </div>\n\n      {isLoading ? (\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {[1, 2, 3].map((i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n                <div className=\"h-10 w-10 bg-muted rounded-full\"></div>\n                <div className=\"flex-1\">\n                  <div className=\"h-4 bg-muted rounded w-3/4 mb-2\"></div>\n                  <div className=\"h-3 bg-muted rounded w-1/2\"></div>\n                </div>\n              </CardHeader>\n            </Card>\n          ))}\n        </div>\n      ) : filteredTeachers.length === 0 ? (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <UserCheck className=\"w-16 h-16 text-muted-foreground mb-4\" />\n            <p className=\"text-muted-foreground\" data-testid=\"text-no-results\">\n              {searchTerm\n                ? \"Nenhum professor encontrado\"\n                : \"Nenhum professor cadastrado\"}\n            </p>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {filteredTeachers.map((teacher) => (\n            <Card\n              key={teacher.id}\n              className=\"hover-elevate\"\n              data-testid={`card-teacher-${teacher.id}`}\n            >\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n                <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                  <Avatar>\n                    <AvatarImage src={teacher.avatar || undefined} />\n                    <AvatarFallback>\n                      {teacher.name\n                        .split(\" \")\n                        .map((n) => n[0])\n                        .join(\"\")\n                        .toUpperCase()\n                        .slice(0, 2)}\n                    </AvatarFallback>\n                  </Avatar>\n                  <div className=\"flex-1 min-w-0\">\n                    <CardTitle\n                      className=\"text-base truncate\"\n                      data-testid={`text-teacher-name-${teacher.id}`}\n                    >\n                      {teacher.name}\n                    </CardTitle>\n                    <p\n                      className=\"text-sm text-muted-foreground truncate\"\n                      data-testid={`text-teacher-subject-${teacher.id}`}\n                    >\n                      {teacher.subject}\n                    </p>\n                  </div>\n                </div>\n                <Button\n                  size=\"icon\"\n                  variant=\"ghost\"\n                  onClick={() => handleEdit(teacher)}\n                  data-testid={`button-edit-teacher-${teacher.id}`}\n                >\n                  <Pencil className=\"w-4 h-4\" />\n                </Button>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex items-center gap-2\">\n                  <Badge variant=\"secondary\" data-testid={`badge-rating-${teacher.id}`}>\n                    ⭐ {teacher.rating || 0}/5\n                  </Badge>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      <TeacherDialog\n        open={isDialogOpen}\n        onClose={handleCloseDialog}\n        teacher={editingTeacher}\n      />\n    </div>\n  );\n}\n\nconst teacherFormSchema = z.object({\n  name: z.string().min(3, \"Nome deve ter no mínimo 3 caracteres\"),\n  subject: z.string().min(2, \"Matéria deve ter no mínimo 2 caracteres\"),\n  userId: z.string().min(1, \"ID do usuário é obrigatório\"),\n  avatar: z.string().optional(),\n  rating: z.number().min(0).max(5).optional(),\n});\n\ntype TeacherFormData = z.infer<typeof teacherFormSchema>;\n\nfunction TeacherDialog({\n  open,\n  onClose,\n  teacher,\n}: {\n  open: boolean;\n  onClose: () => void;\n  teacher: Teacher | null;\n}) {\n  const { toast } = useToast();\n  const isEditing = !!teacher;\n\n  const form = useForm<TeacherFormData>({\n    resolver: zodResolver(teacherFormSchema),\n    defaultValues: {\n      name: teacher?.name || \"\",\n      subject: teacher?.subject || \"\",\n      userId: teacher?.userId || \"\",\n      avatar: teacher?.avatar || \"\",\n      rating: teacher?.rating || 0,\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: TeacherFormData) => {\n      return await apiRequest(\"/api/teachers\", {\n        method: \"POST\",\n        body: JSON.stringify(data),\n        headers: { \"Content-Type\": \"application/json\" },\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/teachers\"] });\n      toast({\n        title: \"Professor criado\",\n        description: \"Professor criado com sucesso!\",\n      });\n      onClose();\n      form.reset();\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao criar professor. Tente novamente.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async (data: Partial<TeacherFormData>) => {\n      return await apiRequest(`/api/teachers/${teacher?.id}`, {\n        method: \"PATCH\",\n        body: JSON.stringify(data),\n        headers: { \"Content-Type\": \"application/json\" },\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/teachers\"] });\n      toast({\n        title: \"Professor atualizado\",\n        description: \"Dados do professor atualizados com sucesso!\",\n      });\n      onClose();\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao atualizar professor. Tente novamente.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: TeacherFormData) => {\n    if (isEditing) {\n      updateMutation.mutate(data);\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent data-testid=\"dialog-teacher-form\">\n        <DialogHeader>\n          <DialogTitle>\n            {isEditing ? \"Editar Professor\" : \"Adicionar Professor\"}\n          </DialogTitle>\n          <DialogDescription>\n            {isEditing\n              ? \"Atualize os dados do professor\"\n              : \"Preencha os dados para criar um novo professor\"}\n          </DialogDescription>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"name\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Nome Completo</FormLabel>\n                  <FormControl>\n                    <Input\n                      placeholder=\"Ex: Maria Silva\"\n                      {...field}\n                      data-testid=\"input-teacher-name\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"subject\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Matéria</FormLabel>\n                  <FormControl>\n                    <Input\n                      placeholder=\"Ex: Matemática\"\n                      {...field}\n                      data-testid=\"input-teacher-subject\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            {!isEditing && (\n              <FormField\n                control={form.control}\n                name=\"userId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>ID do Usuário</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"ID do usuário existente\"\n                        {...field}\n                        data-testid=\"input-teacher-userid\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            )}\n\n            <FormField\n              control={form.control}\n              name=\"rating\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Avaliação (0-5)</FormLabel>\n                  <FormControl>\n                    <Input\n                      type=\"number\"\n                      min=\"0\"\n                      max=\"5\"\n                      step=\"0.1\"\n                      {...field}\n                      onChange={(e) => field.onChange(parseFloat(e.target.value))}\n                      data-testid=\"input-teacher-rating\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <DialogFooter>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                data-testid=\"button-cancel\"\n              >\n                Cancelar\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={createMutation.isPending || updateMutation.isPending}\n                data-testid=\"button-submit\"\n              >\n                {createMutation.isPending || updateMutation.isPending\n                  ? \"Salvando...\"\n                  : isEditing\n                  ? \"Atualizar\"\n                  : \"Criar\"}\n              </Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":12637},"client/src/App.tsx":{"content":"import { Switch, Route, Redirect } from \"wouter\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AuthProvider, useAuth } from \"@/contexts/AuthContext\";\nimport { AppSidebar } from \"@/components/AppSidebar\";\n\n// Auth pages\nimport Login from \"@/pages/login\";\nimport Register from \"@/pages/register\";\n\n// Teacher views\nimport TeacherDashboard from \"@/pages/teacher/dashboard\";\nimport TeacherProjectDetail from \"@/pages/teacher/project-detail\";\nimport TeacherClasses from \"@/pages/teacher/classes\";\nimport TeacherReports from \"@/pages/teacher/reports\";\nimport TeacherRubrics from \"@/pages/teacher/rubrics\";\nimport TeacherBncc from \"@/pages/teacher/bncc\";\nimport TeacherFeedback from \"@/pages/teacher/feedbacks\";\nimport TeacherCalendar from \"@/pages/teacher/calendar\";\n\n// Student views\nimport StudentHome from \"@/pages/student/home\";\nimport StudentProjects from \"@/pages/student/projects\";\nimport StudentCalendar from \"@/pages/student/calendar\";\nimport StudentAchievements from \"@/pages/student/achievements\";\n\n// Coordinator views\nimport CoordinatorKanban from \"@/pages/coordinator/kanban\";\nimport CoordinatorTeachers from \"@/pages/coordinator/teachers\";\nimport CoordinatorStudents from \"@/pages/coordinator/students\";\nimport CoordinatorMetrics from \"@/pages/coordinator/metrics\";\nimport CoordinatorBncc from \"@/pages/coordinator/bncc\";\nimport CoordinatorCalendar from \"@/pages/coordinator/calendar\";\n\nfunction ProtectedRoutes() {\n  const { user, isLoading, logout } = useAuth();\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen bg-gradient-to-br from-primary/20 via-background to-secondary/20\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Carregando...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return <Redirect to=\"/login\" />;\n  }\n\n  // Custom sidebar width\n  const style = {\n    \"--sidebar-width\": \"18rem\",\n    \"--sidebar-width-icon\": \"4rem\",\n  };\n\n  return (\n    <SidebarProvider style={style as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <AppSidebar role={user.role} onLogout={logout} userName={user.name} userAvatar={user.avatar} />\n        <div className=\"flex flex-col flex-1\">\n          <header className=\"flex items-center justify-between p-4 border-b md:hidden\">\n            <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n            <h1 className=\"text-xl font-bold\">BProjetos</h1>\n          </header>\n          <main className=\"flex-1 overflow-auto p-8 bg-gradient-to-br from-primary/5 via-background to-secondary/5\">\n            <div className=\"max-w-7xl mx-auto\">\n              <Switch>\n                {/* Teacher Routes */}\n                {user.role === 'teacher' && (\n                  <>\n                    <Route path=\"/\" component={TeacherDashboard} />\n                    <Route path=\"/teacher/dashboard\" component={TeacherDashboard} />\n                    <Route path=\"/project/:id\" component={TeacherProjectDetail} />\n                    <Route path=\"/classes\" component={TeacherClasses} />\n                    <Route path=\"/reports\" component={TeacherReports} />\n                    <Route path=\"/rubrics\" component={TeacherRubrics} />\n                    <Route path=\"/bncc\" component={TeacherBncc} />\n                    <Route path=\"/feedbacks\" component={TeacherFeedback} />\n                    <Route path=\"/calendar\" component={TeacherCalendar} />\n                  </>\n                )}\n\n                {/* Student Routes */}\n                {user.role === 'student' && (\n                  <>\n                    <Route path=\"/\" component={StudentHome} />\n                    <Route path=\"/projects\" component={StudentProjects} />\n                    <Route path=\"/calendar\" component={StudentCalendar} />\n                    <Route path=\"/achievements\" component={StudentAchievements} />\n                  </>\n                )}\n\n                {/* Coordinator Routes */}\n                {user.role === 'coordinator' && (\n                  <>\n                    <Route path=\"/\" component={CoordinatorKanban} />\n                    <Route path=\"/teachers\" component={CoordinatorTeachers} />\n                    <Route path=\"/students\" component={CoordinatorStudents} />\n                    <Route path=\"/metrics\" component={CoordinatorMetrics} />\n                    <Route path=\"/calendar\" component={CoordinatorCalendar} />\n                    <Route path=\"/bncc\" component={CoordinatorBncc} />\n                  </>\n                )}\n\n                <Route>\n                  <Redirect to=\"/\" />\n                </Route>\n              </Switch>\n            </div>\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/login\" component={Login} />\n      <Route path=\"/register\" component={Register} />\n      <Route component={ProtectedRoutes} />\n    </Switch>\n  );\n}\n\nexport default function App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <AuthProvider>\n          <Router />\n        </AuthProvider>\n        <Toaster />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n","size_bytes":5588},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"replit.md":{"content":"# BProjetos - Educational Project Management Platform\n\n## Overview\nBProjetos is a comprehensive educational project management platform for Brazilian schools. It supports project-based learning with gamification, BNCC (Brazilian National Common Curricular Base) competency tracking, and role-based interfaces for teachers, students, and coordinators. The platform aims to increase student engagement through modern design with glassmorphism effects and professional polish.\n\n## User Preferences\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework & Build System**: React 18 with TypeScript, Vite for fast HMR.\n- **UI Component System**: Radix UI primitives, shadcn/ui components (New York style), custom design system with glassmorphism effects and gradient themes.\n- **Design System**: Typography (Outfit, Plus Jakarta Sans), HSL-based semantic color tokens, Tailwind CSS for styling, four project theme colors (green, blue, purple, red).\n- **State Management**: TanStack Query for server state management and API caching; local React state for UI interactions.\n- **Data Fetching Strategy**: Centralized API request functions, query keys follow REST patterns, 401 handling, credentials included for session.\n\n### Backend Architecture\n- **Server Framework**: Express.js with TypeScript for RESTful API endpoints.\n- **Development vs Production**: Vite middleware for development, static file serving from `dist/public` for production.\n- **API Structure**: RESTful endpoints, Zod schema validation, consistent error handling, JSON response format.\n- **Session Management**: PostgreSQL-backed sessions using `connect-pg-simple`.\n\n### Database Architecture\n- **ORM & Schema Definition**: Drizzle ORM for type-safe operations, PostgreSQL via Neon serverless driver.\n- **Database Schema**:\n    - **Teachers**: User profiles, subject specialization, avatar, rating.\n    - **Projects**: Core entity with title, subject, status, progress, theme, deadlines.\n    - **Rubric Criteria**: Assessment criteria attached to projects.\n    - **Students**: User profiles, email, avatar, XP points, level.\n    - **Achievements**: Gamification badges.\n    - **Student Achievements**: Junction table.\n    - **BNCC Competencies**: Brazilian curriculum standards reference data.\n    - **Project Competencies**: Junction table.\n    - **Submissions**: Student work.\n    - **Classes**: Classroom organization.\n    - **Feedbacks**: Teacher comments on projects.\n    - **Events**: Calendar entries for in-person meetings.\n- **Data Access Pattern**: Storage abstraction layer, UUID-based primary keys, foreign key relationships.\n\n### Role-Based Interface System\n- **Three User Roles**: Teacher, Student, Coordinator, each with specific dashboards and functionalities.\n- **Navigation Architecture**: Single-page application, conditional rendering based on role, shared sidebar with role-specific menu items.\n- **Component Organization**: Pages organized by role (`pages/teacher/*`, `pages/student/*`, `pages/coordinator/*`), shared components, UI primitives from shadcn/ui.\n\n### Feature Specifications\n- **Authentication System**: JWT Token Authentication (signed tokens, 7-day expiration), Bcrypt password hashing, role-based routing, frontend AuthContext with localStorage persistence.\n- **Roster Management**: CRUD operations for teachers and students, search/filter, modal forms with validation.\n- **Spreadsheet Import System**:\n    - **Backend**: Secure endpoint with dual authentication (JWT/session), Multer file upload, XLSX/CSV parsing with automatic column detection.\n    - **Column Normalization**: Case-insensitive, diacritic-insensitive header matching for robust imports.\n    - **Frontend**: SpreadsheetImport component with drag-and-drop, file preview, detailed import results.\n    - **Security**: Teacher/coordinator-only access, validates file types, creates students with default password.\n- **Project Planning System**:\n    - **Schema**: `project_planning` table with objectives, methodology, resources, timeline, expectedOutcomes.\n    - **UI**: Tabbed project detail page (Visão Geral, Planejamento, Avaliação) at `/project/:id`.\n    - **Forms**: react-hook-form with zodResolver, auto-save detection, proper validation.\n    - **Navigation**: Seamless routing from ProjectCard to detail view and back to dashboard.\n- **BNCC PDF Upload & AI Analysis**:\n    - **Backend**: `bncc_documents` table, PDF parsing (`pdf-parse`), Multer for file upload (20MB limit, PDF-only), Coordinator-only access.\n    - **AI Integration**: OpenAI via Replit AI Integrations for extracting structured competencies and analyzing project alignment.\n    - **Project Planning Analysis**: `analyzeProjectPlanning` function analyzes complete project planning against BNCC competencies with coverage percentages and justifications.\n    - **Endpoint**: POST `/api/projects/:id/planning/analyze` validates teacher auth, planning existence, and competencies before analysis.\n- **Teacher Feedback & Calendar System**:\n    - **Feedback**: Teachers can post team-level feedback for projects (create, edit, delete).\n    - **Calendar**: Teachers can schedule in-person meetings with teams (create, edit, delete events).\n    - **Backend**: `feedbacks` and `events` tables, Zod validation, teacher-role enforcement.\n\n## External Dependencies\n\n### Core Libraries\n- `@neondatabase/serverless`: PostgreSQL database driver.\n- `drizzle-orm` & `drizzle-kit`: ORM and schema migration tools.\n- `express`: Web server framework.\n- `react` & `react-dom`: UI library.\n- `@tanstack/react-query`: Server state management.\n- `zod`: Runtime schema validation.\n\n### UI Component Dependencies\n- `@radix-ui/*`: Primitive component packages.\n- `shadcn/ui`: Component library.\n- `tailwindcss`: Utility-first CSS framework.\n- `react-hook-form`: Form state management.\n- `date-fns`: Date manipulation.\n- `lucide-react`: Icon library.\n\n### Development Tools\n- `vite`: Build tool and dev server.\n- `typescript`: Type checking.\n- `tsx`: TypeScript execution for development server.\n- `esbuild`: Production server bundling.\n\n### Third-Party Integrations\n- Google Fonts API: For custom typography.\n- Neon Database: Serverless PostgreSQL hosting.\n- Replit AI Integrations: For BNCC document analysis (powered by OpenAI).\n- `connect-pg-simple`: PostgreSQL-backed session store.","size_bytes":6372},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  url: string,\n  options?: RequestInit,\n): Promise<any> {\n  // Get JWT token from localStorage for authentication\n  const token = localStorage.getItem('bprojetos_token');\n\n  const headers = new Headers(options?.headers);\n  if (token) {\n    headers.set('Authorization', `Bearer ${token}`);\n  }\n\n  const res = await fetch(url, {\n    ...options,\n    headers,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  \n  const contentType = res.headers.get(\"content-type\");\n  if (contentType && contentType.includes(\"application/json\")) {\n    return await res.json();\n  }\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    // Get JWT token from localStorage for authentication\n    const token = localStorage.getItem('bprojetos_token');\n    \n    const headers = new Headers();\n    if (token) {\n      headers.set('Authorization', `Bearer ${token}`);\n    }\n\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n      headers,\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1899},"client/src/pages/coordinator/students.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport type { Student } from \"@shared/schema\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Search, Plus, Pencil, Users } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\n\nexport default function StudentsPage() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  const [editingStudent, setEditingStudent] = useState<Student | null>(null);\n  const { toast } = useToast();\n\n  const { data: students = [], isLoading } = useQuery<Student[]>({\n    queryKey: [\"/api/students\"],\n  });\n\n  const filteredStudents = students.filter(\n    (student) =>\n      student.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      student.email.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const handleEdit = (student: Student) => {\n    setEditingStudent(student);\n    setIsDialogOpen(true);\n  };\n\n  const handleAdd = () => {\n    setEditingStudent(null);\n    setIsDialogOpen(true);\n  };\n\n  const handleCloseDialog = () => {\n    setIsDialogOpen(false);\n    setEditingStudent(null);\n  };\n\n  return (\n    <div className=\"flex flex-col h-full p-6 space-y-6\">\n      <div className=\"flex flex-row items-center justify-between gap-4 flex-wrap\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"heading-students\">\n            Gestão de Alunos\n          </h1>\n          <p className=\"text-muted-foreground\">\n            Gerencie o cadastro de alunos da escola\n          </p>\n        </div>\n        <Button onClick={handleAdd} data-testid=\"button-add-student\">\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Adicionar Aluno\n        </Button>\n      </div>\n\n      <div className=\"relative\">\n        <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4\" />\n        <Input\n          placeholder=\"Buscar por nome ou email...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className=\"pl-10\"\n          data-testid=\"input-search\"\n        />\n      </div>\n\n      {isLoading ? (\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {[1, 2, 3].map((i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n                <div className=\"h-10 w-10 bg-muted rounded-full\"></div>\n                <div className=\"flex-1\">\n                  <div className=\"h-4 bg-muted rounded w-3/4 mb-2\"></div>\n                  <div className=\"h-3 bg-muted rounded w-1/2\"></div>\n                </div>\n              </CardHeader>\n            </Card>\n          ))}\n        </div>\n      ) : filteredStudents.length === 0 ? (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <Users className=\"w-16 h-16 text-muted-foreground mb-4\" />\n            <p className=\"text-muted-foreground\" data-testid=\"text-no-results\">\n              {searchTerm\n                ? \"Nenhum aluno encontrado\"\n                : \"Nenhum aluno cadastrado\"}\n            </p>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {filteredStudents.map((student) => (\n            <Card\n              key={student.id}\n              className=\"hover-elevate\"\n              data-testid={`card-student-${student.id}`}\n            >\n              <CardHeader className=\"flex flex-row items-center justify-between gap-2 space-y-0 pb-2\">\n                <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                  <Avatar>\n                    <AvatarImage src={student.avatar || undefined} />\n                    <AvatarFallback>\n                      {student.name\n                        .split(\" \")\n                        .map((n) => n[0])\n                        .join(\"\")\n                        .toUpperCase()\n                        .slice(0, 2)}\n                    </AvatarFallback>\n                  </Avatar>\n                  <div className=\"flex-1 min-w-0\">\n                    <CardTitle\n                      className=\"text-base truncate\"\n                      data-testid={`text-student-name-${student.id}`}\n                    >\n                      {student.name}\n                    </CardTitle>\n                    <p\n                      className=\"text-sm text-muted-foreground truncate\"\n                      data-testid={`text-student-email-${student.id}`}\n                    >\n                      {student.email}\n                    </p>\n                  </div>\n                </div>\n                <Button\n                  size=\"icon\"\n                  variant=\"ghost\"\n                  onClick={() => handleEdit(student)}\n                  data-testid={`button-edit-student-${student.id}`}\n                >\n                  <Pencil className=\"w-4 h-4\" />\n                </Button>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex items-center gap-2 flex-wrap\">\n                  <Badge variant=\"secondary\" data-testid={`badge-level-${student.id}`}>\n                    Nível {student.level || 1}\n                  </Badge>\n                  <Badge variant=\"outline\" data-testid={`badge-xp-${student.id}`}>\n                    {student.xp || 0} XP\n                  </Badge>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      <StudentDialog\n        open={isDialogOpen}\n        onClose={handleCloseDialog}\n        student={editingStudent}\n      />\n    </div>\n  );\n}\n\nconst studentFormSchema = z.object({\n  name: z.string().min(3, \"Nome deve ter no mínimo 3 caracteres\"),\n  email: z.string().email(\"Email inválido\"),\n  userId: z.string().min(1, \"ID do usuário é obrigatório\"),\n  avatar: z.string().optional(),\n  xp: z.number().min(0).optional(),\n  level: z.number().min(1).optional(),\n});\n\ntype StudentFormData = z.infer<typeof studentFormSchema>;\n\nfunction StudentDialog({\n  open,\n  onClose,\n  student,\n}: {\n  open: boolean;\n  onClose: () => void;\n  student: Student | null;\n}) {\n  const { toast } = useToast();\n  const isEditing = !!student;\n\n  const form = useForm<StudentFormData>({\n    resolver: zodResolver(studentFormSchema),\n    defaultValues: {\n      name: student?.name || \"\",\n      email: student?.email || \"\",\n      userId: student?.userId || \"\",\n      avatar: student?.avatar || \"\",\n      xp: student?.xp || 0,\n      level: student?.level || 1,\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: StudentFormData) => {\n      return await apiRequest(\"/api/students\", {\n        method: \"POST\",\n        body: JSON.stringify(data),\n        headers: { \"Content-Type\": \"application/json\" },\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/students\"] });\n      toast({\n        title: \"Aluno criado\",\n        description: \"Aluno criado com sucesso!\",\n      });\n      onClose();\n      form.reset();\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao criar aluno. Tente novamente.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async (data: Partial<StudentFormData>) => {\n      return await apiRequest(`/api/students/${student?.id}`, {\n        method: \"PATCH\",\n        body: JSON.stringify(data),\n        headers: { \"Content-Type\": \"application/json\" },\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/students\"] });\n      toast({\n        title: \"Aluno atualizado\",\n        description: \"Dados do aluno atualizados com sucesso!\",\n      });\n      onClose();\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Erro ao atualizar aluno. Tente novamente.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: StudentFormData) => {\n    if (isEditing) {\n      updateMutation.mutate(data);\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent data-testid=\"dialog-student-form\">\n        <DialogHeader>\n          <DialogTitle>\n            {isEditing ? \"Editar Aluno\" : \"Adicionar Aluno\"}\n          </DialogTitle>\n          <DialogDescription>\n            {isEditing\n              ? \"Atualize os dados do aluno\"\n              : \"Preencha os dados para criar um novo aluno\"}\n          </DialogDescription>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"name\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Nome Completo</FormLabel>\n                  <FormControl>\n                    <Input\n                      placeholder=\"Ex: João Silva\"\n                      {...field}\n                      data-testid=\"input-student-name\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"email\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Email</FormLabel>\n                  <FormControl>\n                    <Input\n                      type=\"email\"\n                      placeholder=\"joao@aluno.com\"\n                      {...field}\n                      data-testid=\"input-student-email\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            {!isEditing && (\n              <FormField\n                control={form.control}\n                name=\"userId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>ID do Usuário</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"ID do usuário existente\"\n                        {...field}\n                        data-testid=\"input-student-userid\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            )}\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"xp\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>XP</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"number\"\n                        min=\"0\"\n                        {...field}\n                        onChange={(e) => field.onChange(parseInt(e.target.value))}\n                        data-testid=\"input-student-xp\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"level\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Nível</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"number\"\n                        min=\"1\"\n                        {...field}\n                        onChange={(e) => field.onChange(parseInt(e.target.value))}\n                        data-testid=\"input-student-level\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <DialogFooter>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={onClose}\n                data-testid=\"button-cancel\"\n              >\n                Cancelar\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={createMutation.isPending || updateMutation.isPending}\n                data-testid=\"button-submit\"\n              >\n                {createMutation.isPending || updateMutation.isPending\n                  ? \"Salvando...\"\n                  : isEditing\n                  ? \"Atualizar\"\n                  : \"Criar\"}\n              </Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":13473},"client/src/components/CreateProjectModal.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { insertProjectSchema } from \"@shared/schema\";\nimport type { InsertProject } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Icon } from \"@/components/Icon\";\nimport { z } from \"zod\";\n\n// Extended schema with proper nullable handling and coercion\nconst projectFormSchema = z.object({\n  title: z.string().min(1, \"Título é obrigatório\"),\n  subject: z.string().min(1, \"Disciplina é obrigatória\"),\n  status: z.string().default(\"Planejamento\"),\n  theme: z.string().default(\"blue\"),\n  teacherId: z.string().min(1, \"ID do professor é obrigatório\"),\n  progress: z.coerce.number().int().min(0).max(100).default(0),\n  students: z.coerce.number().int().gte(1, \"Número de alunos deve ser pelo menos 1\").default(1),\n  delayed: z.boolean().default(false),\n  description: z.string().nullable().transform(val => (val?.trim() ? val.trim() : null)).default(null),\n  nextDeadline: z.string().nullable().transform(val => (val?.trim() ? val.trim() : null)).default(null),\n  deadlineLabel: z.string().nullable().transform(val => (val?.trim() ? val.trim() : null)).default(null),\n});\n\ntype ProjectFormValues = z.input<typeof projectFormSchema>;\n\nexport function CreateProjectModal() {\n  const [open, setOpen] = useState(false);\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const teacherId = user?.roleData?.id;\n\n  // Don't render until teacherId is available\n  if (!teacherId) {\n    return null;\n  }\n\n  const form = useForm<ProjectFormValues>({\n    resolver: zodResolver(projectFormSchema),\n    defaultValues: {\n      title: \"\",\n      subject: \"\",\n      status: \"Planejamento\",\n      progress: 0,\n      students: 1,\n      theme: \"blue\",\n      teacherId: teacherId,\n      delayed: false,\n      description: null,\n      nextDeadline: null,\n      deadlineLabel: null,\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertProject) => {\n      return await apiRequest(\"/api/projects\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(data),\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/projects\"] });\n      toast({\n        title: \"Projeto criado!\",\n        description: \"O novo projeto foi adicionado com sucesso.\",\n      });\n      setOpen(false);\n      form.reset({\n        title: \"\",\n        subject: \"\",\n        status: \"Planejamento\",\n        progress: 0,\n        students: 1,\n        theme: \"blue\",\n        teacherId: teacherId,\n        delayed: false,\n        description: null,\n        nextDeadline: null,\n        deadlineLabel: null,\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao criar projeto\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: z.output<typeof projectFormSchema>) => {\n    // Schema transforms have already ensured correct types\n    const payload: InsertProject = data as InsertProject;\n    createMutation.mutate(payload);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button className=\"flex items-center gap-2\" data-testid=\"button-new-project\">\n          <Icon name=\"plus\" size={18} />\n          Novo Projeto\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"sm:max-w-[600px]\" data-testid=\"modal-create-project\">\n        <DialogHeader>\n          <DialogTitle>Criar Novo Projeto</DialogTitle>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"title\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Título do Projeto *</FormLabel>\n                  <FormControl>\n                    <Input \n                      placeholder=\"Ex: Sustentabilidade na Escola\" \n                      {...field} \n                      data-testid=\"input-title\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"subject\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Disciplina *</FormLabel>\n                  <FormControl>\n                    <Input \n                      placeholder=\"Ex: Ciências, Matemática\" \n                      {...field} \n                      data-testid=\"input-subject\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"description\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Descrição</FormLabel>\n                  <FormControl>\n                    <Textarea \n                      placeholder=\"Descreva o objetivo do projeto...\" \n                      value={field.value ?? \"\"}\n                      onChange={(e) => field.onChange(e.target.value || null)}\n                      onBlur={field.onBlur}\n                      name={field.name}\n                      ref={field.ref}\n                      data-testid=\"input-description\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"theme\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Cor do Tema *</FormLabel>\n                    <Select onValueChange={field.onChange} defaultValue={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-theme\">\n                          <SelectValue placeholder=\"Selecione uma cor\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"green\">Verde</SelectItem>\n                        <SelectItem value=\"blue\">Azul</SelectItem>\n                        <SelectItem value=\"purple\">Roxo</SelectItem>\n                        <SelectItem value=\"red\">Vermelho</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"students\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Número de Alunos *</FormLabel>\n                    <FormControl>\n                      <Input \n                        type=\"number\" \n                        min={1}\n                        value={field.value ?? \"\"}\n                        onChange={(e) => {\n                          const value = e.target.valueAsNumber;\n                          field.onChange(Number.isNaN(value) ? \"\" : value);\n                        }}\n                        onBlur={field.onBlur}\n                        name={field.name}\n                        ref={field.ref}\n                        data-testid=\"input-students\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"nextDeadline\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Próximo Prazo</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Ex: 15 de Dezembro\" \n                        value={field.value ?? \"\"}\n                        onChange={(e) => field.onChange(e.target.value || null)}\n                        onBlur={field.onBlur}\n                        name={field.name}\n                        ref={field.ref}\n                        data-testid=\"input-deadline\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"deadlineLabel\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Tipo de Prazo</FormLabel>\n                    <FormControl>\n                      <Input \n                        placeholder=\"Ex: Entrega Final\" \n                        value={field.value ?? \"\"}\n                        onChange={(e) => field.onChange(e.target.value || null)}\n                        onBlur={field.onBlur}\n                        name={field.name}\n                        ref={field.ref}\n                        data-testid=\"input-deadline-label\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"flex justify-end gap-2 pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => setOpen(false)}\n                data-testid=\"button-cancel\"\n              >\n                Cancelar\n              </Button>\n              <Button \n                type=\"submit\" \n                disabled={createMutation.isPending}\n                data-testid=\"button-submit\"\n              >\n                {createMutation.isPending ? \"Criando...\" : \"Criar Projeto\"}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":10798},"server/services/bnccAiService.ts":{"content":"import OpenAI from \"openai\";\nimport type { BnccCompetency, InsertBnccCompetency } from \"@shared/schema\";\n\n// Initialize OpenAI client with Replit AI Integrations\nconst openai = new OpenAI({\n  baseURL: process.env.AI_INTEGRATIONS_OPENAI_BASE_URL,\n  apiKey: process.env.AI_INTEGRATIONS_OPENAI_API_KEY,\n});\n\nexport interface ExtractedCompetency {\n  name: string;\n  category: \"Geral\" | \"Específica\";\n  description: string;\n}\n\n/**\n * Extract BNCC competencies from PDF text content using AI\n */\nexport async function extractCompetenciesFromText(pdfText: string): Promise<ExtractedCompetency[]> {\n  try {\n    const prompt = `Você é um especialista em educação brasileira e na Base Nacional Comum Curricular (BNCC).\n\nAnalise o texto extraído do documento da BNCC fornecido abaixo e extraia TODAS as competências gerais e específicas mencionadas.\n\nPara cada competência, forneça:\n- name: O nome ou título da competência\n- category: \"Geral\" ou \"Específica\"\n- description: Uma descrição clara e concisa da competência\n\nRetorne as competências em formato JSON array com esta estrutura:\n[\n  {\n    \"name\": \"Nome da Competência\",\n    \"category\": \"Geral\",\n    \"description\": \"Descrição da competência...\"\n  }\n]\n\nTEXTO DA BNCC:\n${pdfText.substring(0, 50000)} \n\nRetorne APENAS o array JSON, sem nenhum texto adicional.`;\n\n    const completion = await openai.chat.completions.create({\n      model: \"gpt-4o-mini\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"Você é um assistente especializado em análise de documentos educacionais brasileiros, especialmente a BNCC. Sempre retorne respostas em formato JSON válido.\"\n        },\n        {\n          role: \"user\",\n          content: prompt\n        }\n      ],\n      temperature: 0.3,\n      max_tokens: 4000,\n    });\n\n    const responseText = completion.choices[0]?.message?.content || \"[]\";\n    \n    // Extract JSON from response (handle cases where AI adds markdown code blocks)\n    let jsonText = responseText.trim();\n    if (jsonText.startsWith(\"```json\")) {\n      jsonText = jsonText.replace(/```json\\n?/g, \"\").replace(/```\\n?/g, \"\").trim();\n    } else if (jsonText.startsWith(\"```\")) {\n      jsonText = jsonText.replace(/```\\n?/g, \"\").trim();\n    }\n    \n    const competencies: ExtractedCompetency[] = JSON.parse(jsonText);\n    return competencies;\n  } catch (error) {\n    console.error(\"[BNCC AI Service] Error extracting competencies:\", error);\n    throw new Error(\"Failed to extract competencies from PDF text\");\n  }\n}\n\n/**\n * Analyze a project planning and suggest BNCC competencies alignment\n */\nexport async function analyzeProjectPlanning(\n  projectTitle: string,\n  projectSubject: string,\n  planning: {\n    objectives?: string;\n    methodology?: string;\n    resources?: string;\n    timeline?: string;\n    expectedOutcomes?: string;\n  },\n  availableCompetencies: BnccCompetency[]\n): Promise<{ competencyId: string; coverage: number; justification: string }[]> {\n  try {\n    const competenciesList = availableCompetencies.map(c => \n      `ID: ${c.id}\\nNome: ${c.name}\\nCategoria: ${c.category}\\nDescrição: ${c.description || 'N/A'}`\n    ).join(\"\\n\\n\");\n\n    const prompt = `Você é um especialista em educação e alinhamento curricular com a BNCC.\n\nAnalise o planejamento do projeto escolar descrito abaixo e determine quais competências da BNCC ele desenvolve e em que grau (porcentagem de 0-100%).\n\nPROJETO:\nTítulo: ${projectTitle}\nDisciplina: ${projectSubject}\n\nPLANEJAMENTO:\nObjetivos: ${planning.objectives || 'Não fornecido'}\nMetodologia: ${planning.methodology || 'Não fornecida'}\nRecursos: ${planning.resources || 'Não fornecidos'}\nCronograma: ${planning.timeline || 'Não fornecido'}\nResultados Esperados: ${planning.expectedOutcomes || 'Não fornecidos'}\n\nCOMPETÊNCIAS BNCC DISPONÍVEIS:\n${competenciesList}\n\nPara cada competência relevante ao projeto, retorne:\n- competencyId: O ID da competência\n- coverage: Porcentagem de cobertura (0-100) que indica o quanto o projeto desenvolve essa competência\n- justification: Uma breve justificação de por que essa competência se alinha com o projeto\n\nRetorne APENAS competências com coverage >= 30%.\n\nFormato de resposta (JSON array):\n[\n  {\n    \"competencyId\": \"id-da-competencia\",\n    \"coverage\": 85,\n    \"justification\": \"Este projeto desenvolve fortemente esta competência porque...\"\n  }\n]\n\nRetorne APENAS o array JSON, sem nenhum texto adicional.`;\n\n    const completion = await openai.chat.completions.create({\n      model: \"gpt-4o-mini\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"Você é um assistente especializado em análise de alinhamento curricular com a BNCC. Sempre retorne respostas em formato JSON válido.\"\n        },\n        {\n          role: \"user\",\n          content: prompt\n        }\n      ],\n      temperature: 0.4,\n      max_tokens: 2000,\n    });\n\n    const responseText = completion.choices[0]?.message?.content || \"[]\";\n    \n    // Extract JSON from response\n    let jsonText = responseText.trim();\n    if (jsonText.startsWith(\"```json\")) {\n      jsonText = jsonText.replace(/```json\\n?/g, \"\").replace(/```\\n?/g, \"\").trim();\n    } else if (jsonText.startsWith(\"```\")) {\n      jsonText = jsonText.replace(/```\\n?/g, \"\").trim();\n    }\n    \n    const alignments = JSON.parse(jsonText);\n    return alignments;\n  } catch (error) {\n    console.error(\"[BNCC AI Service] Error analyzing project planning:\", error);\n    throw new Error(\"Failed to analyze project planning\");\n  }\n}\n\n/**\n * Analyze a project and suggest BNCC competencies alignment (legacy function)\n */\nexport async function analyzeProjectAlignment(\n  projectTitle: string,\n  projectSubject: string,\n  projectDescription: string | null,\n  availableCompetencies: BnccCompetency[]\n): Promise<{ competencyId: string; coverage: number; justification: string }[]> {\n  try {\n    const competenciesList = availableCompetencies.map(c => \n      `ID: ${c.id}\\nNome: ${c.name}\\nCategoria: ${c.category}\\nDescrição: ${c.description || 'N/A'}`\n    ).join(\"\\n\\n\");\n\n    const prompt = `Você é um especialista em educação e alinhamento curricular com a BNCC.\n\nAnalise o projeto escolar descrito abaixo e determine quais competências da BNCC ele desenvolve e em que grau (porcentagem de 0-100%).\n\nPROJETO:\nTítulo: ${projectTitle}\nDisciplina: ${projectSubject}\nDescrição: ${projectDescription || 'Não fornecida'}\n\nCOMPETÊNCIAS BNCC DISPONÍVEIS:\n${competenciesList}\n\nPara cada competência relevante ao projeto, retorne:\n- competencyId: O ID da competência\n- coverage: Porcentagem de cobertura (0-100) que indica o quanto o projeto desenvolve essa competência\n- justification: Uma breve justificação de por que essa competência se alinha com o projeto\n\nRetorne APENAS competências com coverage >= 30%.\n\nFormato de resposta (JSON array):\n[\n  {\n    \"competencyId\": \"id-da-competencia\",\n    \"coverage\": 85,\n    \"justification\": \"Este projeto desenvolve fortemente esta competência porque...\"\n  }\n]\n\nRetorne APENAS o array JSON, sem nenhum texto adicional.`;\n\n    const completion = await openai.chat.completions.create({\n      model: \"gpt-4o-mini\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"Você é um assistente especializado em análise de alinhamento curricular com a BNCC. Sempre retorne respostas em formato JSON válido.\"\n        },\n        {\n          role: \"user\",\n          content: prompt\n        }\n      ],\n      temperature: 0.4,\n      max_tokens: 2000,\n    });\n\n    const responseText = completion.choices[0]?.message?.content || \"[]\";\n    \n    // Extract JSON from response\n    let jsonText = responseText.trim();\n    if (jsonText.startsWith(\"```json\")) {\n      jsonText = jsonText.replace(/```json\\n?/g, \"\").replace(/```\\n?/g, \"\").trim();\n    } else if (jsonText.startsWith(\"```\")) {\n      jsonText = jsonText.replace(/```\\n?/g, \"\").trim();\n    }\n    \n    const alignments = JSON.parse(jsonText);\n    return alignments;\n  } catch (error) {\n    console.error(\"[BNCC AI Service] Error analyzing project alignment:\", error);\n    throw new Error(\"Failed to analyze project alignment\");\n  }\n}\n","size_bytes":8113},"client/src/pages/coordinator/bncc.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Upload, FileText, CheckCircle2, XCircle, Loader2, BookOpen } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport type { BnccDocument } from \"@shared/schema\";\n\nexport default function BnccPage() {\n  const { toast } = useToast();\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n\n  const { data: documents, isLoading } = useQuery<BnccDocument[]>({\n    queryKey: [\"/api/bncc-documents\"],\n  });\n\n  const uploadMutation = useMutation({\n    mutationFn: async (file: File) => {\n      const formData = new FormData();\n      formData.append(\"pdf\", file);\n\n      const token = localStorage.getItem(\"token\");\n      const response = await fetch(\"/api/bncc-documents/upload\", {\n        method: \"POST\",\n        headers: {\n          Authorization: token ? `Bearer ${token}` : \"\",\n        },\n        body: formData,\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.error || \"Erro ao fazer upload do documento\");\n      }\n\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/bncc-documents\"] });\n      setSelectedFile(null);\n      toast({\n        title: \"Upload realizado com sucesso\",\n        description: \"O documento BNCC está sendo processado. As competências serão extraídas automaticamente.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Erro ao fazer upload\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type !== \"application/pdf\") {\n        toast({\n          title: \"Tipo de arquivo inválido\",\n          description: \"Por favor, selecione um arquivo PDF.\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      if (file.size > 20 * 1024 * 1024) {\n        toast({\n          title: \"Arquivo muito grande\",\n          description: \"O tamanho máximo é 20MB.\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n      setSelectedFile(file);\n    }\n  };\n\n  const handleUpload = () => {\n    if (selectedFile) {\n      uploadMutation.mutate(selectedFile);\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \"completed\":\n        return <CheckCircle2 className=\"h-5 w-5 text-green-500\" />;\n      case \"failed\":\n        return <XCircle className=\"h-5 w-5 text-red-500\" />;\n      case \"processing\":\n        return <Loader2 className=\"h-5 w-5 text-blue-500 animate-spin\" />;\n      default:\n        return <FileText className=\"h-5 w-5 text-muted-foreground\" />;\n    }\n  };\n\n  const getStatusText = (status: string) => {\n    switch (status) {\n      case \"completed\":\n        return \"Concluído\";\n      case \"failed\":\n        return \"Falhou\";\n      case \"processing\":\n        return \"Processando...\";\n      default:\n        return \"Pendente\";\n    }\n  };\n\n  return (\n    <div className=\"space-y-6 p-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold tracking-tight\">Documentos BNCC</h1>\n        <p className=\"text-muted-foreground mt-2\">\n          Faça upload do documento completo da BNCC para análise automática de competências\n        </p>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Upload className=\"h-5 w-5\" />\n            Upload de Documento BNCC\n          </CardTitle>\n          <CardDescription>\n            Carregue o PDF oficial da BNCC. Nossa IA extrairá automaticamente todas as competências\n            e habilidades para análise de alinhamento de projetos.\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex-1\">\n              <input\n                type=\"file\"\n                accept=\".pdf\"\n                onChange={handleFileSelect}\n                className=\"hidden\"\n                id=\"pdf-upload\"\n                data-testid=\"input-pdf-file\"\n              />\n              <label htmlFor=\"pdf-upload\">\n                <Button\n                  variant=\"outline\"\n                  className=\"w-full\"\n                  asChild\n                  disabled={uploadMutation.isPending}\n                  data-testid=\"button-select-pdf\"\n                >\n                  <span className=\"cursor-pointer flex items-center justify-center gap-2\">\n                    <FileText className=\"h-4 w-4\" />\n                    {selectedFile ? selectedFile.name : \"Selecionar arquivo PDF\"}\n                  </span>\n                </Button>\n              </label>\n            </div>\n            <Button\n              onClick={handleUpload}\n              disabled={!selectedFile || uploadMutation.isPending}\n              data-testid=\"button-upload-pdf\"\n            >\n              {uploadMutation.isPending ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Enviando...\n                </>\n              ) : (\n                <>\n                  <Upload className=\"mr-2 h-4 w-4\" />\n                  Fazer Upload\n                </>\n              )}\n            </Button>\n          </div>\n          <p className=\"text-sm text-muted-foreground\">\n            Tamanho máximo: 20MB. Apenas arquivos PDF são aceitos.\n          </p>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <BookOpen className=\"h-5 w-5\" />\n            Documentos Carregados\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {isLoading ? (\n            <div className=\"flex items-center justify-center py-8\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n            </div>\n          ) : documents && documents.length > 0 ? (\n            <div className=\"space-y-3\">\n              {documents.map((doc) => (\n                <div\n                  key={doc.id}\n                  className=\"flex items-center justify-between p-4 rounded-lg border hover-elevate\"\n                  data-testid={`card-bncc-document-${doc.id}`}\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <FileText className=\"h-8 w-8 text-primary\" />\n                    <div>\n                      <p className=\"font-medium\" data-testid={`text-filename-${doc.id}`}>\n                        {doc.filename}\n                      </p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {doc.competenciesExtracted} competências extraídas\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    {getStatusIcon(doc.processingStatus)}\n                    <span\n                      className=\"text-sm font-medium\"\n                      data-testid={`text-status-${doc.id}`}\n                    >\n                      {getStatusText(doc.processingStatus)}\n                    </span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              <FileText className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n              <p>Nenhum documento carregado ainda</p>\n              <p className=\"text-sm mt-1\">\n                Faça upload do documento BNCC para começar\n              </p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":8014},"client/src/components/CreateClassModal.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { Icon } from \"@/components/Icon\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useAuth } from \"@/contexts/AuthContext\";\n\nconst classFormSchema = z.object({\n  name: z.string().min(1, \"Nome da turma é obrigatório\"),\n  studentCount: z.number().min(1, \"Número de alunos deve ser maior que zero\").default(0),\n  engagement: z.number().min(0).max(100).default(0),\n});\n\ntype ClassFormValues = z.infer<typeof classFormSchema>;\n\nexport function CreateClassModal() {\n  const { toast } = useToast();\n  const { user } = useAuth();\n  const [open, setOpen] = useState(false);\n  \n  const teacherId = user?.roleData?.id;\n\n  const form = useForm<ClassFormValues>({\n    resolver: zodResolver(classFormSchema),\n    defaultValues: {\n      name: \"\",\n      studentCount: 0,\n      engagement: 0,\n    },\n  });\n\n  const createClassMutation = useMutation({\n    mutationFn: async (data: ClassFormValues) => {\n      if (!teacherId) {\n        throw new Error(\"ID do professor não encontrado\");\n      }\n      \n      return apiRequest(\"/api/classes\", {\n        method: \"POST\",\n        body: JSON.stringify({\n          ...data,\n          teacherId,\n        }),\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/teachers\", teacherId, \"classes\"] });\n      toast({\n        title: \"Turma criada com sucesso!\",\n        description: \"A nova turma foi adicionada.\",\n      });\n      setOpen(false);\n      form.reset();\n    },\n    onError: (error: any) => {\n      console.error(\"Erro ao criar turma:\", error);\n      toast({\n        title: \"Erro ao criar turma\",\n        description: error.message || \"Ocorreu um erro ao criar a turma. Tente novamente.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: ClassFormValues) => {\n    createClassMutation.mutate(data);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button \n          className=\"shadow-md\" \n          data-testid=\"button-create-class\"\n        >\n          <Icon name=\"plus\" size={18} className=\"mr-2\" />\n          Nova Turma\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle>Criar Nova Turma</DialogTitle>\n          <DialogDescription>\n            Adicione uma nova turma ao sistema. Preencha os dados abaixo.\n          </DialogDescription>\n        </DialogHeader>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"name\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Nome da Turma</FormLabel>\n                  <FormControl>\n                    <Input \n                      placeholder=\"Ex: 1º Ano A, 9º Ano Manhã...\" \n                      {...field} \n                      data-testid=\"input-class-name\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"studentCount\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Número de Alunos</FormLabel>\n                  <FormControl>\n                    <Input \n                      type=\"number\"\n                      placeholder=\"0\" \n                      {...field}\n                      onChange={(e) => field.onChange(parseInt(e.target.value) || 0)}\n                      data-testid=\"input-student-count\"\n                    />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"engagement\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Engajamento Inicial (%)</FormLabel>\n                  <FormControl>\n                    <div className=\"space-y-2\">\n                      <Input \n                        type=\"range\"\n                        min=\"0\"\n                        max=\"100\"\n                        {...field}\n                        onChange={(e) => field.onChange(parseInt(e.target.value))}\n                        data-testid=\"slider-engagement\"\n                        className=\"cursor-pointer\"\n                      />\n                      <div className=\"text-sm text-muted-foreground text-center\">\n                        {field.value}%\n                      </div>\n                    </div>\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex justify-end gap-3 pt-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => {\n                  setOpen(false);\n                  form.reset();\n                }}\n                data-testid=\"button-cancel\"\n              >\n                Cancelar\n              </Button>\n              <Button \n                type=\"submit\" \n                disabled={createClassMutation.isPending}\n                data-testid=\"button-submit\"\n              >\n                {createClassMutation.isPending ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin mr-2\"></div>\n                    Criando...\n                  </>\n                ) : (\n                  <>\n                    <Icon name=\"check\" size={16} className=\"mr-2\" />\n                    Criar Turma\n                  </>\n                )}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":6510},"client/src/components/ProjectDetailsModal.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Icon } from \"@/components/Icon\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport type { ProjectWithTeacher, RubricCriteria } from \"@shared/schema\";\n\ninterface ProjectDetailsModalProps {\n  project: ProjectWithTeacher;\n  children?: React.ReactNode;\n}\n\nexport function ProjectDetailsModal({ project, children }: ProjectDetailsModalProps) {\n  const { data: rubrics = [] } = useQuery<RubricCriteria[]>({\n    queryKey: [`/api/rubrics/${project.id}`],\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"Planejamento\": return \"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300\";\n      case \"Em Andamento\": return \"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300\";\n      case \"Para Avaliação\": return \"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300\";\n      case \"Concluído\": return \"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300\";\n      default: return \"bg-muted text-muted-foreground\";\n    }\n  };\n\n  const stages = [\n    { name: \"Pesquisa\", description: \"Investigação e coleta de informações\", completed: project.progress >= 25 },\n    { name: \"Prototipagem\", description: \"Desenvolvimento de protótipos e ideias\", completed: project.progress >= 50 },\n    { name: \"Implementação\", description: \"Execução do projeto\", completed: project.progress >= 75 },\n    { name: \"Apresentação\", description: \"Entrega e demonstração final\", completed: project.progress >= 100 },\n  ];\n\n  return (\n    <Dialog>\n      <DialogTrigger asChild>\n        {children || (\n          <Button variant=\"outline\" size=\"sm\" data-testid={`button-details-${project.id}`}>\n            <Icon name=\"eye\" size={16} className=\"mr-2\" />\n            Ver Detalhes\n          </Button>\n        )}\n      </DialogTrigger>\n      <DialogContent className=\"sm:max-w-[700px] max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl\">{project.title}</DialogTitle>\n          <DialogDescription className=\"flex items-center gap-2 mt-2\">\n            <Badge className={getStatusColor(project.status)}>\n              {project.status}\n            </Badge>\n            <span className=\"text-sm text-muted-foreground\">\n              {project.subject}\n            </span>\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-6 py-4\">\n          {/* Progress */}\n          <div>\n            <div className=\"flex justify-between items-center mb-2\">\n              <h3 className=\"font-semibold text-foreground\">Progresso do Projeto</h3>\n              <span className=\"text-sm font-bold text-primary\">{project.progress}%</span>\n            </div>\n            <div className=\"w-full bg-muted h-3 rounded-full overflow-hidden\">\n              <div \n                className=\"h-full bg-primary rounded-full transition-all duration-500\"\n                style={{ width: `${project.progress}%` }}\n              ></div>\n            </div>\n          </div>\n\n          {/* Stages */}\n          <div>\n            <h3 className=\"font-semibold text-foreground mb-4\">Etapas do Projeto</h3>\n            <div className=\"space-y-3\">\n              {stages.map((stage, idx) => (\n                <div \n                  key={idx} \n                  className={`flex items-start gap-3 p-4 rounded-lg border ${\n                    stage.completed \n                      ? \"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800\" \n                      : \"bg-muted/50 border-border\"\n                  }`}\n                  data-testid={`stage-${idx}`}\n                >\n                  <div className={`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${\n                    stage.completed \n                      ? \"bg-green-500 text-white\" \n                      : \"bg-muted text-muted-foreground\"\n                  }`}>\n                    {stage.completed ? (\n                      <Icon name=\"check\" size={18} />\n                    ) : (\n                      <span className=\"text-sm font-bold\">{idx + 1}</span>\n                    )}\n                  </div>\n                  <div className=\"flex-1\">\n                    <h4 className=\"font-semibold text-foreground\">{stage.name}</h4>\n                    <p className=\"text-sm text-muted-foreground mt-1\">{stage.description}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Rubrics */}\n          {rubrics.length > 0 && (\n            <div>\n              <h3 className=\"font-semibold text-foreground mb-4\">Critérios de Avaliação</h3>\n              <div className=\"space-y-2\">\n                {rubrics.map((rubric) => (\n                  <div \n                    key={rubric.id} \n                    className=\"flex justify-between items-center p-3 bg-muted/50 rounded-lg border border-border\"\n                    data-testid={`rubric-${rubric.id}`}\n                  >\n                    <span className=\"text-sm font-medium text-foreground\">{rubric.criteria}</span>\n                    <Badge variant=\"outline\">{rubric.weight}%</Badge>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Metadata */}\n          <div className=\"grid grid-cols-2 gap-4 pt-4 border-t border-border\">\n            <div>\n              <p className=\"text-xs text-muted-foreground mb-1\">Próximo Prazo</p>\n              <p className=\"text-sm font-semibold text-foreground flex items-center gap-1\">\n                <Icon name=\"calendar\" size={14} />\n                {project.nextDeadline ? new Date(project.nextDeadline).toLocaleDateString('pt-BR') : 'Não definido'}\n              </p>\n            </div>\n            <div>\n              <p className=\"text-xs text-muted-foreground mb-1\">Alunos Participantes</p>\n              <p className=\"text-sm font-semibold text-foreground flex items-center gap-1\">\n                <Icon name=\"users\" size={14} />\n                {project.students}\n              </p>\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":6384},"client/src/pages/teacher/bncc.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Icon } from \"@/components/Icon\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { useState } from \"react\";\nimport type { BnccCompetency } from \"@shared/schema\";\n\nexport default function TeacherBNCC() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState<string>(\"all\");\n\n  // TODO: Replace with actual API endpoint for getting all competencies\n  const { data: competencies = [], isLoading } = useQuery<BnccCompetency[]>({\n    queryKey: ['/api/bncc-competencies'],\n  });\n\n  const filteredCompetencies = competencies.filter(comp => {\n    const matchesSearch = comp.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         comp.description?.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCategory = selectedCategory === \"all\" || comp.category === selectedCategory;\n    return matchesSearch && matchesCategory;\n  });\n\n  const categories = Array.from(new Set(competencies.map(c => c.category)));\n\n  return (\n    <div className=\"animate-fade-in space-y-8\">\n      <div>\n        <h2 className=\"text-3xl font-bold text-foreground mb-2\" data-testid=\"heading-bncc\">Competências BNCC</h2>\n        <p className=\"text-muted-foreground\">Consulte e explore as competências da Base Nacional Comum Curricular.</p>\n      </div>\n\n      {/* Search and Filter */}\n      <div className=\"bg-card border border-card-border rounded-xl p-6 shadow-sm\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"md:col-span-2\">\n            <label className=\"block text-sm font-semibold text-muted-foreground mb-2\">Buscar Competências</label>\n            <div className=\"relative\">\n              <Icon name=\"search\" size={18} className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground\" />\n              <Input\n                type=\"text\"\n                placeholder=\"Buscar por nome ou descrição...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10\"\n                data-testid=\"input-search\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-semibold text-muted-foreground mb-2\">Categoria</label>\n            <select\n              value={selectedCategory}\n              onChange={(e) => setSelectedCategory(e.target.value)}\n              className=\"w-full bg-background border border-border rounded-lg px-4 py-2.5 text-foreground font-medium\"\n              data-testid=\"select-category\"\n            >\n              <option value=\"all\">Todas as Categorias</option>\n              {categories.map((cat) => (\n                <option key={cat} value={cat}>{cat}</option>\n              ))}\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"bg-card border border-card-border p-6 rounded-xl shadow-sm\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center\">\n              <Icon name=\"book\" size={24} className=\"text-primary\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-muted-foreground\">Total de Competências</p>\n              <p className=\"text-2xl font-bold text-foreground\" data-testid=\"text-total-competencies\">{competencies.length}</p>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-card border border-card-border p-6 rounded-xl shadow-sm\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-12 h-12 bg-green-500/10 rounded-full flex items-center justify-center\">\n              <Icon name=\"award\" size={24} className=\"text-green-600\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-muted-foreground\">Categorias</p>\n              <p className=\"text-2xl font-bold text-foreground\" data-testid=\"text-total-categories\">{categories.length}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-card border border-card-border p-6 rounded-xl shadow-sm\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-12 h-12 bg-blue-500/10 rounded-full flex items-center justify-center\">\n              <Icon name=\"search\" size={24} className=\"text-blue-600\" />\n            </div>\n            <div>\n              <p className=\"text-sm text-muted-foreground\">Resultados da Busca</p>\n              <p className=\"text-2xl font-bold text-foreground\" data-testid=\"text-filtered-count\">{filteredCompetencies.length}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Competencies List */}\n      {isLoading ? (\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\"></div>\n        </div>\n      ) : filteredCompetencies.length === 0 ? (\n        <div className=\"bg-card border border-card-border p-12 rounded-2xl text-center\">\n          <Icon name=\"book\" className=\"w-16 h-16 text-muted-foreground mx-auto mb-4\" />\n          <p className=\"text-lg text-muted-foreground\">Nenhuma competência encontrada</p>\n          <p className=\"text-sm text-muted-foreground mt-2\">\n            {searchTerm || selectedCategory !== \"all\" \n              ? \"Tente ajustar os filtros de busca\" \n              : \"Faça upload de um documento BNCC para começar\"}\n          </p>\n        </div>\n      ) : (\n        <div className=\"space-y-4\">\n          {filteredCompetencies.map((competency, idx) => (\n            <div \n              key={competency.id} \n              className=\"bg-card border border-card-border p-6 rounded-xl shadow-sm hover:shadow-md transition hover-elevate\"\n              data-testid={`competency-${idx}`}\n            >\n              <div className=\"flex justify-between items-start mb-3\">\n                <h3 className=\"text-lg font-bold text-foreground flex-1\" data-testid={`text-competency-name-${idx}`}>\n                  {competency.name}\n                </h3>\n                <Badge variant=\"outline\" className=\"ml-4\" data-testid={`badge-category-${idx}`}>\n                  {competency.category}\n                </Badge>\n              </div>\n              {competency.description && (\n                <p className=\"text-sm text-muted-foreground leading-relaxed\" data-testid={`text-competency-description-${idx}`}>\n                  {competency.description}\n                </p>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":6806},"client/src/components/ImportRubricModal.tsx":{"content":"import { useState } from \"react\";\nimport { Icon } from \"@/components/Icon\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport function ImportRubricModal() {\n  const { toast } = useToast();\n  const [open, setOpen] = useState(false);\n  const [file, setFile] = useState<File | null>(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = e.target.files?.[0];\n    if (selectedFile) {\n      const validTypes = [\n        'text/csv',\n        'application/vnd.ms-excel',\n        'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n      ];\n      \n      if (validTypes.includes(selectedFile.type) || selectedFile.name.endsWith('.csv') || selectedFile.name.endsWith('.xlsx') || selectedFile.name.endsWith('.xls')) {\n        setFile(selectedFile);\n      } else {\n        toast({\n          title: \"Arquivo inválido\",\n          description: \"Por favor, selecione um arquivo Excel (.xlsx, .xls) ou CSV (.csv)\",\n          variant: \"destructive\",\n        });\n      }\n    }\n  };\n\n  const handleImport = async () => {\n    if (!file) {\n      toast({\n        title: \"Nenhum arquivo selecionado\",\n        description: \"Por favor, selecione um arquivo para importar\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsProcessing(true);\n    try {\n      // TODO: Implementar lógica de processamento do arquivo\n      // Por enquanto, simular sucesso\n      await new Promise(resolve => setTimeout(resolve, 1500));\n      \n      toast({\n        title: \"Rubrica importada com sucesso!\",\n        description: `O arquivo \"${file.name}\" foi processado.`,\n      });\n      \n      setOpen(false);\n      setFile(null);\n    } catch (error) {\n      console.error('Erro ao importar rubrica:', error);\n      toast({\n        title: \"Erro ao importar\",\n        description: \"Ocorreu um erro ao processar o arquivo. Tente novamente.\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <button \n          className=\"bg-background border border-primary/20 text-primary px-5 py-2.5 rounded-xl font-semibold hover-elevate flex items-center gap-2 transition shadow-sm\" \n          data-testid=\"button-import-rubric\"\n        >\n          <Icon name=\"upload\" size={18} /> Importar Rubrica (Excel/CSV)\n        </button>\n      </DialogTrigger>\n      <DialogContent className=\"sm:max-w-[500px]\">\n        <DialogHeader>\n          <DialogTitle>Importar Rubrica de Avaliação</DialogTitle>\n          <DialogDescription>\n            Faça upload de um arquivo Excel ou CSV contendo os critérios de avaliação.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          <div className=\"border-2 border-dashed border-border rounded-xl p-8 text-center hover-elevate transition\">\n            <input\n              type=\"file\"\n              id=\"rubric-file\"\n              accept=\".csv,.xlsx,.xls\"\n              onChange={handleFileChange}\n              className=\"hidden\"\n              data-testid=\"input-file\"\n            />\n            <label\n              htmlFor=\"rubric-file\"\n              className=\"cursor-pointer flex flex-col items-center gap-3\"\n            >\n              <div className=\"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center\">\n                <Icon name=\"upload\" size={32} className=\"text-primary\" />\n              </div>\n              {file ? (\n                <div className=\"text-center\">\n                  <p className=\"font-semibold text-foreground\">{file.name}</p>\n                  <p className=\"text-sm text-muted-foreground mt-1\">\n                    {(file.size / 1024).toFixed(2)} KB\n                  </p>\n                </div>\n              ) : (\n                <div className=\"text-center\">\n                  <p className=\"font-semibold text-foreground\">Clique para selecionar</p>\n                  <p className=\"text-sm text-muted-foreground mt-1\">\n                    ou arraste um arquivo aqui\n                  </p>\n                  <p className=\"text-xs text-muted-foreground mt-2\">\n                    Formatos aceitos: .xlsx, .xls, .csv\n                  </p>\n                </div>\n              )}\n            </label>\n          </div>\n\n          <div className=\"bg-muted/50 border border-border rounded-lg p-4\">\n            <p className=\"text-sm font-semibold text-foreground mb-2\">Formato esperado:</p>\n            <ul className=\"text-xs text-muted-foreground space-y-1 list-disc list-inside\">\n              <li>Coluna 1: Nome do critério</li>\n              <li>Coluna 2: Peso (0-100)</li>\n              <li>Colunas 3-6: Níveis de desempenho (1-4)</li>\n            </ul>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end gap-3\">\n          <Button\n            variant=\"outline\"\n            onClick={() => {\n              setOpen(false);\n              setFile(null);\n            }}\n            data-testid=\"button-cancel\"\n          >\n            Cancelar\n          </Button>\n          <Button\n            onClick={handleImport}\n            disabled={!file || isProcessing}\n            data-testid=\"button-confirm-import\"\n          >\n            {isProcessing ? (\n              <>\n                <div className=\"w-4 h-4 border-2 border-primary-foreground border-t-transparent rounded-full animate-spin mr-2\"></div>\n                Processando...\n              </>\n            ) : (\n              <>\n                <Icon name=\"check\" size={16} className=\"mr-2\" />\n                Importar\n              </>\n            )}\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":5971},"client/src/pages/teacher/feedbacks.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { MessageSquare, Send, Edit2, Trash2, CheckCircle2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport type { Project, Feedback, Teacher } from \"@shared/schema\";\n\nconst feedbackFormSchema = z.object({\n  projectId: z.string().min(1, \"Selecione um projeto\"),\n  comment: z.string().min(1, \"Digite um comentário\"),\n});\n\ntype FeedbackFormData = z.infer<typeof feedbackFormSchema>;\n\nexport default function TeacherFeedback() {\n  const { toast } = useToast();\n  const [selectedProjectId, setSelectedProjectId] = useState<string>(\"\");\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [editingComment, setEditingComment] = useState(\"\");\n\n  const { data: teacher } = useQuery<Teacher>({\n    queryKey: [\"/api/me/teacher\"],\n  });\n\n  const { data: projects = [] } = useQuery<Project[]>({\n    queryKey: [\"/api/projects\"],\n  });\n\n  const { data: feedbacks = [], isLoading: feedbacksLoading } = useQuery<Feedback[]>({\n    queryKey: [\"/api/feedbacks/project\", selectedProjectId],\n    enabled: !!selectedProjectId,\n  });\n\n  const form = useForm<FeedbackFormData>({\n    resolver: zodResolver(feedbackFormSchema),\n    defaultValues: {\n      projectId: \"\",\n      comment: \"\",\n    },\n  });\n\n  // Auto-select first project when projects load\n  useEffect(() => {\n    if (projects.length > 0 && !selectedProjectId) {\n      const firstProjectId = projects[0].id;\n      setSelectedProjectId(firstProjectId);\n      form.setValue(\"projectId\", firstProjectId);\n    }\n  }, [projects, selectedProjectId, form]);\n\n  const createMutation = useMutation({\n    mutationFn: async (data: { teacherId: string; projectId: string; comment: string }) => {\n      return await apiRequest(`/api/feedbacks`, {\n        method: \"POST\",\n        body: JSON.stringify(data),\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/feedbacks/project\", selectedProjectId] });\n      // Reset only the comment field, keep projectId selected\n      form.reset({ projectId: selectedProjectId, comment: \"\" });\n      toast({\n        title: \"Feedback adicionado\",\n        description: \"O feedback foi registrado com sucesso.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Não foi possível adicionar o feedback.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, comment }: { id: string; comment: string }) => {\n      return await apiRequest(`/api/feedbacks/${id}`, {\n        method: \"PATCH\",\n        body: JSON.stringify({ comment }),\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/feedbacks/project\", selectedProjectId] });\n      setEditingId(null);\n      setEditingComment(\"\");\n      toast({\n        title: \"Feedback atualizado\",\n        description: \"O feedback foi atualizado com sucesso.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Não foi possível atualizar o feedback.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(`/api/feedbacks/${id}`, {\n        method: \"DELETE\",\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/feedbacks/project\", selectedProjectId] });\n      toast({\n        title: \"Feedback removido\",\n        description: \"O feedback foi removido com sucesso.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Não foi possível remover o feedback.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: FeedbackFormData) => {\n    if (!teacher) {\n      toast({\n        title: \"Erro\",\n        description: \"Informações do professor não disponíveis.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    createMutation.mutate({\n      teacherId: teacher.id,\n      projectId: data.projectId,\n      comment: data.comment,\n    });\n  };\n\n  const handleEditSubmit = (id: string) => {\n    if (!editingComment.trim()) {\n      toast({\n        title: \"Comentário vazio\",\n        description: \"O comentário não pode estar vazio.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    updateMutation.mutate({ id, comment: editingComment });\n  };\n\n  const startEdit = (feedback: Feedback) => {\n    setEditingId(feedback.id);\n    setEditingComment(feedback.comment);\n  };\n\n  const cancelEdit = () => {\n    setEditingId(null);\n    setEditingComment(\"\");\n  };\n\n  return (\n    <div className=\"h-full overflow-auto p-8 space-y-6\" data-testid=\"page-teacher-feedbacks\">\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-foreground mb-2\" data-testid=\"text-page-title\">\n            Feedbacks de Equipe\n          </h1>\n          <p className=\"text-muted-foreground\" data-testid=\"text-page-description\">\n            Deixe comentários e orientações para as equipes dos projetos\n          </p>\n        </div>\n\n        <Card className=\"mb-6\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <MessageSquare className=\"w-5 h-5\" />\n              Novo Feedback\n            </CardTitle>\n            <CardDescription>\n              Selecione um projeto e escreva um feedback para a equipe\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                <FormField\n                  control={form.control}\n                  name=\"projectId\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Projeto</FormLabel>\n                      <Select\n                        value={field.value}\n                        onValueChange={(value) => {\n                          field.onChange(value);\n                          setSelectedProjectId(value);\n                        }}\n                      >\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-project\">\n                            <SelectValue placeholder=\"Selecione um projeto\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          {projects.map((project) => (\n                            <SelectItem key={project.id} value={project.id}>\n                              {project.title}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"comment\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Comentário</FormLabel>\n                      <FormControl>\n                        <Textarea\n                          data-testid=\"input-feedback-comment\"\n                          placeholder=\"Digite seu feedback para a equipe...\"\n                          rows={4}\n                          className=\"resize-none\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <Button\n                  type=\"submit\"\n                  disabled={createMutation.isPending}\n                  className=\"w-full\"\n                  data-testid=\"button-submit-feedback\"\n                >\n                  <Send className=\"w-4 h-4 mr-2\" />\n                  {createMutation.isPending ? \"Enviando...\" : \"Enviar Feedback\"}\n                </Button>\n              </form>\n            </Form>\n          </CardContent>\n        </Card>\n\n        {selectedProjectId && (\n          <Card>\n            <CardHeader>\n              <CardTitle data-testid=\"text-feedbacks-title\">Feedbacks Registrados</CardTitle>\n              <CardDescription data-testid=\"text-feedbacks-count\">\n                {feedbacks.length === 0\n                  ? \"Nenhum feedback registrado ainda\"\n                  : `${feedbacks.length} feedback(s) para este projeto`}\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              {feedbacksLoading ? (\n                <div className=\"text-center py-8 text-muted-foreground\" data-testid=\"text-loading\">\n                  Carregando feedbacks...\n                </div>\n              ) : feedbacks.length === 0 ? (\n                <div className=\"text-center py-8 text-muted-foreground\" data-testid=\"text-empty-state\">\n                  Seja o primeiro a deixar um feedback para este projeto!\n                </div>\n              ) : (\n                feedbacks.map((feedback) => (\n                  <Card key={feedback.id} className=\"border-l-4 border-l-primary\" data-testid={`card-feedback-${feedback.id}`}>\n                    <CardContent className=\"pt-6\">\n                      {editingId === feedback.id ? (\n                        <div className=\"space-y-4\">\n                          <Textarea\n                            value={editingComment}\n                            onChange={(e) => setEditingComment(e.target.value)}\n                            rows={4}\n                            className=\"resize-none\"\n                            data-testid={`input-edit-feedback-${feedback.id}`}\n                          />\n                          <div className=\"flex gap-2\">\n                            <Button\n                              size=\"sm\"\n                              onClick={() => handleEditSubmit(feedback.id)}\n                              disabled={updateMutation.isPending || !editingComment.trim()}\n                              data-testid={`button-save-feedback-${feedback.id}`}\n                            >\n                              <CheckCircle2 className=\"w-4 h-4 mr-2\" />\n                              {updateMutation.isPending ? \"Salvando...\" : \"Salvar\"}\n                            </Button>\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={cancelEdit}\n                              data-testid={`button-cancel-edit-${feedback.id}`}\n                            >\n                              Cancelar\n                            </Button>\n                          </div>\n                        </div>\n                      ) : (\n                        <>\n                          <div className=\"flex items-start justify-between mb-2\">\n                            <div className=\"text-sm font-semibold text-primary\" data-testid={`text-feedback-label-${feedback.id}`}>\n                              Feedback de Equipe\n                            </div>\n                            <div className=\"flex gap-2\">\n                              <Button\n                                size=\"icon\"\n                                variant=\"ghost\"\n                                onClick={() => startEdit(feedback)}\n                                data-testid={`button-edit-feedback-${feedback.id}`}\n                              >\n                                <Edit2 className=\"w-4 h-4\" />\n                              </Button>\n                              <Button\n                                size=\"icon\"\n                                variant=\"ghost\"\n                                onClick={() => deleteMutation.mutate(feedback.id)}\n                                disabled={deleteMutation.isPending}\n                                data-testid={`button-delete-feedback-${feedback.id}`}\n                              >\n                                <Trash2 className=\"w-4 h-4\" />\n                              </Button>\n                            </div>\n                          </div>\n                          <p className=\"text-sm text-foreground whitespace-pre-wrap\" data-testid={`text-feedback-comment-${feedback.id}`}>\n                            {feedback.comment}\n                          </p>\n                        </>\n                      )}\n                    </CardContent>\n                  </Card>\n                ))\n              )}\n            </CardContent>\n          </Card>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":13341},"client/src/pages/teacher/calendar.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Calendar as CalendarIcon, MapPin, Clock, Plus, Edit2, Trash2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\nimport type { Project, Event, Teacher } from \"@shared/schema\";\n\nconst eventFormSchema = z.object({\n  projectId: z.string().optional(),\n  title: z.string().min(1, \"Digite um título\"),\n  description: z.string().optional(),\n  eventDate: z.string().min(1, \"Selecione uma data\"),\n  eventTime: z.string().min(1, \"Selecione um horário\"),\n  location: z.string().min(1, \"Digite um local\"),\n});\n\ntype EventFormData = z.infer<typeof eventFormSchema>;\n\nexport default function TeacherCalendar() {\n  const { toast } = useToast();\n  const [isCreateOpen, setIsCreateOpen] = useState(false);\n  const [editingEvent, setEditingEvent] = useState<Event | null>(null);\n\n  const { data: teacher } = useQuery<Teacher>({\n    queryKey: [\"/api/me/teacher\"],\n  });\n\n  const { data: projects = [] } = useQuery<Project[]>({\n    queryKey: [\"/api/projects\"],\n  });\n\n  const { data: events = [], isLoading } = useQuery<Event[]>({\n    queryKey: [\"/api/events/teacher\", teacher?.id],\n    enabled: !!teacher?.id,\n  });\n\n  const form = useForm<EventFormData>({\n    resolver: zodResolver(eventFormSchema),\n    defaultValues: {\n      projectId: \"\",\n      title: \"\",\n      description: \"\",\n      eventDate: \"\",\n      eventTime: \"\",\n      location: \"\",\n    },\n  });\n\n  const editForm = useForm<EventFormData>({\n    resolver: zodResolver(eventFormSchema),\n    defaultValues: {\n      projectId: \"\",\n      title: \"\",\n      description: \"\",\n      eventDate: \"\",\n      eventTime: \"\",\n      location: \"\",\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: EventFormData) => {\n      return await apiRequest(`/api/events`, {\n        method: \"POST\",\n        body: JSON.stringify({\n          teacherId: teacher?.id,\n          projectId: data.projectId || null,\n          title: data.title,\n          description: data.description || \"\",\n          date: data.eventDate,\n          time: data.eventTime,\n          location: data.location,\n        }),\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/events/teacher\", teacher?.id] });\n      setIsCreateOpen(false);\n      form.reset();\n      toast({\n        title: \"Evento criado\",\n        description: \"A reunião foi agendada com sucesso.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Não foi possível criar o evento.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: EventFormData }) => {\n      return await apiRequest(`/api/events/${id}`, {\n        method: \"PATCH\",\n        body: JSON.stringify({\n          projectId: data.projectId || null,\n          title: data.title,\n          description: data.description || \"\",\n          date: data.eventDate,\n          time: data.eventTime,\n          location: data.location,\n        }),\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/events/teacher\", teacher?.id] });\n      setEditingEvent(null);\n      editForm.reset();\n      toast({\n        title: \"Evento atualizado\",\n        description: \"A reunião foi atualizada com sucesso.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Não foi possível atualizar o evento.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(`/api/events/${id}`, {\n        method: \"DELETE\",\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/events/teacher\", teacher?.id] });\n      toast({\n        title: \"Evento removido\",\n        description: \"A reunião foi cancelada.\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Erro\",\n        description: \"Não foi possível remover o evento.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onCreateSubmit = (data: EventFormData) => {\n    createMutation.mutate(data);\n  };\n\n  const onEditSubmit = (data: EventFormData) => {\n    if (!editingEvent) return;\n    updateMutation.mutate({ id: editingEvent.id, data });\n  };\n\n  const startEdit = (event: Event) => {\n    setEditingEvent(event);\n    editForm.reset({\n      projectId: event.projectId || \"\",\n      title: event.title,\n      description: event.description || \"\",\n      eventDate: event.date,\n      eventTime: event.time,\n      location: event.location,\n    });\n  };\n\n  const sortedEvents = [...events].sort((a, b) => {\n    const dateTimeA = new Date(`${a.date}T${a.time}`).getTime();\n    const dateTimeB = new Date(`${b.date}T${b.time}`).getTime();\n    return dateTimeA - dateTimeB;\n  });\n\n  return (\n    <div className=\"h-full overflow-auto p-8 space-y-6\" data-testid=\"page-teacher-calendar\">\n      <div className=\"max-w-5xl mx-auto\">\n        <div className=\"flex items-center justify-between mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-foreground mb-2\" data-testid=\"text-page-title\">\n              Calendário de Reuniões\n            </h1>\n            <p className=\"text-muted-foreground\" data-testid=\"text-page-description\">\n              Gerencie reuniões presenciais com as equipes\n            </p>\n          </div>\n\n          <Dialog open={isCreateOpen} onOpenChange={setIsCreateOpen}>\n            <DialogTrigger asChild>\n              <Button data-testid=\"button-create-event\">\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Nova Reunião\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-2xl\">\n              <DialogHeader>\n                <DialogTitle>Agendar Reunião Presencial</DialogTitle>\n                <DialogDescription>\n                  Marque uma reunião presencial com a equipe do projeto\n                </DialogDescription>\n              </DialogHeader>\n\n              <Form {...form}>\n                <form onSubmit={form.handleSubmit(onCreateSubmit)} className=\"space-y-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"title\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Título *</FormLabel>\n                        <FormControl>\n                          <Input\n                            data-testid=\"input-event-title\"\n                            placeholder=\"Ex: Revisão do Protótipo\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"projectId\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Projeto (opcional)</FormLabel>\n                        <Select value={field.value} onValueChange={field.onChange}>\n                          <FormControl>\n                            <SelectTrigger data-testid=\"select-event-project\">\n                              <SelectValue placeholder=\"Selecione um projeto\" />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            <SelectItem value=\"\">Nenhum projeto</SelectItem>\n                            {projects.map((project) => (\n                              <SelectItem key={project.id} value={project.id}>\n                                {project.title}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <FormField\n                      control={form.control}\n                      name=\"eventDate\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Data *</FormLabel>\n                          <FormControl>\n                            <Input\n                              data-testid=\"input-event-date\"\n                              type=\"date\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={form.control}\n                      name=\"eventTime\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Horário *</FormLabel>\n                          <FormControl>\n                            <Input\n                              data-testid=\"input-event-time\"\n                              type=\"time\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                  </div>\n\n                  <FormField\n                    control={form.control}\n                    name=\"location\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Local *</FormLabel>\n                        <FormControl>\n                          <Input\n                            data-testid=\"input-event-location\"\n                            placeholder=\"Ex: Sala 201, Laboratório de Informática\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"description\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Descrição</FormLabel>\n                        <FormControl>\n                          <Textarea\n                            data-testid=\"input-event-description\"\n                            placeholder=\"Descreva o objetivo da reunião...\"\n                            rows={3}\n                            className=\"resize-none\"\n                            {...field}\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <DialogFooter>\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      onClick={() => {\n                        setIsCreateOpen(false);\n                        form.reset();\n                      }}\n                      data-testid=\"button-cancel-create\"\n                    >\n                      Cancelar\n                    </Button>\n                    <Button\n                      type=\"submit\"\n                      disabled={createMutation.isPending}\n                      data-testid=\"button-submit-event\"\n                    >\n                      {createMutation.isPending ? \"Criando...\" : \"Criar Reunião\"}\n                    </Button>\n                  </DialogFooter>\n                </form>\n              </Form>\n            </DialogContent>\n          </Dialog>\n        </div>\n\n        {isLoading ? (\n          <div className=\"text-center py-12 text-muted-foreground\" data-testid=\"text-loading\">\n            Carregando eventos...\n          </div>\n        ) : sortedEvents.length === 0 ? (\n          <Card>\n            <CardContent className=\"py-12 text-center\">\n              <CalendarIcon className=\"w-12 h-12 mx-auto mb-4 text-muted-foreground\" />\n              <p className=\"text-muted-foreground\" data-testid=\"text-empty-state\">\n                Nenhuma reunião agendada ainda. Clique em \"Nova Reunião\" para começar.\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"space-y-4\">\n            {sortedEvents.map((event) => {\n              const project = projects.find((p) => p.id === event.projectId);\n              const eventDate = new Date(`${event.date}T${event.time}`);\n\n              return (\n                <Card key={event.id} className=\"hover-elevate\" data-testid={`card-event-${event.id}`}>\n                  <CardHeader>\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <CardTitle className=\"mb-2\" data-testid={`text-event-title-${event.id}`}>\n                          {event.title}\n                        </CardTitle>\n                        {project && (\n                          <div className=\"inline-block px-2 py-1 rounded text-xs font-medium bg-primary/10 text-primary mb-2\" data-testid={`text-event-project-${event.id}`}>\n                            {project.title}\n                          </div>\n                        )}\n                        <div className=\"flex flex-wrap gap-4 text-sm text-muted-foreground mt-2\">\n                          <div className=\"flex items-center gap-2\">\n                            <CalendarIcon className=\"w-4 h-4\" />\n                            <span data-testid={`text-event-date-${event.id}`}>\n                              {format(eventDate, \"dd 'de' MMMM 'de' yyyy\", { locale: ptBR })}\n                            </span>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <Clock className=\"w-4 h-4\" />\n                            <span data-testid={`text-event-time-${event.id}`}>\n                              {format(eventDate, \"HH:mm\")}\n                            </span>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <MapPin className=\"w-4 h-4\" />\n                            <span data-testid={`text-event-location-${event.id}`}>\n                              {event.location}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"flex gap-2\">\n                        <Dialog\n                          open={editingEvent?.id === event.id}\n                          onOpenChange={(open) => {\n                            if (!open) {\n                              setEditingEvent(null);\n                              editForm.reset();\n                            }\n                          }}\n                        >\n                          <DialogTrigger asChild>\n                            <Button\n                              size=\"icon\"\n                              variant=\"ghost\"\n                              onClick={() => startEdit(event)}\n                              data-testid={`button-edit-event-${event.id}`}\n                            >\n                              <Edit2 className=\"w-4 h-4\" />\n                            </Button>\n                          </DialogTrigger>\n                          <DialogContent className=\"max-w-2xl\">\n                            <DialogHeader>\n                              <DialogTitle>Editar Reunião</DialogTitle>\n                            </DialogHeader>\n\n                            <Form {...editForm}>\n                              <form onSubmit={editForm.handleSubmit(onEditSubmit)} className=\"space-y-4\">\n                                <FormField\n                                  control={editForm.control}\n                                  name=\"title\"\n                                  render={({ field }) => (\n                                    <FormItem>\n                                      <FormLabel>Título *</FormLabel>\n                                      <FormControl>\n                                        <Input data-testid=\"input-edit-event-title\" {...field} />\n                                      </FormControl>\n                                      <FormMessage />\n                                    </FormItem>\n                                  )}\n                                />\n\n                                <FormField\n                                  control={editForm.control}\n                                  name=\"projectId\"\n                                  render={({ field }) => (\n                                    <FormItem>\n                                      <FormLabel>Projeto</FormLabel>\n                                      <Select value={field.value} onValueChange={field.onChange}>\n                                        <FormControl>\n                                          <SelectTrigger>\n                                            <SelectValue placeholder=\"Selecione um projeto\" />\n                                          </SelectTrigger>\n                                        </FormControl>\n                                        <SelectContent>\n                                          <SelectItem value=\"\">Nenhum projeto</SelectItem>\n                                          {projects.map((project) => (\n                                            <SelectItem key={project.id} value={project.id}>\n                                              {project.title}\n                                            </SelectItem>\n                                          ))}\n                                        </SelectContent>\n                                      </Select>\n                                      <FormMessage />\n                                    </FormItem>\n                                  )}\n                                />\n\n                                <div className=\"grid grid-cols-2 gap-4\">\n                                  <FormField\n                                    control={editForm.control}\n                                    name=\"eventDate\"\n                                    render={({ field }) => (\n                                      <FormItem>\n                                        <FormLabel>Data *</FormLabel>\n                                        <FormControl>\n                                          <Input type=\"date\" {...field} />\n                                        </FormControl>\n                                        <FormMessage />\n                                      </FormItem>\n                                    )}\n                                  />\n\n                                  <FormField\n                                    control={editForm.control}\n                                    name=\"eventTime\"\n                                    render={({ field }) => (\n                                      <FormItem>\n                                        <FormLabel>Horário *</FormLabel>\n                                        <FormControl>\n                                          <Input type=\"time\" {...field} />\n                                        </FormControl>\n                                        <FormMessage />\n                                      </FormItem>\n                                    )}\n                                  />\n                                </div>\n\n                                <FormField\n                                  control={editForm.control}\n                                  name=\"location\"\n                                  render={({ field }) => (\n                                    <FormItem>\n                                      <FormLabel>Local *</FormLabel>\n                                      <FormControl>\n                                        <Input {...field} />\n                                      </FormControl>\n                                      <FormMessage />\n                                    </FormItem>\n                                  )}\n                                />\n\n                                <FormField\n                                  control={editForm.control}\n                                  name=\"description\"\n                                  render={({ field }) => (\n                                    <FormItem>\n                                      <FormLabel>Descrição</FormLabel>\n                                      <FormControl>\n                                        <Textarea\n                                          rows={3}\n                                          className=\"resize-none\"\n                                          {...field}\n                                        />\n                                      </FormControl>\n                                      <FormMessage />\n                                    </FormItem>\n                                  )}\n                                />\n\n                                <DialogFooter>\n                                  <Button\n                                    type=\"button\"\n                                    variant=\"outline\"\n                                    onClick={() => {\n                                      setEditingEvent(null);\n                                      editForm.reset();\n                                    }}\n                                  >\n                                    Cancelar\n                                  </Button>\n                                  <Button\n                                    type=\"submit\"\n                                    disabled={updateMutation.isPending}\n                                    data-testid=\"button-update-event\"\n                                  >\n                                    {updateMutation.isPending ? \"Salvando...\" : \"Salvar Alterações\"}\n                                  </Button>\n                                </DialogFooter>\n                              </form>\n                            </Form>\n                          </DialogContent>\n                        </Dialog>\n\n                        <Button\n                          size=\"icon\"\n                          variant=\"ghost\"\n                          onClick={() => deleteMutation.mutate(event.id)}\n                          disabled={deleteMutation.isPending}\n                          data-testid={`button-delete-event-${event.id}`}\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                  </CardHeader>\n                  {event.description && (\n                    <CardContent>\n                      <p className=\"text-sm text-foreground whitespace-pre-wrap\" data-testid={`text-event-description-${event.id}`}>\n                        {event.description}\n                      </p>\n                    </CardContent>\n                  )}\n                </Card>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":24255},"client/src/pages/coordinator/calendar.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Calendar, Clock, MapPin, User, TrendingUp } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { ptBR } from \"date-fns/locale\";\nimport { useState } from \"react\";\n\ninterface EventWithStats {\n  id: string;\n  title: string;\n  description: string | null;\n  date: string;\n  time: string;\n  location: string;\n  projectId: string | null;\n  teacherId: string;\n  teacherName: string;\n  statistics: {\n    accepted: number;\n    rejected: number;\n    pending: number;\n    total: number;\n  };\n  createdAt: string;\n}\n\nexport default function CoordinatorCalendar() {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [filterTeacher, setFilterTeacher] = useState<string>(\"all\");\n  const [filterStatus, setFilterStatus] = useState<string>(\"all\");\n\n  const { data: events, isLoading } = useQuery<EventWithStats[]>({\n    queryKey: ['/api/events/coordinator/all'],\n  });\n\n  const sortedEvents = events?.sort((a, b) => {\n    const dateA = new Date(`${a.date}T${a.time}`);\n    const dateB = new Date(`${b.date}T${b.time}`);\n    return dateA.getTime() - dateB.getTime();\n  }) || [];\n\n  const teachers = Array.from(new Set(sortedEvents.map(e => e.teacherName)));\n\n  const filteredEvents = sortedEvents.filter(event => {\n    const matchesSearch = event.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         event.location.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesTeacher = filterTeacher === \"all\" || event.teacherName === filterTeacher;\n    \n    let matchesStatus = true;\n    if (filterStatus === \"pending\") {\n      matchesStatus = event.statistics.pending > 0;\n    } else if (filterStatus === \"accepted\") {\n      matchesStatus = event.statistics.accepted > 0;\n    } else if (filterStatus === \"rejected\") {\n      matchesStatus = event.statistics.rejected > 0;\n    }\n\n    return matchesSearch && matchesTeacher && matchesStatus;\n  });\n\n  const totalEvents = sortedEvents.length;\n  const totalResponses = sortedEvents.reduce((sum, e) => sum + e.statistics.total, 0);\n  const totalAccepted = sortedEvents.reduce((sum, e) => sum + e.statistics.accepted, 0);\n  const totalPending = sortedEvents.reduce((sum, e) => sum + e.statistics.pending, 0);\n\n  return (\n    <div className=\"animate-fade-in space-y-8\" data-testid=\"page-coordinator-calendar\">\n      <div>\n        <h2 className=\"text-3xl font-bold text-foreground mb-2\">Calendário de Eventos</h2>\n        <p className=\"text-muted-foreground\">\n          Acompanhe todos os eventos agendados pelos professores e suas taxas de participação\n        </p>\n      </div>\n\n      {/* Statistics Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardDescription>Total de Eventos</CardDescription>\n            <CardTitle className=\"text-3xl\" data-testid=\"text-total-events\">{totalEvents}</CardTitle>\n          </CardHeader>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardDescription>Respostas Recebidas</CardDescription>\n            <CardTitle className=\"text-3xl\" data-testid=\"text-total-responses\">{totalResponses}</CardTitle>\n          </CardHeader>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardDescription>Confirmados</CardDescription>\n            <CardTitle className=\"text-3xl text-green-600\" data-testid=\"text-total-accepted\">{totalAccepted}</CardTitle>\n          </CardHeader>\n        </Card>\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardDescription>Pendentes</CardDescription>\n            <CardTitle className=\"text-3xl text-yellow-600\" data-testid=\"text-total-pending\">{totalPending}</CardTitle>\n          </CardHeader>\n        </Card>\n      </div>\n\n      {/* Filters */}\n      <Card>\n        <CardContent className=\"pt-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <Input\n                placeholder=\"Buscar por título ou local...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                data-testid=\"input-search\"\n              />\n            </div>\n            <div>\n              <Select value={filterTeacher} onValueChange={setFilterTeacher}>\n                <SelectTrigger data-testid=\"select-teacher-filter\">\n                  <SelectValue placeholder=\"Filtrar por professor\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Todos os professores</SelectItem>\n                  {teachers.map(teacher => (\n                    <SelectItem key={teacher} value={teacher}>{teacher}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n            <div>\n              <Select value={filterStatus} onValueChange={setFilterStatus}>\n                <SelectTrigger data-testid=\"select-status-filter\">\n                  <SelectValue placeholder=\"Filtrar por status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">Todos os status</SelectItem>\n                  <SelectItem value=\"pending\">Com pendentes</SelectItem>\n                  <SelectItem value=\"accepted\">Com aceitos</SelectItem>\n                  <SelectItem value=\"rejected\">Com rejeitados</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Events List */}\n      {isLoading ? (\n        <div className=\"space-y-4\">\n          {[1, 2, 3].map((i) => (\n            <Card key={i}>\n              <CardHeader>\n                <Skeleton className=\"h-6 w-3/4\" />\n                <Skeleton className=\"h-4 w-1/2 mt-2\" />\n              </CardHeader>\n              <CardContent>\n                <Skeleton className=\"h-4 w-full\" />\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      ) : filteredEvents.length === 0 ? (\n        <Card>\n          <CardContent className=\"flex flex-col items-center justify-center py-12\">\n            <Calendar className=\"h-16 w-16 text-muted-foreground mb-4\" />\n            <h3 className=\"text-xl font-semibold text-foreground mb-2\">\n              Nenhum evento encontrado\n            </h3>\n            <p className=\"text-muted-foreground text-center\">\n              {searchTerm || filterTeacher !== \"all\" || filterStatus !== \"all\"\n                ? \"Tente ajustar os filtros de busca.\"\n                : \"Quando professores agendarem eventos, eles aparecerão aqui.\"}\n            </p>\n          </CardContent>\n        </Card>\n      ) : (\n        <div className=\"space-y-4\">\n          {filteredEvents.map((event) => {\n            const eventDate = new Date(`${event.date}T${event.time}`);\n            const isPast = eventDate < new Date();\n            const acceptanceRate = event.statistics.total > 0 \n              ? Math.round((event.statistics.accepted / event.statistics.total) * 100)\n              : 0;\n            \n            return (\n              <Card \n                key={event.id} \n                className=\"hover-elevate\" \n                data-testid={`card-event-${event.id}`}\n              >\n                <CardHeader>\n                  <div className=\"flex items-start justify-between gap-4 flex-wrap\">\n                    <div className=\"flex-1\">\n                      <CardTitle className=\"text-xl mb-2\" data-testid={`text-event-title-${event.id}`}>\n                        {event.title}\n                      </CardTitle>\n                      <CardDescription>\n                        {event.description || 'Sem descrição'}\n                      </CardDescription>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Badge variant=\"outline\" data-testid={`badge-teacher-${event.id}`}>\n                        <User className=\"h-3 w-3 mr-1\" />\n                        {event.teacherName}\n                      </Badge>\n                      {isPast && (\n                        <Badge variant=\"secondary\">Encerrado</Badge>\n                      )}\n                    </div>\n                  </div>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <Calendar className=\"h-4 w-4\" />\n                      <span data-testid={`text-event-date-${event.id}`}>\n                        {format(new Date(event.date), \"dd 'de' MMMM 'de' yyyy\", { locale: ptBR })}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <Clock className=\"h-4 w-4\" />\n                      <span data-testid={`text-event-time-${event.id}`}>{event.time}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-muted-foreground\">\n                      <MapPin className=\"h-4 w-4\" />\n                      <span data-testid={`text-event-location-${event.id}`}>{event.location}</span>\n                    </div>\n                  </div>\n\n                  {/* Statistics */}\n                  <div className=\"border-t pt-4\">\n                    <div className=\"flex items-center gap-2 mb-3\">\n                      <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n                      <span className=\"text-sm font-medium\">Estatísticas de Participação</span>\n                    </div>\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm\">\n                      <div className=\"bg-muted/50 rounded-lg p-3\">\n                        <div className=\"text-xs text-muted-foreground mb-1\">Total</div>\n                        <div className=\"text-lg font-bold\" data-testid={`text-stat-total-${event.id}`}>\n                          {event.statistics.total}\n                        </div>\n                      </div>\n                      <div className=\"bg-green-50 dark:bg-green-950/20 rounded-lg p-3\">\n                        <div className=\"text-xs text-green-700 dark:text-green-400 mb-1\">Aceitos</div>\n                        <div className=\"text-lg font-bold text-green-700 dark:text-green-400\" data-testid={`text-stat-accepted-${event.id}`}>\n                          {event.statistics.accepted}\n                        </div>\n                      </div>\n                      <div className=\"bg-red-50 dark:bg-red-950/20 rounded-lg p-3\">\n                        <div className=\"text-xs text-red-700 dark:text-red-400 mb-1\">Rejeitados</div>\n                        <div className=\"text-lg font-bold text-red-700 dark:text-red-400\" data-testid={`text-stat-rejected-${event.id}`}>\n                          {event.statistics.rejected}\n                        </div>\n                      </div>\n                      <div className=\"bg-yellow-50 dark:bg-yellow-950/20 rounded-lg p-3\">\n                        <div className=\"text-xs text-yellow-700 dark:text-yellow-400 mb-1\">Pendentes</div>\n                        <div className=\"text-lg font-bold text-yellow-700 dark:text-yellow-400\" data-testid={`text-stat-pending-${event.id}`}>\n                          {event.statistics.pending}\n                        </div>\n                      </div>\n                    </div>\n                    {event.statistics.total > 0 && (\n                      <div className=\"mt-3\">\n                        <div className=\"text-xs text-muted-foreground mb-1\">\n                          Taxa de aceitação: <span className=\"font-semibold\">{acceptanceRate}%</span>\n                        </div>\n                        <div className=\"w-full bg-muted rounded-full h-2\">\n                          <div \n                            className=\"bg-green-500 h-2 rounded-full transition-all\"\n                            style={{ width: `${acceptanceRate}%` }}\n                          />\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":12670},"client/src/components/SpreadsheetImport.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Upload, FileSpreadsheet, CheckCircle, AlertCircle } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface ImportResult {\n  success: boolean;\n  message: string;\n  results: {\n    total: number;\n    created: number;\n    updated: number;\n    skipped: number;\n    errors: string[];\n  };\n}\n\nexport function SpreadsheetImport() {\n  const [open, setOpen] = useState(false);\n  const [file, setFile] = useState<File | null>(null);\n  const [dragActive, setDragActive] = useState(false);\n  const [importResult, setImportResult] = useState<ImportResult | null>(null);\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const importMutation = useMutation({\n    mutationFn: async (file: File) => {\n      const formData = new FormData();\n      formData.append('file', file);\n      \n      return await apiRequest('/api/students/import-spreadsheet', {\n        method: 'POST',\n        body: formData,\n        // Don't set Content-Type header - browser will set it with boundary for multipart/form-data\n        headers: {},\n      }) as Promise<ImportResult>;\n    },\n    onSuccess: (data) => {\n      setImportResult(data);\n      // Invalidate all student and class related queries\n      queryClient.invalidateQueries({ queryKey: ['/api/students'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/classes'] });\n      queryClient.invalidateQueries({ queryKey: ['/api/teachers'] });\n      toast({\n        title: \"Importação concluída!\",\n        description: data.message,\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro na importação\",\n        description: error.message || \"Não foi possível importar a planilha\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setDragActive(true);\n    } else if (e.type === \"dragleave\") {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      const droppedFile = e.dataTransfer.files[0];\n      if (isValidFile(droppedFile)) {\n        setFile(droppedFile);\n      } else {\n        toast({\n          title: \"Arquivo inválido\",\n          description: \"Por favor, envie um arquivo Excel (.xlsx, .xls) ou CSV\",\n          variant: \"destructive\",\n        });\n      }\n    }\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files[0]) {\n      const selectedFile = e.target.files[0];\n      if (isValidFile(selectedFile)) {\n        setFile(selectedFile);\n      } else {\n        toast({\n          title: \"Arquivo inválido\",\n          description: \"Por favor, envie um arquivo Excel (.xlsx, .xls) ou CSV\",\n          variant: \"destructive\",\n        });\n      }\n    }\n  };\n\n  const isValidFile = (file: File) => {\n    const validExtensions = ['.xlsx', '.xls', '.csv'];\n    const fileName = file.name.toLowerCase();\n    return validExtensions.some(ext => fileName.endsWith(ext));\n  };\n\n  const handleImport = () => {\n    if (file) {\n      importMutation.mutate(file);\n    }\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setFile(null);\n    setImportResult(null);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button variant=\"outline\" data-testid=\"button-import-spreadsheet\">\n          <Upload className=\"w-4 h-4 mr-2\" />\n          Importar Planilha\n        </Button>\n      </DialogTrigger>\n      <DialogContent className=\"sm:max-w-[600px]\" data-testid=\"dialog-import-spreadsheet\">\n        <DialogHeader>\n          <DialogTitle>Importar Alunos por Planilha</DialogTitle>\n          <DialogDescription>\n            Envie um arquivo Excel (.xlsx, .xls) ou CSV com colunas \"Nome\" e \"Email\" para importar alunos em lote.\n            A senha padrão será \"123456\".\n          </DialogDescription>\n        </DialogHeader>\n\n        {!importResult ? (\n          <div className=\"space-y-4\">\n            <div\n              className={`border-2 border-dashed rounded-lg p-8 text-center transition ${\n                dragActive\n                  ? \"border-primary bg-primary/5\"\n                  : \"border-border hover:border-primary/50\"\n              }`}\n              onDragEnter={handleDrag}\n              onDragLeave={handleDrag}\n              onDragOver={handleDrag}\n              onDrop={handleDrop}\n              data-testid=\"dropzone-import\"\n            >\n              {file ? (\n                <div className=\"space-y-2\">\n                  <FileSpreadsheet className=\"w-12 h-12 text-primary mx-auto\" />\n                  <p className=\"font-medium text-foreground\" data-testid=\"text-filename\">{file.name}</p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {(file.size / 1024).toFixed(2)} KB\n                  </p>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => setFile(null)}\n                    data-testid=\"button-remove-file\"\n                  >\n                    Remover arquivo\n                  </Button>\n                </div>\n              ) : (\n                <div className=\"space-y-2\">\n                  <Upload className=\"w-12 h-12 text-muted-foreground mx-auto\" />\n                  <p className=\"text-muted-foreground\">\n                    Arraste um arquivo aqui ou clique para selecionar\n                  </p>\n                  <input\n                    type=\"file\"\n                    accept=\".xlsx,.xls,.csv\"\n                    onChange={handleFileChange}\n                    className=\"hidden\"\n                    id=\"file-input\"\n                    data-testid=\"input-file\"\n                  />\n                  <label htmlFor=\"file-input\">\n                    <Button variant=\"secondary\" asChild data-testid=\"button-select-file\">\n                      <span>Selecionar Arquivo</span>\n                    </Button>\n                  </label>\n                </div>\n              )}\n            </div>\n\n            <div className=\"bg-muted/50 p-4 rounded-lg text-sm space-y-2\">\n              <p className=\"font-medium\">Formato da planilha:</p>\n              <ul className=\"list-disc list-inside space-y-1 text-muted-foreground\">\n                <li>A planilha deve conter colunas \"Nome\" e \"Email\"</li>\n                <li>Opcionalmente, pode conter coluna \"Turma\"</li>\n                <li>Os nomes das colunas são detectados automaticamente</li>\n                <li>Alunos existentes serão ignorados</li>\n              </ul>\n            </div>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center gap-3 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg\">\n              <CheckCircle className=\"w-6 h-6 text-green-600 dark:text-green-400\" />\n              <div>\n                <p className=\"font-medium text-green-900 dark:text-green-100\">\n                  {importResult.message}\n                </p>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"bg-card border border-card-border p-4 rounded-lg\">\n                <p className=\"text-sm text-muted-foreground\">Total processado</p>\n                <p className=\"text-2xl font-bold\" data-testid=\"stat-total\">{importResult.results.total}</p>\n              </div>\n              <div className=\"bg-card border border-card-border p-4 rounded-lg\">\n                <p className=\"text-sm text-muted-foreground\">Criados</p>\n                <p className=\"text-2xl font-bold text-green-600\" data-testid=\"stat-created\">\n                  {importResult.results.created}\n                </p>\n              </div>\n              <div className=\"bg-card border border-card-border p-4 rounded-lg\">\n                <p className=\"text-sm text-muted-foreground\">Atualizados</p>\n                <p className=\"text-2xl font-bold text-blue-600\" data-testid=\"stat-updated\">\n                  {importResult.results.updated}\n                </p>\n              </div>\n              <div className=\"bg-card border border-card-border p-4 rounded-lg\">\n                <p className=\"text-sm text-muted-foreground\">Ignorados</p>\n                <p className=\"text-2xl font-bold text-orange-600\" data-testid=\"stat-skipped\">\n                  {importResult.results.skipped}\n                </p>\n              </div>\n            </div>\n\n            {importResult.results.errors.length > 0 && (\n              <div className=\"bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg\">\n                <div className=\"flex items-start gap-2\">\n                  <AlertCircle className=\"w-5 h-5 text-orange-600 dark:text-orange-400 mt-0.5\" />\n                  <div className=\"flex-1\">\n                    <p className=\"font-medium text-orange-900 dark:text-orange-100 mb-2\">\n                      Erros encontrados:\n                    </p>\n                    <ul className=\"text-sm text-orange-800 dark:text-orange-200 space-y-1 max-h-40 overflow-y-auto\">\n                      {importResult.results.errors.map((error, index) => (\n                        <li key={index} data-testid={`error-${index}`}>• {error}</li>\n                      ))}\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n\n        <DialogFooter>\n          {!importResult ? (\n            <>\n              <Button variant=\"outline\" onClick={handleClose} data-testid=\"button-cancel\">\n                Cancelar\n              </Button>\n              <Button\n                onClick={handleImport}\n                disabled={!file || importMutation.isPending}\n                data-testid=\"button-confirm-import\"\n              >\n                {importMutation.isPending ? \"Importando...\" : \"Importar\"}\n              </Button>\n            </>\n          ) : (\n            <Button onClick={handleClose} data-testid=\"button-close\">\n              Fechar\n            </Button>\n          )}\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":10623},"client/src/pages/teacher/project-detail.tsx":{"content":"import { useParams, useLocation } from \"wouter\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { Icon } from \"@/components/Icon\";\nimport type { ProjectWithTeacher, RubricCriteria, ProjectPlanning, BnccCompetency, ProjectCompetency } from \"@shared/schema\";\nimport { ArrowLeft, Sparkles, Check, X, Loader2 } from \"lucide-react\";\n\nconst planningFormSchema = z.object({\n  objectives: z.string().optional(),\n  methodology: z.string().optional(),\n  resources: z.string().optional(),\n  timeline: z.string().optional(),\n  expectedOutcomes: z.string().optional(),\n});\n\ntype AiSuggestion = {\n  competency: BnccCompetency;\n  coverage: number;\n  justification: string;\n  selected: boolean;\n};\n\nexport default function ProjectDetail() {\n  const { id } = useParams();\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [showAiModal, setShowAiModal] = useState(false);\n  const [aiSuggestions, setAiSuggestions] = useState<AiSuggestion[]>([]);\n\n  const { data: project, isLoading: projectLoading } = useQuery<ProjectWithTeacher>({\n    queryKey: ['/api/projects', id],\n    queryFn: async () => {\n      const response = await fetch(`/api/projects/${id}`);\n      if (!response.ok) throw new Error('Failed to fetch project');\n      return response.json();\n    },\n    enabled: !!id,\n  });\n\n  const { data: rubrics = [] } = useQuery<RubricCriteria[]>({\n    queryKey: [`/api/rubrics/${id}`],\n    enabled: !!id,\n  });\n\n  const { data: planning } = useQuery<ProjectPlanning>({\n    queryKey: [`/api/projects/${id}/planning`],\n    enabled: !!id,\n  });\n\n  const { data: projectCompetencies = [] } = useQuery<(ProjectCompetency & { competency: BnccCompetency })[]>({\n    queryKey: [`/api/projects/${id}/competencies`],\n    enabled: !!id,\n  });\n\n  const form = useForm<z.infer<typeof planningFormSchema>>({\n    resolver: zodResolver(planningFormSchema),\n    defaultValues: {\n      objectives: \"\",\n      methodology: \"\",\n      resources: \"\",\n      timeline: \"\",\n      expectedOutcomes: \"\",\n    },\n  });\n\n  // Update form when planning data loads\n  useEffect(() => {\n    if (planning) {\n      form.reset({\n        objectives: planning.objectives || \"\",\n        methodology: planning.methodology || \"\",\n        resources: planning.resources || \"\",\n        timeline: planning.timeline || \"\",\n        expectedOutcomes: planning.expectedOutcomes || \"\",\n      });\n    }\n  }, [planning, form]);\n\n  const savePlanningMutation = useMutation({\n    mutationFn: async (data: z.infer<typeof planningFormSchema>) => {\n      if (!id) throw new Error('Project ID is required');\n      const method = planning ? 'PATCH' : 'POST';\n      const payload = planning ? data : { ...data, projectId: id };\n      return apiRequest(`/api/projects/${id}/planning`, {\n        method,\n        body: payload,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/projects/${id}/planning`] });\n      queryClient.invalidateQueries({ queryKey: ['/api/projects', id] });\n      queryClient.invalidateQueries({ queryKey: ['/api/projects'] });\n      toast({\n        title: \"Planejamento salvo!\",\n        description: \"O planejamento do projeto foi atualizado com sucesso.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro ao salvar\",\n        description: error.message || \"Não foi possível salvar o planejamento.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmitPlanning = (data: z.infer<typeof planningFormSchema>) => {\n    savePlanningMutation.mutate(data);\n  };\n\n  const analyzeWithAiMutation = useMutation({\n    mutationFn: async () => {\n      if (!id) throw new Error('Project ID is required');\n      return apiRequest(`/api/projects/${id}/planning/analyze`, {\n        method: 'POST',\n      });\n    },\n    onSuccess: (data: any) => {\n      const suggestions: AiSuggestion[] = data.suggestions.map((s: any) => ({\n        competency: s.competency,\n        coverage: s.coverage,\n        justification: s.justification,\n        selected: true,\n      }));\n      setAiSuggestions(suggestions);\n      setShowAiModal(true);\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro na análise\",\n        description: error.message || \"Não foi possível analisar o planejamento.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const saveCompetenciesMutation = useMutation({\n    mutationFn: async (competencies: { competencyId: string; coverage: number }[]) => {\n      if (!id) throw new Error('Project ID is required');\n      return apiRequest(`/api/projects/${id}/competencies`, {\n        method: 'POST',\n        body: { competencies },\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/projects/${id}/competencies`] });\n      setShowAiModal(false);\n      setAiSuggestions([]);\n      toast({\n        title: \"Competências vinculadas!\",\n        description: \"As competências BNCC foram vinculadas ao projeto com sucesso.\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Erro ao salvar\",\n        description: error.message || \"Não foi possível salvar as competências.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleAnalyzeClick = () => {\n    if (!planning) {\n      toast({\n        title: \"Planejamento não encontrado\",\n        description: \"Salve o planejamento antes de analisar com IA.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    analyzeWithAiMutation.mutate();\n  };\n\n  const toggleSuggestion = (index: number) => {\n    setAiSuggestions(prev => \n      prev.map((s, i) => i === index ? { ...s, selected: !s.selected } : s)\n    );\n  };\n\n  const handleSaveCompetencies = () => {\n    const selected = aiSuggestions\n      .filter(s => s.selected)\n      .map(s => ({\n        competencyId: s.competency.id,\n        coverage: s.coverage,\n      }));\n    \n    if (selected.length === 0) {\n      toast({\n        title: \"Nenhuma competência selecionada\",\n        description: \"Selecione pelo menos uma competência para vincular ao projeto.\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    saveCompetenciesMutation.mutate(selected);\n  };\n\n  if (projectLoading || !project) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Carregando...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"Planejamento\": return \"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300\";\n      case \"Em Andamento\": return \"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300\";\n      case \"Para Avaliação\": return \"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300\";\n      case \"Concluído\": return \"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300\";\n      default: return \"bg-muted text-muted-foreground\";\n    }\n  };\n\n  const stages = [\n    { name: \"Pesquisa\", description: \"Investigação e coleta de informações\", completed: project.progress >= 25 },\n    { name: \"Prototipagem\", description: \"Desenvolvimento de protótipos e ideias\", completed: project.progress >= 50 },\n    { name: \"Implementação\", description: \"Execução do projeto\", completed: project.progress >= 75 },\n    { name: \"Apresentação\", description: \"Entrega e demonstração final\", completed: project.progress >= 100 },\n  ];\n\n  return (\n    <div className=\"animate-fade-in space-y-6 pb-8\">\n      {/* Header */}\n      <div className=\"flex items-center gap-4\">\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          onClick={() => setLocation(\"/\")}\n          data-testid=\"button-back\"\n        >\n          <ArrowLeft className=\"w-5 h-5\" />\n        </Button>\n        <div className=\"flex-1\">\n          <h1 className=\"text-3xl font-bold text-foreground\" data-testid=\"heading-project-title\">{project.title}</h1>\n          <div className=\"flex items-center gap-2 mt-2\">\n            <Badge className={getStatusColor(project.status)} data-testid=\"badge-status\">\n              {project.status}\n            </Badge>\n            <span className=\"text-sm text-muted-foreground\" data-testid=\"text-subject\">\n              {project.subject}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <Tabs defaultValue=\"overview\" className=\"w-full\">\n        <TabsList className=\"grid w-full grid-cols-3\" data-testid=\"tabs-list\">\n          <TabsTrigger value=\"overview\" data-testid=\"tab-overview\">Visão Geral</TabsTrigger>\n          <TabsTrigger value=\"planning\" data-testid=\"tab-planning\">Planejamento</TabsTrigger>\n          <TabsTrigger value=\"rubrics\" data-testid=\"tab-rubrics\">Avaliação</TabsTrigger>\n        </TabsList>\n\n        {/* Overview Tab */}\n        <TabsContent value=\"overview\" className=\"space-y-6\" data-testid=\"content-overview\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Progresso do Projeto</CardTitle>\n              <CardDescription>Acompanhe o andamento do projeto</CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div>\n                <div className=\"flex justify-between items-center mb-2\">\n                  <span className=\"text-sm font-medium\">Progresso Geral</span>\n                  <span className=\"text-sm font-bold text-primary\" data-testid=\"text-progress\">{project.progress}%</span>\n                </div>\n                <div className=\"w-full bg-muted h-3 rounded-full overflow-hidden\">\n                  <div \n                    className=\"h-full bg-primary rounded-full transition-all duration-500\"\n                    style={{ width: `${project.progress}%` }}\n                    data-testid=\"progress-bar\"\n                  ></div>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4 pt-4\">\n                <div className=\"space-y-1\">\n                  <p className=\"text-xs text-muted-foreground\">Próximo Prazo</p>\n                  <p className=\"text-sm font-semibold text-foreground flex items-center gap-1\" data-testid=\"text-deadline\">\n                    <Icon name=\"calendar\" size={14} />\n                    {project.nextDeadline ? new Date(project.nextDeadline).toLocaleDateString('pt-BR') : 'Não definido'}\n                  </p>\n                </div>\n                <div className=\"space-y-1\">\n                  <p className=\"text-xs text-muted-foreground\">Alunos Participantes</p>\n                  <p className=\"text-sm font-semibold text-foreground flex items-center gap-1\" data-testid=\"text-students\">\n                    <Icon name=\"users\" size={14} />\n                    {project.students}\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>Etapas do Projeto</CardTitle>\n              <CardDescription>Marcos importantes do desenvolvimento</CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                {stages.map((stage, idx) => (\n                  <div \n                    key={idx} \n                    className={`flex items-start gap-3 p-4 rounded-lg border ${\n                      stage.completed \n                        ? \"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800\" \n                        : \"bg-muted/50 border-border\"\n                    }`}\n                    data-testid={`stage-${idx}`}\n                  >\n                    <div className={`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${\n                      stage.completed \n                        ? \"bg-green-500 text-white\" \n                        : \"bg-muted text-muted-foreground\"\n                    }`}>\n                      {stage.completed ? (\n                        <Icon name=\"check\" size={18} />\n                      ) : (\n                        <span className=\"text-sm font-bold\">{idx + 1}</span>\n                      )}\n                    </div>\n                    <div className=\"flex-1\">\n                      <h4 className=\"font-semibold text-foreground\">{stage.name}</h4>\n                      <p className=\"text-sm text-muted-foreground mt-1\">{stage.description}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Planning Tab */}\n        <TabsContent value=\"planning\" className=\"space-y-6\" data-testid=\"content-planning\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Planejamento do Projeto</CardTitle>\n              <CardDescription>\n                Defina os objetivos, metodologia e recursos necessários para o projeto\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <Form {...form}>\n                <form onSubmit={form.handleSubmit(onSubmitPlanning)} className=\"space-y-6\">\n                  <FormField\n                    control={form.control}\n                    name=\"objectives\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Objetivos do Projeto</FormLabel>\n                        <FormControl>\n                          <Textarea\n                            placeholder=\"Descreva os objetivos de aprendizagem e metas do projeto...\"\n                            className=\"min-h-[100px]\"\n                            {...field}\n                            data-testid=\"textarea-objectives\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"methodology\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Metodologia</FormLabel>\n                        <FormControl>\n                          <Textarea\n                            placeholder=\"Explique como o projeto será desenvolvido (métodos, abordagens, etapas)...\"\n                            className=\"min-h-[100px]\"\n                            {...field}\n                            data-testid=\"textarea-methodology\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"resources\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Recursos Necessários</FormLabel>\n                        <FormControl>\n                          <Textarea\n                            placeholder=\"Liste materiais, ferramentas, tecnologias e outros recursos...\"\n                            className=\"min-h-[100px]\"\n                            {...field}\n                            data-testid=\"textarea-resources\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"timeline\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Cronograma</FormLabel>\n                        <FormControl>\n                          <Textarea\n                            placeholder=\"Defina o cronograma com marcos e prazos principais...\"\n                            className=\"min-h-[100px]\"\n                            {...field}\n                            data-testid=\"textarea-timeline\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"expectedOutcomes\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Resultados Esperados</FormLabel>\n                        <FormControl>\n                          <Textarea\n                            placeholder=\"Descreva os resultados e entregas esperados ao final do projeto...\"\n                            className=\"min-h-[100px]\"\n                            {...field}\n                            data-testid=\"textarea-expected-outcomes\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <div className=\"flex justify-between items-center gap-3\">\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      onClick={handleAnalyzeClick}\n                      disabled={!planning || analyzeWithAiMutation.isPending || savePlanningMutation.isPending}\n                      data-testid=\"button-analyze-ai\"\n                    >\n                      {analyzeWithAiMutation.isPending ? (\n                        <>\n                          <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                          Analisando...\n                        </>\n                      ) : (\n                        <>\n                          <Sparkles className=\"w-4 h-4 mr-2\" />\n                          Analisar com IA\n                        </>\n                      )}\n                    </Button>\n                    <Button\n                      type=\"submit\"\n                      disabled={savePlanningMutation.isPending || !form.formState.isDirty}\n                      data-testid=\"button-save-planning\"\n                    >\n                      {savePlanningMutation.isPending ? \"Salvando...\" : \"Salvar Planejamento\"}\n                    </Button>\n                  </div>\n                </form>\n              </Form>\n            </CardContent>\n          </Card>\n\n          {projectCompetencies.length > 0 && (\n            <Card>\n              <CardHeader>\n                <CardTitle>Competências BNCC Vinculadas</CardTitle>\n                <CardDescription>\n                  Competências da Base Nacional Comum Curricular vinculadas a este projeto\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  {projectCompetencies.map((pc) => (\n                    <div \n                      key={pc.id}\n                      className=\"p-4 border border-border rounded-lg bg-muted/30\"\n                      data-testid={`competency-${pc.id}`}\n                    >\n                      <div className=\"flex items-start justify-between gap-4 mb-2\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <h4 className=\"font-semibold text-foreground\">{pc.competency.name}</h4>\n                            <Badge variant=\"outline\" data-testid={`badge-category-${pc.id}`}>\n                              {pc.competency.category}\n                            </Badge>\n                          </div>\n                          {pc.competency.description && (\n                            <p className=\"text-sm text-muted-foreground\">{pc.competency.description}</p>\n                          )}\n                        </div>\n                        <div className=\"text-right\">\n                          <div className=\"text-xs text-muted-foreground mb-1\">Cobertura</div>\n                          <div className=\"text-lg font-bold text-primary\" data-testid={`text-coverage-${pc.id}`}>\n                            {pc.coverage}%\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          )}\n        </TabsContent>\n\n        {/* Rubrics Tab */}\n        <TabsContent value=\"rubrics\" className=\"space-y-6\" data-testid=\"content-rubrics\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Critérios de Avaliação</CardTitle>\n              <CardDescription>\n                Critérios e pesos para avaliar o desempenho dos alunos\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              {rubrics.length > 0 ? (\n                <div className=\"space-y-2\">\n                  {rubrics.map((rubric) => (\n                    <div \n                      key={rubric.id} \n                      className=\"flex justify-between items-center p-3 bg-muted/50 rounded-lg border border-border\"\n                      data-testid={`rubric-${rubric.id}`}\n                    >\n                      <span className=\"text-sm font-medium text-foreground\">{rubric.criteria}</span>\n                      <Badge variant=\"outline\" data-testid={`badge-weight-${rubric.id}`}>{rubric.weight}%</Badge>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-8 text-muted-foreground\" data-testid=\"text-no-rubrics\">\n                  <Icon name=\"clipboard\" size={48} className=\"mx-auto mb-4 opacity-50\" />\n                  <p>Nenhum critério de avaliação definido ainda.</p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n\n      {/* AI Analysis Modal */}\n      <Dialog open={showAiModal} onOpenChange={setShowAiModal}>\n        <DialogContent className=\"max-w-3xl max-h-[80vh] overflow-y-auto\" data-testid=\"modal-ai-analysis\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <Sparkles className=\"w-5 h-5 text-primary\" />\n              Sugestões de Competências BNCC\n            </DialogTitle>\n            <DialogDescription>\n              A IA analisou o planejamento do projeto e sugeriu as seguintes competências. \n              Selecione as que deseja vincular ao projeto.\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4 py-4\">\n            {aiSuggestions.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <p>Nenhuma sugestão disponível.</p>\n              </div>\n            ) : (\n              aiSuggestions.map((suggestion, index) => (\n                <div\n                  key={index}\n                  className={`p-4 border rounded-lg transition-all ${\n                    suggestion.selected\n                      ? 'border-primary bg-primary/5'\n                      : 'border-border bg-muted/20'\n                  }`}\n                  data-testid={`suggestion-${index}`}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      onClick={() => toggleSuggestion(index)}\n                      className={`mt-1 flex-shrink-0 ${\n                        suggestion.selected\n                          ? 'text-primary hover:text-primary'\n                          : 'text-muted-foreground'\n                      }`}\n                      data-testid={`button-toggle-${index}`}\n                    >\n                      {suggestion.selected ? (\n                        <Check className=\"w-5 h-5\" />\n                      ) : (\n                        <X className=\"w-5 h-5\" />\n                      )}\n                    </Button>\n                    \n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <h4 className=\"font-semibold text-foreground\">\n                          {suggestion.competency.name}\n                        </h4>\n                        <Badge variant=\"outline\" data-testid={`badge-category-${index}`}>\n                          {suggestion.competency.category}\n                        </Badge>\n                        <Badge className=\"ml-auto\" data-testid={`badge-coverage-${index}`}>\n                          {suggestion.coverage}% cobertura\n                        </Badge>\n                      </div>\n                      \n                      {suggestion.competency.description && (\n                        <p className=\"text-sm text-muted-foreground mb-2\">\n                          {suggestion.competency.description}\n                        </p>\n                      )}\n                      \n                      <div className=\"mt-3 p-3 bg-background rounded-md border border-border\">\n                        <p className=\"text-xs font-medium text-muted-foreground mb-1\">\n                          Justificativa da IA:\n                        </p>\n                        <p className=\"text-sm text-foreground\">\n                          {suggestion.justification}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n\n          <div className=\"flex justify-end gap-3 border-t pt-4\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => setShowAiModal(false)}\n              disabled={saveCompetenciesMutation.isPending}\n              data-testid=\"button-cancel-ai\"\n            >\n              Cancelar\n            </Button>\n            <Button\n              type=\"button\"\n              onClick={handleSaveCompetencies}\n              disabled={saveCompetenciesMutation.isPending || aiSuggestions.filter(s => s.selected).length === 0}\n              data-testid=\"button-save-competencies\"\n            >\n              {saveCompetenciesMutation.isPending ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Salvando...\n                </>\n              ) : (\n                `Vincular ${aiSuggestions.filter(s => s.selected).length} Competência${aiSuggestions.filter(s => s.selected).length !== 1 ? 's' : ''}`\n              )}\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":27635}},"version":2}